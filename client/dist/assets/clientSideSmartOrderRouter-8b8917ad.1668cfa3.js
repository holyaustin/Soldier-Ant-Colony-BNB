import{as as He,I as G0,a2 as q0,B as ye,cm as Dh,bX as Ph,a3 as Ia,ab as Bh,cn as Mh,b6 as kh}from"./web3.min.94457b0f.js";import{_ as yu,r as $n}from"./index.cbac5aa4.js";import{T as W,E as Fh,F as Uh,C as gu,a as ke,P as vu,d as ge,b as mt,c as sf,e as Nh,f as $e,R as ea,g as ta,h as N1,i as Lh,J as e0,j as Ut,k as Gh,l as Qs,m as qh,S as L1,n as $h,I as Wh,o as Vh,Q as fa,p as G1,q as q1,r as Nt}from"./main.172770b9.js";import"./index.5f17dba4.js";class pt{constructor(f){this.nodeCache=f}async get(f){return this.nodeCache.get(f)}async set(f,n){return this.nodeCache.set(f,n)}async has(f){return this.nodeCache.has(f)}}class Hh{constructor(){this.ERROR_MESSAGE='NullLogger does not support. Instantiate a valid logger using "setGlobalLogger"',this.src=!0}addStream(f){throw new Error(this.ERROR_MESSAGE)}addSerializers(f){throw new Error(this.ERROR_MESSAGE)}child(f,n){return this}reopenFileStreams(){throw new Error(this.ERROR_MESSAGE)}level(f){}levels(f,n){}trace(...f){return!0}debug(...f){return!0}info(...f){return!0}warn(...f){return!0}error(...f){return!0}fatal(...f){return!0}addListener(f,n){throw new Error(this.ERROR_MESSAGE)}on(f,n){throw new Error(this.ERROR_MESSAGE)}once(f,n){throw new Error(this.ERROR_MESSAGE)}removeListener(f,n){throw new Error(this.ERROR_MESSAGE)}off(f,n){throw new Error(this.ERROR_MESSAGE)}removeAllListeners(f){throw new Error(this.ERROR_MESSAGE)}setMaxListeners(f){throw new Error(this.ERROR_MESSAGE)}getMaxListeners(){throw new Error(this.ERROR_MESSAGE)}listeners(f){throw new Error(this.ERROR_MESSAGE)}rawListeners(f){throw new Error(this.ERROR_MESSAGE)}emit(f,...n){throw new Error(this.ERROR_MESSAGE)}listenerCount(f){throw new Error(this.ERROR_MESSAGE)}prependListener(f,n){throw new Error(this.ERROR_MESSAGE)}prependOnceListener(f,n){throw new Error(this.ERROR_MESSAGE)}eventNames(){throw new Error(this.ERROR_MESSAGE)}}let M=new Hh;class Kh{constructor(f,n,a){this.chainId=f,this.gasPriceProvider=n,this.cache=a,this.GAS_KEY=i=>`gasPrice-${i}`}async getGasPrice(){const f=await this.cache.get(this.GAS_KEY(this.chainId));if(f)return M.info({cachedGasPrice:f},`Got gas station price from local cache: ${f.gasPriceWei}.`),f;M.info("Gas station price local cache miss.");const n=await this.gasPriceProvider.getGasPrice();return await this.cache.set(this.GAS_KEY(this.chainId),n),n}}var Sa={exports:{}},Tu=function(f,n){return function(){for(var i=new Array(arguments.length),c=0;c<i.length;c++)i[c]=arguments[c];return f.apply(n,i)}},Qh=Tu,Gt=Object.prototype.toString;function wa(r){return Gt.call(r)==="[object Array]"}function na(r){return typeof r=="undefined"}function Yh(r){return r!==null&&!na(r)&&r.constructor!==null&&!na(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Xh(r){return Gt.call(r)==="[object ArrayBuffer]"}function jh(r){return typeof FormData!="undefined"&&r instanceof FormData}function zh(r){var f;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?f=ArrayBuffer.isView(r):f=r&&r.buffer&&r.buffer instanceof ArrayBuffer,f}function Jh(r){return typeof r=="string"}function Zh(r){return typeof r=="number"}function Au(r){return r!==null&&typeof r=="object"}function Mn(r){if(Gt.call(r)!=="[object Object]")return!1;var f=Object.getPrototypeOf(r);return f===null||f===Object.prototype}function em(r){return Gt.call(r)==="[object Date]"}function tm(r){return Gt.call(r)==="[object File]"}function fm(r){return Gt.call(r)==="[object Blob]"}function Eu(r){return Gt.call(r)==="[object Function]"}function nm(r){return Au(r)&&Eu(r.pipe)}function rm(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function sm(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function am(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Ca(r,f){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),wa(r))for(var n=0,a=r.length;n<a;n++)f.call(null,r[n],n,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&f.call(null,r[i],i,r)}function ra(){var r={};function f(i,c){Mn(r[c])&&Mn(i)?r[c]=ra(r[c],i):Mn(i)?r[c]=ra({},i):wa(i)?r[c]=i.slice():r[c]=i}for(var n=0,a=arguments.length;n<a;n++)Ca(arguments[n],f);return r}function im(r,f,n){return Ca(f,function(i,c){n&&typeof i=="function"?r[c]=Qh(i,n):r[c]=i}),r}function om(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var x0={isArray:wa,isArrayBuffer:Xh,isBuffer:Yh,isFormData:jh,isArrayBufferView:zh,isString:Jh,isNumber:Zh,isObject:Au,isPlainObject:Mn,isUndefined:na,isDate:em,isFile:tm,isBlob:fm,isFunction:Eu,isStream:nm,isURLSearchParams:rm,isStandardBrowserEnv:am,forEach:Ca,merge:ra,extend:im,trim:sm,stripBOM:om},nf=x0;function $1(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Iu=function(f,n,a){if(!n)return f;var i;if(a)i=a(n);else if(nf.isURLSearchParams(n))i=n.toString();else{var c=[];nf.forEach(n,function(u,m){u===null||typeof u=="undefined"||(nf.isArray(u)?m=m+"[]":u=[u],nf.forEach(u,function(g){nf.isDate(g)?g=g.toISOString():nf.isObject(g)&&(g=JSON.stringify(g)),c.push($1(m)+"="+$1(g))}))}),i=c.join("&")}if(i){var l=f.indexOf("#");l!==-1&&(f=f.slice(0,l)),f+=(f.indexOf("?")===-1?"?":"&")+i}return f},um=x0;function Kn(){this.handlers=[]}Kn.prototype.use=function(f,n,a){return this.handlers.push({fulfilled:f,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Kn.prototype.eject=function(f){this.handlers[f]&&(this.handlers[f]=null)};Kn.prototype.forEach=function(f){um.forEach(this.handlers,function(a){a!==null&&f(a)})};var cm=Kn,dm=x0,lm=function(f,n){dm.forEach(f,function(i,c){c!==n&&c.toUpperCase()===n.toUpperCase()&&(f[n]=i,delete f[c])})},Su=function(f,n,a,i,c){return f.config=n,a&&(f.code=a),f.request=i,f.response=c,f.isAxiosError=!0,f.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},f},pm=Su,wu=function(f,n,a,i,c){var l=new Error(f);return pm(l,n,a,i,c)},hm=wu,mm=function(f,n,a){var i=a.config.validateStatus;!a.status||!i||i(a.status)?f(a):n(hm("Request failed with status code "+a.status,a.config,null,a.request,a))},Pn=x0,bm=Pn.isStandardBrowserEnv()?function(){return{write:function(n,a,i,c,l,d){var u=[];u.push(n+"="+encodeURIComponent(a)),Pn.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Pn.isString(c)&&u.push("path="+c),Pn.isString(l)&&u.push("domain="+l),d===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),ym=function(f){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(f)},gm=function(f,n){return n?f.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):f},vm=ym,Tm=gm,Am=function(f,n){return f&&!vm(n)?Tm(f,n):n},Ys=x0,Em=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Im=function(f){var n={},a,i,c;return f&&Ys.forEach(f.split(`
`),function(d){if(c=d.indexOf(":"),a=Ys.trim(d.substr(0,c)).toLowerCase(),i=Ys.trim(d.substr(c+1)),a){if(n[a]&&Em.indexOf(a)>=0)return;a==="set-cookie"?n[a]=(n[a]?n[a]:[]).concat([i]):n[a]=n[a]?n[a]+", "+i:i}}),n},W1=x0,Sm=W1.isStandardBrowserEnv()?function(){var f=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),a;function i(c){var l=c;return f&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=i(window.location.href),function(l){var d=W1.isString(l)?i(l):l;return d.protocol===a.protocol&&d.host===a.host}}():function(){return function(){return!0}}(),Bn=x0,wm=mm,Cm=bm,Rm=Iu,Om=Am,_m=Im,xm=Sm,Xs=wu,V1=function(f){return new Promise(function(a,i){var c=f.data,l=f.headers,d=f.responseType;Bn.isFormData(c)&&delete l["Content-Type"];var u=new XMLHttpRequest;if(f.auth){var m=f.auth.username||"",y=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";l.Authorization="Basic "+btoa(m+":"+y)}var g=Om(f.baseURL,f.url);u.open(f.method.toUpperCase(),Rm(g,f.params,f.paramsSerializer),!0),u.timeout=f.timeout;function T(){if(!!u){var S="getAllResponseHeaders"in u?_m(u.getAllResponseHeaders()):null,w=!d||d==="text"||d==="json"?u.responseText:u.response,O={data:w,status:u.status,statusText:u.statusText,headers:S,config:f,request:u};wm(a,i,O),u=null}}if("onloadend"in u?u.onloadend=T:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(T)},u.onabort=function(){!u||(i(Xs("Request aborted",f,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(Xs("Network Error",f,null,u)),u=null},u.ontimeout=function(){var w="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(w=f.timeoutErrorMessage),i(Xs(w,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Bn.isStandardBrowserEnv()){var A=(f.withCredentials||xm(g))&&f.xsrfCookieName?Cm.read(f.xsrfCookieName):void 0;A&&(l[f.xsrfHeaderName]=A)}"setRequestHeader"in u&&Bn.forEach(l,function(w,O){typeof c=="undefined"&&O.toLowerCase()==="content-type"?delete l[O]:u.setRequestHeader(O,w)}),Bn.isUndefined(f.withCredentials)||(u.withCredentials=!!f.withCredentials),d&&d!=="json"&&(u.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&u.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(w){!u||(u.abort(),i(w),u=null)}),c||(c=null),u.send(c)})},l0=x0,H1=lm,Dm=Su,Pm={"Content-Type":"application/x-www-form-urlencoded"};function K1(r,f){!l0.isUndefined(r)&&l0.isUndefined(r["Content-Type"])&&(r["Content-Type"]=f)}function Bm(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=V1),r}function Mm(r,f,n){if(l0.isString(r))try{return(f||JSON.parse)(r),l0.trim(r)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(r)}var Qn={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Bm(),transformRequest:[function(f,n){return H1(n,"Accept"),H1(n,"Content-Type"),l0.isFormData(f)||l0.isArrayBuffer(f)||l0.isBuffer(f)||l0.isStream(f)||l0.isFile(f)||l0.isBlob(f)?f:l0.isArrayBufferView(f)?f.buffer:l0.isURLSearchParams(f)?(K1(n,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):l0.isObject(f)||n&&n["Content-Type"]==="application/json"?(K1(n,"application/json"),Mm(f)):f}],transformResponse:[function(f){var n=this.transitional,a=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,c=!a&&this.responseType==="json";if(c||i&&l0.isString(f)&&f.length)try{return JSON.parse(f)}catch(l){if(c)throw l.name==="SyntaxError"?Dm(l,this,"E_JSON_PARSE"):l}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300}};Qn.headers={common:{Accept:"application/json, text/plain, */*"}};l0.forEach(["delete","get","head"],function(f){Qn.headers[f]={}});l0.forEach(["post","put","patch"],function(f){Qn.headers[f]=l0.merge(Pm)});var Ra=Qn,km=x0,Fm=Ra,Um=function(f,n,a){var i=this||Fm;return km.forEach(a,function(l){f=l.call(i,f,n)}),f},Cu=function(f){return!!(f&&f.__CANCEL__)},Q1=x0,js=Um,Nm=Cu,Lm=Ra;function zs(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var Gm=function(f){zs(f),f.headers=f.headers||{},f.data=js.call(f,f.data,f.headers,f.transformRequest),f.headers=Q1.merge(f.headers.common||{},f.headers[f.method]||{},f.headers),Q1.forEach(["delete","get","head","post","put","patch","common"],function(i){delete f.headers[i]});var n=f.adapter||Lm.adapter;return n(f).then(function(i){return zs(f),i.data=js.call(f,i.data,i.headers,f.transformResponse),i},function(i){return Nm(i)||(zs(f),i&&i.response&&(i.response.data=js.call(f,i.response.data,i.response.headers,f.transformResponse))),Promise.reject(i)})},m0=x0,Ru=function(f,n){n=n||{};var a={},i=["url","method","data"],c=["headers","auth","proxy","params"],l=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],d=["validateStatus"];function u(T,A){return m0.isPlainObject(T)&&m0.isPlainObject(A)?m0.merge(T,A):m0.isPlainObject(A)?m0.merge({},A):m0.isArray(A)?A.slice():A}function m(T){m0.isUndefined(n[T])?m0.isUndefined(f[T])||(a[T]=u(void 0,f[T])):a[T]=u(f[T],n[T])}m0.forEach(i,function(A){m0.isUndefined(n[A])||(a[A]=u(void 0,n[A]))}),m0.forEach(c,m),m0.forEach(l,function(A){m0.isUndefined(n[A])?m0.isUndefined(f[A])||(a[A]=u(void 0,f[A])):a[A]=u(void 0,n[A])}),m0.forEach(d,function(A){A in n?a[A]=u(f[A],n[A]):A in f&&(a[A]=u(void 0,f[A]))});var y=i.concat(c).concat(l).concat(d),g=Object.keys(f).concat(Object.keys(n)).filter(function(A){return y.indexOf(A)===-1});return m0.forEach(g,m),a};const qm="axios",$m="0.21.4",Wm="Promise based HTTP client for the browser and node.js",Vm="index.js",Hm={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},Km={type:"git",url:"https://github.com/axios/axios.git"},Qm=["xhr","http","ajax","promise","node"],Ym="Matt Zabriskie",Xm="MIT",jm={url:"https://github.com/axios/axios/issues"},zm="https://axios-http.com",Jm={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},Zm={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},eb="dist/axios.min.js",tb="dist/axios.min.js",fb="./index.d.ts",nb={"follow-redirects":"^1.14.0"},rb=[{path:"./dist/axios.min.js",threshold:"5kB"}];var sb={name:qm,version:$m,description:Wm,main:Vm,scripts:Hm,repository:Km,keywords:Qm,author:Ym,license:Xm,bugs:jm,homepage:zm,devDependencies:Jm,browser:Zm,jsdelivr:eb,unpkg:tb,typings:fb,dependencies:nb,bundlesize:rb},Ou=sb,Oa={};["object","boolean","number","function","string","symbol"].forEach(function(r,f){Oa[r]=function(a){return typeof a===r||"a"+(f<1?"n ":" ")+r}});var Y1={},ab=Ou.version.split(".");function _u(r,f){for(var n=f?f.split("."):ab,a=r.split("."),i=0;i<3;i++){if(n[i]>a[i])return!0;if(n[i]<a[i])return!1}return!1}Oa.transitional=function(f,n,a){var i=n&&_u(n);function c(l,d){return"[Axios v"+Ou.version+"] Transitional option '"+l+"'"+d+(a?". "+a:"")}return function(l,d,u){if(f===!1)throw new Error(c(d," has been removed in "+n));return i&&!Y1[d]&&(Y1[d]=!0,console.warn(c(d," has been deprecated since v"+n+" and will be removed in the near future"))),f?f(l,d,u):!0}};function ib(r,f,n){if(typeof r!="object")throw new TypeError("options must be an object");for(var a=Object.keys(r),i=a.length;i-- >0;){var c=a[i],l=f[c];if(l){var d=r[c],u=d===void 0||l(d,c,r);if(u!==!0)throw new TypeError("option "+c+" must be "+u);continue}if(n!==!0)throw Error("Unknown option "+c)}}var ob={isOlderVersion:_u,assertOptions:ib,validators:Oa},xu=x0,ub=Iu,X1=cm,j1=Gm,Yn=Ru,Du=ob,rf=Du.validators;function Mf(r){this.defaults=r,this.interceptors={request:new X1,response:new X1}}Mf.prototype.request=function(f){typeof f=="string"?(f=arguments[1]||{},f.url=arguments[0]):f=f||{},f=Yn(this.defaults,f),f.method?f.method=f.method.toLowerCase():this.defaults.method?f.method=this.defaults.method.toLowerCase():f.method="get";var n=f.transitional;n!==void 0&&Du.assertOptions(n,{silentJSONParsing:rf.transitional(rf.boolean,"1.0.0"),forcedJSONParsing:rf.transitional(rf.boolean,"1.0.0"),clarifyTimeoutError:rf.transitional(rf.boolean,"1.0.0")},!1);var a=[],i=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(f)===!1||(i=i&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var c=[];this.interceptors.response.forEach(function(T){c.push(T.fulfilled,T.rejected)});var l;if(!i){var d=[j1,void 0];for(Array.prototype.unshift.apply(d,a),d=d.concat(c),l=Promise.resolve(f);d.length;)l=l.then(d.shift(),d.shift());return l}for(var u=f;a.length;){var m=a.shift(),y=a.shift();try{u=m(u)}catch(g){y(g);break}}try{l=j1(u)}catch(g){return Promise.reject(g)}for(;c.length;)l=l.then(c.shift(),c.shift());return l};Mf.prototype.getUri=function(f){return f=Yn(this.defaults,f),ub(f.url,f.params,f.paramsSerializer).replace(/^\?/,"")};xu.forEach(["delete","get","head","options"],function(f){Mf.prototype[f]=function(n,a){return this.request(Yn(a||{},{method:f,url:n,data:(a||{}).data}))}});xu.forEach(["post","put","patch"],function(f){Mf.prototype[f]=function(n,a,i){return this.request(Yn(i||{},{method:f,url:n,data:a}))}});var cb=Mf;function _a(r){this.message=r}_a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};_a.prototype.__CANCEL__=!0;var Pu=_a,db=Pu;function Wn(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var f;this.promise=new Promise(function(i){f=i});var n=this;r(function(i){n.reason||(n.reason=new db(i),f(n.reason))})}Wn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Wn.source=function(){var f,n=new Wn(function(i){f=i});return{token:n,cancel:f}};var lb=Wn,pb=function(f){return function(a){return f.apply(null,a)}},hb=function(f){return typeof f=="object"&&f.isAxiosError===!0},z1=x0,mb=Tu,kn=cb,bb=Ru,yb=Ra;function Bu(r){var f=new kn(r),n=mb(kn.prototype.request,f);return z1.extend(n,kn.prototype,f),z1.extend(n,f),n}var j0=Bu(yb);j0.Axios=kn;j0.create=function(f){return Bu(bb(j0.defaults,f))};j0.Cancel=Pu;j0.CancelToken=lb;j0.isCancel=Cu;j0.all=function(f){return Promise.all(f)};j0.spread=pb;j0.isAxiosError=hb;Sa.exports=j0;Sa.exports.default=j0;var xa=Sa.exports,sa={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,f){(function(){var n,a="4.17.21",i=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",m=500,y="__lodash_placeholder__",g=1,T=2,A=4,S=1,w=2,O=1,k=2,Q=4,$=8,j=16,F=32,J=64,K=128,te=256,ce=512,le=30,Me="...",P=800,N=16,L=1,B=2,H=3,x=1/0,V=9007199254740991,ee=17976931348623157e292,se=0/0,Z=4294967295,de=Z-1,Te=Z>>>1,Ce=[["ary",K],["bind",O],["bindKey",k],["curry",$],["curryRight",j],["flip",ce],["partial",F],["partialRight",J],["rearg",te]],Ae="[object Arguments]",Ye="[object Array]",Ne="[object AsyncFunction]",Xe="[object Boolean]",We="[object Date]",z="[object DOMException]",ne="[object Error]",Ie="[object Function]",Ke="[object GeneratorFunction]",Fe="[object Map]",X="[object Number]",Re="[object Null]",Be="[object Object]",D0="[object Promise]",qt="[object Proxy]",cf="[object RegExp]",$0="[object Set]",df="[object String]",$f="[object Symbol]",jc="[object Undefined]",lf="[object WeakMap]",zc="[object WeakSet]",pf="[object ArrayBuffer]",$t="[object DataView]",Cr="[object Float32Array]",Rr="[object Float64Array]",Or="[object Int8Array]",_r="[object Int16Array]",xr="[object Int32Array]",Dr="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Br="[object Uint16Array]",Mr="[object Uint32Array]",Jc=/\b__p \+= '';/g,Zc=/\b(__p \+=) '' \+/g,e5=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,ui=/[&<>"']/g,t5=RegExp(oi.source),f5=RegExp(ui.source),n5=/<%-([\s\S]+?)%>/g,r5=/<%([\s\S]+?)%>/g,ci=/<%=([\s\S]+?)%>/g,s5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a5=/^\w*$/,i5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kr=/[\\^$.*+?()[\]{}|]/g,o5=RegExp(kr.source),Fr=/^\s+/,u5=/\s/,c5=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,d5=/\{\n\/\* \[wrapped with (.+)\] \*/,l5=/,? & /,p5=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,h5=/[()=,{}\[\]\/\s]/,m5=/\\(\\)?/g,b5=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,di=/\w*$/,y5=/^[-+]0x[0-9a-f]+$/i,g5=/^0b[01]+$/i,v5=/^\[object .+?Constructor\]$/,T5=/^0o[0-7]+$/i,A5=/^(?:0|[1-9]\d*)$/,E5=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wf=/($^)/,I5=/['\n\r\u2028\u2029\\]/g,Vf="\\ud800-\\udfff",S5="\\u0300-\\u036f",w5="\\ufe20-\\ufe2f",C5="\\u20d0-\\u20ff",li=S5+w5+C5,pi="\\u2700-\\u27bf",hi="a-z\\xdf-\\xf6\\xf8-\\xff",R5="\\xac\\xb1\\xd7\\xf7",O5="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_5="\\u2000-\\u206f",x5=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mi="A-Z\\xc0-\\xd6\\xd8-\\xde",bi="\\ufe0e\\ufe0f",yi=R5+O5+_5+x5,Ur="['\u2019]",D5="["+Vf+"]",gi="["+yi+"]",Hf="["+li+"]",vi="\\d+",P5="["+pi+"]",Ti="["+hi+"]",Ai="[^"+Vf+yi+vi+pi+hi+mi+"]",Nr="\\ud83c[\\udffb-\\udfff]",B5="(?:"+Hf+"|"+Nr+")",Ei="[^"+Vf+"]",Lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+mi+"]",Ii="\\u200d",Si="(?:"+Ti+"|"+Ai+")",M5="(?:"+Wt+"|"+Ai+")",wi="(?:"+Ur+"(?:d|ll|m|re|s|t|ve))?",Ci="(?:"+Ur+"(?:D|LL|M|RE|S|T|VE))?",Ri=B5+"?",Oi="["+bi+"]?",k5="(?:"+Ii+"(?:"+[Ei,Lr,Gr].join("|")+")"+Oi+Ri+")*",F5="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",U5="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_i=Oi+Ri+k5,N5="(?:"+[P5,Lr,Gr].join("|")+")"+_i,L5="(?:"+[Ei+Hf+"?",Hf,Lr,Gr,D5].join("|")+")",G5=RegExp(Ur,"g"),q5=RegExp(Hf,"g"),qr=RegExp(Nr+"(?="+Nr+")|"+L5+_i,"g"),$5=RegExp([Wt+"?"+Ti+"+"+wi+"(?="+[gi,Wt,"$"].join("|")+")",M5+"+"+Ci+"(?="+[gi,Wt+Si,"$"].join("|")+")",Wt+"?"+Si+"+"+wi,Wt+"+"+Ci,U5,F5,vi,N5].join("|"),"g"),W5=RegExp("["+Ii+Vf+li+bi+"]"),V5=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,H5=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],K5=-1,je={};je[Cr]=je[Rr]=je[Or]=je[_r]=je[xr]=je[Dr]=je[Pr]=je[Br]=je[Mr]=!0,je[Ae]=je[Ye]=je[pf]=je[Xe]=je[$t]=je[We]=je[ne]=je[Ie]=je[Fe]=je[X]=je[Be]=je[cf]=je[$0]=je[df]=je[lf]=!1;var Qe={};Qe[Ae]=Qe[Ye]=Qe[pf]=Qe[$t]=Qe[Xe]=Qe[We]=Qe[Cr]=Qe[Rr]=Qe[Or]=Qe[_r]=Qe[xr]=Qe[Fe]=Qe[X]=Qe[Be]=Qe[cf]=Qe[$0]=Qe[df]=Qe[$f]=Qe[Dr]=Qe[Pr]=Qe[Br]=Qe[Mr]=!0,Qe[ne]=Qe[Ie]=Qe[lf]=!1;var Q5={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Y5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X5={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},j5={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},z5=parseFloat,J5=parseInt,xi=typeof He=="object"&&He&&He.Object===Object&&He,Z5=typeof self=="object"&&self&&self.Object===Object&&self,c0=xi||Z5||Function("return this")(),$r=f&&!f.nodeType&&f,Ot=$r&&!0&&r&&!r.nodeType&&r,Di=Ot&&Ot.exports===$r,Wr=Di&&xi.process,P0=function(){try{var C=Ot&&Ot.require&&Ot.require("util").types;return C||Wr&&Wr.binding&&Wr.binding("util")}catch{}}(),Pi=P0&&P0.isArrayBuffer,Bi=P0&&P0.isDate,Mi=P0&&P0.isMap,ki=P0&&P0.isRegExp,Fi=P0&&P0.isSet,Ui=P0&&P0.isTypedArray;function S0(C,U,D){switch(D.length){case 0:return C.call(U);case 1:return C.call(U,D[0]);case 2:return C.call(U,D[0],D[1]);case 3:return C.call(U,D[0],D[1],D[2])}return C.apply(U,D)}function e6(C,U,D,re){for(var ve=-1,Ue=C==null?0:C.length;++ve<Ue;){var i0=C[ve];U(re,i0,D(i0),C)}return re}function B0(C,U){for(var D=-1,re=C==null?0:C.length;++D<re&&U(C[D],D,C)!==!1;);return C}function t6(C,U){for(var D=C==null?0:C.length;D--&&U(C[D],D,C)!==!1;);return C}function Ni(C,U){for(var D=-1,re=C==null?0:C.length;++D<re;)if(!U(C[D],D,C))return!1;return!0}function yt(C,U){for(var D=-1,re=C==null?0:C.length,ve=0,Ue=[];++D<re;){var i0=C[D];U(i0,D,C)&&(Ue[ve++]=i0)}return Ue}function Kf(C,U){var D=C==null?0:C.length;return!!D&&Vt(C,U,0)>-1}function Vr(C,U,D){for(var re=-1,ve=C==null?0:C.length;++re<ve;)if(D(U,C[re]))return!0;return!1}function ze(C,U){for(var D=-1,re=C==null?0:C.length,ve=Array(re);++D<re;)ve[D]=U(C[D],D,C);return ve}function gt(C,U){for(var D=-1,re=U.length,ve=C.length;++D<re;)C[ve+D]=U[D];return C}function Hr(C,U,D,re){var ve=-1,Ue=C==null?0:C.length;for(re&&Ue&&(D=C[++ve]);++ve<Ue;)D=U(D,C[ve],ve,C);return D}function f6(C,U,D,re){var ve=C==null?0:C.length;for(re&&ve&&(D=C[--ve]);ve--;)D=U(D,C[ve],ve,C);return D}function Kr(C,U){for(var D=-1,re=C==null?0:C.length;++D<re;)if(U(C[D],D,C))return!0;return!1}var n6=Qr("length");function r6(C){return C.split("")}function s6(C){return C.match(p5)||[]}function Li(C,U,D){var re;return D(C,function(ve,Ue,i0){if(U(ve,Ue,i0))return re=Ue,!1}),re}function Qf(C,U,D,re){for(var ve=C.length,Ue=D+(re?1:-1);re?Ue--:++Ue<ve;)if(U(C[Ue],Ue,C))return Ue;return-1}function Vt(C,U,D){return U===U?y6(C,U,D):Qf(C,Gi,D)}function a6(C,U,D,re){for(var ve=D-1,Ue=C.length;++ve<Ue;)if(re(C[ve],U))return ve;return-1}function Gi(C){return C!==C}function qi(C,U){var D=C==null?0:C.length;return D?Xr(C,U)/D:se}function Qr(C){return function(U){return U==null?n:U[C]}}function Yr(C){return function(U){return C==null?n:C[U]}}function $i(C,U,D,re,ve){return ve(C,function(Ue,i0,Ve){D=re?(re=!1,Ue):U(D,Ue,i0,Ve)}),D}function i6(C,U){var D=C.length;for(C.sort(U);D--;)C[D]=C[D].value;return C}function Xr(C,U){for(var D,re=-1,ve=C.length;++re<ve;){var Ue=U(C[re]);Ue!==n&&(D=D===n?Ue:D+Ue)}return D}function jr(C,U){for(var D=-1,re=Array(C);++D<C;)re[D]=U(D);return re}function o6(C,U){return ze(U,function(D){return[D,C[D]]})}function Wi(C){return C&&C.slice(0,Qi(C)+1).replace(Fr,"")}function w0(C){return function(U){return C(U)}}function zr(C,U){return ze(U,function(D){return C[D]})}function hf(C,U){return C.has(U)}function Vi(C,U){for(var D=-1,re=C.length;++D<re&&Vt(U,C[D],0)>-1;);return D}function Hi(C,U){for(var D=C.length;D--&&Vt(U,C[D],0)>-1;);return D}function u6(C,U){for(var D=C.length,re=0;D--;)C[D]===U&&++re;return re}var c6=Yr(Q5),d6=Yr(Y5);function l6(C){return"\\"+j5[C]}function p6(C,U){return C==null?n:C[U]}function Ht(C){return W5.test(C)}function h6(C){return V5.test(C)}function m6(C){for(var U,D=[];!(U=C.next()).done;)D.push(U.value);return D}function Jr(C){var U=-1,D=Array(C.size);return C.forEach(function(re,ve){D[++U]=[ve,re]}),D}function Ki(C,U){return function(D){return C(U(D))}}function vt(C,U){for(var D=-1,re=C.length,ve=0,Ue=[];++D<re;){var i0=C[D];(i0===U||i0===y)&&(C[D]=y,Ue[ve++]=D)}return Ue}function Yf(C){var U=-1,D=Array(C.size);return C.forEach(function(re){D[++U]=re}),D}function b6(C){var U=-1,D=Array(C.size);return C.forEach(function(re){D[++U]=[re,re]}),D}function y6(C,U,D){for(var re=D-1,ve=C.length;++re<ve;)if(C[re]===U)return re;return-1}function g6(C,U,D){for(var re=D+1;re--;)if(C[re]===U)return re;return re}function Kt(C){return Ht(C)?T6(C):n6(C)}function W0(C){return Ht(C)?A6(C):r6(C)}function Qi(C){for(var U=C.length;U--&&u5.test(C.charAt(U)););return U}var v6=Yr(X5);function T6(C){for(var U=qr.lastIndex=0;qr.test(C);)++U;return U}function A6(C){return C.match(qr)||[]}function E6(C){return C.match($5)||[]}var I6=function C(U){U=U==null?c0:Qt.defaults(c0.Object(),U,Qt.pick(c0,H5));var D=U.Array,re=U.Date,ve=U.Error,Ue=U.Function,i0=U.Math,Ve=U.Object,Zr=U.RegExp,S6=U.String,M0=U.TypeError,Xf=D.prototype,w6=Ue.prototype,Yt=Ve.prototype,jf=U["__core-js_shared__"],zf=w6.toString,Ge=Yt.hasOwnProperty,C6=0,Yi=function(){var e=/[^.]+$/.exec(jf&&jf.keys&&jf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jf=Yt.toString,R6=zf.call(Ve),O6=c0._,_6=Zr("^"+zf.call(Ge).replace(kr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zf=Di?U.Buffer:n,Tt=U.Symbol,en=U.Uint8Array,Xi=Zf?Zf.allocUnsafe:n,tn=Ki(Ve.getPrototypeOf,Ve),ji=Ve.create,zi=Yt.propertyIsEnumerable,fn=Xf.splice,Ji=Tt?Tt.isConcatSpreadable:n,mf=Tt?Tt.iterator:n,_t=Tt?Tt.toStringTag:n,nn=function(){try{var e=Mt(Ve,"defineProperty");return e({},"",{}),e}catch{}}(),x6=U.clearTimeout!==c0.clearTimeout&&U.clearTimeout,D6=re&&re.now!==c0.Date.now&&re.now,P6=U.setTimeout!==c0.setTimeout&&U.setTimeout,rn=i0.ceil,sn=i0.floor,es=Ve.getOwnPropertySymbols,B6=Zf?Zf.isBuffer:n,Zi=U.isFinite,M6=Xf.join,k6=Ki(Ve.keys,Ve),o0=i0.max,p0=i0.min,F6=re.now,U6=U.parseInt,eo=i0.random,N6=Xf.reverse,ts=Mt(U,"DataView"),bf=Mt(U,"Map"),fs=Mt(U,"Promise"),Xt=Mt(U,"Set"),yf=Mt(U,"WeakMap"),gf=Mt(Ve,"create"),an=yf&&new yf,jt={},L6=kt(ts),G6=kt(bf),q6=kt(fs),$6=kt(Xt),W6=kt(yf),on=Tt?Tt.prototype:n,vf=on?on.valueOf:n,to=on?on.toString:n;function b(e){if(t0(e)&&!Ee(e)&&!(e instanceof xe)){if(e instanceof k0)return e;if(Ge.call(e,"__wrapped__"))return n1(e)}return new k0(e)}var zt=function(){function e(){}return function(t){if(!Je(t))return{};if(ji)return ji(t);e.prototype=t;var s=new e;return e.prototype=n,s}}();function un(){}function k0(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}b.templateSettings={escape:n5,evaluate:r5,interpolate:ci,variable:"",imports:{_:b}},b.prototype=un.prototype,b.prototype.constructor=b,k0.prototype=zt(un.prototype),k0.prototype.constructor=k0;function xe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function V6(){var e=new xe(this.__wrapped__);return e.__actions__=T0(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=T0(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=T0(this.__views__),e}function H6(){if(this.__filtered__){var e=new xe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function K6(){var e=this.__wrapped__.value(),t=this.__dir__,s=Ee(e),o=t<0,h=s?e.length:0,v=rl(0,h,this.__views__),E=v.start,I=v.end,R=I-E,G=o?I:E-1,q=this.__iteratees__,Y=q.length,fe=0,ue=p0(R,this.__takeCount__);if(!s||!o&&h==R&&ue==R)return Co(e,this.__actions__);var me=[];e:for(;R--&&fe<ue;){G+=t;for(var we=-1,be=e[G];++we<Y;){var _e=q[we],Pe=_e.iteratee,O0=_e.type,v0=Pe(be);if(O0==B)be=v0;else if(!v0){if(O0==L)continue e;break e}}me[fe++]=be}return me}xe.prototype=zt(un.prototype),xe.prototype.constructor=xe;function xt(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function Q6(){this.__data__=gf?gf(null):{},this.size=0}function Y6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function X6(e){var t=this.__data__;if(gf){var s=t[e];return s===u?n:s}return Ge.call(t,e)?t[e]:n}function j6(e){var t=this.__data__;return gf?t[e]!==n:Ge.call(t,e)}function z6(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=gf&&t===n?u:t,this}xt.prototype.clear=Q6,xt.prototype.delete=Y6,xt.prototype.get=X6,xt.prototype.has=j6,xt.prototype.set=z6;function rt(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function J6(){this.__data__=[],this.size=0}function Z6(e){var t=this.__data__,s=cn(t,e);if(s<0)return!1;var o=t.length-1;return s==o?t.pop():fn.call(t,s,1),--this.size,!0}function ed(e){var t=this.__data__,s=cn(t,e);return s<0?n:t[s][1]}function td(e){return cn(this.__data__,e)>-1}function fd(e,t){var s=this.__data__,o=cn(s,e);return o<0?(++this.size,s.push([e,t])):s[o][1]=t,this}rt.prototype.clear=J6,rt.prototype.delete=Z6,rt.prototype.get=ed,rt.prototype.has=td,rt.prototype.set=fd;function st(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function nd(){this.size=0,this.__data__={hash:new xt,map:new(bf||rt),string:new xt}}function rd(e){var t=En(this,e).delete(e);return this.size-=t?1:0,t}function sd(e){return En(this,e).get(e)}function ad(e){return En(this,e).has(e)}function id(e,t){var s=En(this,e),o=s.size;return s.set(e,t),this.size+=s.size==o?0:1,this}st.prototype.clear=nd,st.prototype.delete=rd,st.prototype.get=sd,st.prototype.has=ad,st.prototype.set=id;function Dt(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new st;++t<s;)this.add(e[t])}function od(e){return this.__data__.set(e,u),this}function ud(e){return this.__data__.has(e)}Dt.prototype.add=Dt.prototype.push=od,Dt.prototype.has=ud;function V0(e){var t=this.__data__=new rt(e);this.size=t.size}function cd(){this.__data__=new rt,this.size=0}function dd(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function ld(e){return this.__data__.get(e)}function pd(e){return this.__data__.has(e)}function hd(e,t){var s=this.__data__;if(s instanceof rt){var o=s.__data__;if(!bf||o.length<i-1)return o.push([e,t]),this.size=++s.size,this;s=this.__data__=new st(o)}return s.set(e,t),this.size=s.size,this}V0.prototype.clear=cd,V0.prototype.delete=dd,V0.prototype.get=ld,V0.prototype.has=pd,V0.prototype.set=hd;function fo(e,t){var s=Ee(e),o=!s&&Ft(e),h=!s&&!o&&wt(e),v=!s&&!o&&!h&&tf(e),E=s||o||h||v,I=E?jr(e.length,S6):[],R=I.length;for(var G in e)(t||Ge.call(e,G))&&!(E&&(G=="length"||h&&(G=="offset"||G=="parent")||v&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||ut(G,R)))&&I.push(G);return I}function no(e){var t=e.length;return t?e[ps(0,t-1)]:n}function md(e,t){return In(T0(e),Pt(t,0,e.length))}function bd(e){return In(T0(e))}function ns(e,t,s){(s!==n&&!H0(e[t],s)||s===n&&!(t in e))&&at(e,t,s)}function Tf(e,t,s){var o=e[t];(!(Ge.call(e,t)&&H0(o,s))||s===n&&!(t in e))&&at(e,t,s)}function cn(e,t){for(var s=e.length;s--;)if(H0(e[s][0],t))return s;return-1}function yd(e,t,s,o){return At(e,function(h,v,E){t(o,h,s(h),E)}),o}function ro(e,t){return e&&Z0(t,u0(t),e)}function gd(e,t){return e&&Z0(t,E0(t),e)}function at(e,t,s){t=="__proto__"&&nn?nn(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function rs(e,t){for(var s=-1,o=t.length,h=D(o),v=e==null;++s<o;)h[s]=v?n:Ns(e,t[s]);return h}function Pt(e,t,s){return e===e&&(s!==n&&(e=e<=s?e:s),t!==n&&(e=e>=t?e:t)),e}function F0(e,t,s,o,h,v){var E,I=t&g,R=t&T,G=t&A;if(s&&(E=h?s(e,o,h,v):s(e)),E!==n)return E;if(!Je(e))return e;var q=Ee(e);if(q){if(E=al(e),!I)return T0(e,E)}else{var Y=h0(e),fe=Y==Ie||Y==Ke;if(wt(e))return _o(e,I);if(Y==Be||Y==Ae||fe&&!h){if(E=R||fe?{}:Yo(e),!I)return R?Xd(e,gd(E,e)):Yd(e,ro(E,e))}else{if(!Qe[Y])return h?e:{};E=il(e,Y,I)}}v||(v=new V0);var ue=v.get(e);if(ue)return ue;v.set(e,E),I1(e)?e.forEach(function(be){E.add(F0(be,t,s,be,e,v))}):A1(e)&&e.forEach(function(be,_e){E.set(_e,F0(be,t,s,_e,e,v))});var me=G?R?Ss:Is:R?E0:u0,we=q?n:me(e);return B0(we||e,function(be,_e){we&&(_e=be,be=e[_e]),Tf(E,_e,F0(be,t,s,_e,e,v))}),E}function vd(e){var t=u0(e);return function(s){return so(s,e,t)}}function so(e,t,s){var o=s.length;if(e==null)return!o;for(e=Ve(e);o--;){var h=s[o],v=t[h],E=e[h];if(E===n&&!(h in e)||!v(E))return!1}return!0}function ao(e,t,s){if(typeof e!="function")throw new M0(l);return Rf(function(){e.apply(n,s)},t)}function Af(e,t,s,o){var h=-1,v=Kf,E=!0,I=e.length,R=[],G=t.length;if(!I)return R;s&&(t=ze(t,w0(s))),o?(v=Vr,E=!1):t.length>=i&&(v=hf,E=!1,t=new Dt(t));e:for(;++h<I;){var q=e[h],Y=s==null?q:s(q);if(q=o||q!==0?q:0,E&&Y===Y){for(var fe=G;fe--;)if(t[fe]===Y)continue e;R.push(q)}else v(t,Y,o)||R.push(q)}return R}var At=Mo(J0),io=Mo(as,!0);function Td(e,t){var s=!0;return At(e,function(o,h,v){return s=!!t(o,h,v),s}),s}function dn(e,t,s){for(var o=-1,h=e.length;++o<h;){var v=e[o],E=t(v);if(E!=null&&(I===n?E===E&&!R0(E):s(E,I)))var I=E,R=v}return R}function Ad(e,t,s,o){var h=e.length;for(s=Se(s),s<0&&(s=-s>h?0:h+s),o=o===n||o>h?h:Se(o),o<0&&(o+=h),o=s>o?0:w1(o);s<o;)e[s++]=t;return e}function oo(e,t){var s=[];return At(e,function(o,h,v){t(o,h,v)&&s.push(o)}),s}function d0(e,t,s,o,h){var v=-1,E=e.length;for(s||(s=ul),h||(h=[]);++v<E;){var I=e[v];t>0&&s(I)?t>1?d0(I,t-1,s,o,h):gt(h,I):o||(h[h.length]=I)}return h}var ss=ko(),uo=ko(!0);function J0(e,t){return e&&ss(e,t,u0)}function as(e,t){return e&&uo(e,t,u0)}function ln(e,t){return yt(t,function(s){return ct(e[s])})}function Bt(e,t){t=It(t,e);for(var s=0,o=t.length;e!=null&&s<o;)e=e[et(t[s++])];return s&&s==o?e:n}function co(e,t,s){var o=t(e);return Ee(e)?o:gt(o,s(e))}function y0(e){return e==null?e===n?jc:Re:_t&&_t in Ve(e)?nl(e):bl(e)}function is(e,t){return e>t}function Ed(e,t){return e!=null&&Ge.call(e,t)}function Id(e,t){return e!=null&&t in Ve(e)}function Sd(e,t,s){return e>=p0(t,s)&&e<o0(t,s)}function os(e,t,s){for(var o=s?Vr:Kf,h=e[0].length,v=e.length,E=v,I=D(v),R=1/0,G=[];E--;){var q=e[E];E&&t&&(q=ze(q,w0(t))),R=p0(q.length,R),I[E]=!s&&(t||h>=120&&q.length>=120)?new Dt(E&&q):n}q=e[0];var Y=-1,fe=I[0];e:for(;++Y<h&&G.length<R;){var ue=q[Y],me=t?t(ue):ue;if(ue=s||ue!==0?ue:0,!(fe?hf(fe,me):o(G,me,s))){for(E=v;--E;){var we=I[E];if(!(we?hf(we,me):o(e[E],me,s)))continue e}fe&&fe.push(me),G.push(ue)}}return G}function wd(e,t,s,o){return J0(e,function(h,v,E){t(o,s(h),v,E)}),o}function Ef(e,t,s){t=It(t,e),e=Jo(e,t);var o=e==null?e:e[et(N0(t))];return o==null?n:S0(o,e,s)}function lo(e){return t0(e)&&y0(e)==Ae}function Cd(e){return t0(e)&&y0(e)==pf}function Rd(e){return t0(e)&&y0(e)==We}function If(e,t,s,o,h){return e===t?!0:e==null||t==null||!t0(e)&&!t0(t)?e!==e&&t!==t:Od(e,t,s,o,If,h)}function Od(e,t,s,o,h,v){var E=Ee(e),I=Ee(t),R=E?Ye:h0(e),G=I?Ye:h0(t);R=R==Ae?Be:R,G=G==Ae?Be:G;var q=R==Be,Y=G==Be,fe=R==G;if(fe&&wt(e)){if(!wt(t))return!1;E=!0,q=!1}if(fe&&!q)return v||(v=new V0),E||tf(e)?Ho(e,t,s,o,h,v):tl(e,t,R,s,o,h,v);if(!(s&S)){var ue=q&&Ge.call(e,"__wrapped__"),me=Y&&Ge.call(t,"__wrapped__");if(ue||me){var we=ue?e.value():e,be=me?t.value():t;return v||(v=new V0),h(we,be,s,o,v)}}return fe?(v||(v=new V0),fl(e,t,s,o,h,v)):!1}function _d(e){return t0(e)&&h0(e)==Fe}function us(e,t,s,o){var h=s.length,v=h,E=!o;if(e==null)return!v;for(e=Ve(e);h--;){var I=s[h];if(E&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++h<v;){I=s[h];var R=I[0],G=e[R],q=I[1];if(E&&I[2]){if(G===n&&!(R in e))return!1}else{var Y=new V0;if(o)var fe=o(G,q,R,e,t,Y);if(!(fe===n?If(q,G,S|w,o,Y):fe))return!1}}return!0}function po(e){if(!Je(e)||dl(e))return!1;var t=ct(e)?_6:v5;return t.test(kt(e))}function xd(e){return t0(e)&&y0(e)==cf}function Dd(e){return t0(e)&&h0(e)==$0}function Pd(e){return t0(e)&&_n(e.length)&&!!je[y0(e)]}function ho(e){return typeof e=="function"?e:e==null?I0:typeof e=="object"?Ee(e)?yo(e[0],e[1]):bo(e):F1(e)}function cs(e){if(!Cf(e))return k6(e);var t=[];for(var s in Ve(e))Ge.call(e,s)&&s!="constructor"&&t.push(s);return t}function Bd(e){if(!Je(e))return ml(e);var t=Cf(e),s=[];for(var o in e)o=="constructor"&&(t||!Ge.call(e,o))||s.push(o);return s}function ds(e,t){return e<t}function mo(e,t){var s=-1,o=A0(e)?D(e.length):[];return At(e,function(h,v,E){o[++s]=t(h,v,E)}),o}function bo(e){var t=Cs(e);return t.length==1&&t[0][2]?jo(t[0][0],t[0][1]):function(s){return s===e||us(s,e,t)}}function yo(e,t){return Os(e)&&Xo(t)?jo(et(e),t):function(s){var o=Ns(s,e);return o===n&&o===t?Ls(s,e):If(t,o,S|w)}}function pn(e,t,s,o,h){e!==t&&ss(t,function(v,E){if(h||(h=new V0),Je(v))Md(e,t,E,s,pn,o,h);else{var I=o?o(xs(e,E),v,E+"",e,t,h):n;I===n&&(I=v),ns(e,E,I)}},E0)}function Md(e,t,s,o,h,v,E){var I=xs(e,s),R=xs(t,s),G=E.get(R);if(G){ns(e,s,G);return}var q=v?v(I,R,s+"",e,t,E):n,Y=q===n;if(Y){var fe=Ee(R),ue=!fe&&wt(R),me=!fe&&!ue&&tf(R);q=R,fe||ue||me?Ee(I)?q=I:f0(I)?q=T0(I):ue?(Y=!1,q=_o(R,!0)):me?(Y=!1,q=xo(R,!0)):q=[]:Of(R)||Ft(R)?(q=I,Ft(I)?q=C1(I):(!Je(I)||ct(I))&&(q=Yo(R))):Y=!1}Y&&(E.set(R,q),h(q,R,o,v,E),E.delete(R)),ns(e,s,q)}function go(e,t){var s=e.length;if(!!s)return t+=t<0?s:0,ut(t,s)?e[t]:n}function vo(e,t,s){t.length?t=ze(t,function(v){return Ee(v)?function(E){return Bt(E,v.length===1?v[0]:v)}:v}):t=[I0];var o=-1;t=ze(t,w0(pe()));var h=mo(e,function(v,E,I){var R=ze(t,function(G){return G(v)});return{criteria:R,index:++o,value:v}});return i6(h,function(v,E){return Qd(v,E,s)})}function kd(e,t){return To(e,t,function(s,o){return Ls(e,o)})}function To(e,t,s){for(var o=-1,h=t.length,v={};++o<h;){var E=t[o],I=Bt(e,E);s(I,E)&&Sf(v,It(E,e),I)}return v}function Fd(e){return function(t){return Bt(t,e)}}function ls(e,t,s,o){var h=o?a6:Vt,v=-1,E=t.length,I=e;for(e===t&&(t=T0(t)),s&&(I=ze(e,w0(s)));++v<E;)for(var R=0,G=t[v],q=s?s(G):G;(R=h(I,q,R,o))>-1;)I!==e&&fn.call(I,R,1),fn.call(e,R,1);return e}function Ao(e,t){for(var s=e?t.length:0,o=s-1;s--;){var h=t[s];if(s==o||h!==v){var v=h;ut(h)?fn.call(e,h,1):bs(e,h)}}return e}function ps(e,t){return e+sn(eo()*(t-e+1))}function Ud(e,t,s,o){for(var h=-1,v=o0(rn((t-e)/(s||1)),0),E=D(v);v--;)E[o?v:++h]=e,e+=s;return E}function hs(e,t){var s="";if(!e||t<1||t>V)return s;do t%2&&(s+=e),t=sn(t/2),t&&(e+=e);while(t);return s}function Oe(e,t){return Ds(zo(e,t,I0),e+"")}function Nd(e){return no(ff(e))}function Ld(e,t){var s=ff(e);return In(s,Pt(t,0,s.length))}function Sf(e,t,s,o){if(!Je(e))return e;t=It(t,e);for(var h=-1,v=t.length,E=v-1,I=e;I!=null&&++h<v;){var R=et(t[h]),G=s;if(R==="__proto__"||R==="constructor"||R==="prototype")return e;if(h!=E){var q=I[R];G=o?o(q,R,I):n,G===n&&(G=Je(q)?q:ut(t[h+1])?[]:{})}Tf(I,R,G),I=I[R]}return e}var Eo=an?function(e,t){return an.set(e,t),e}:I0,Gd=nn?function(e,t){return nn(e,"toString",{configurable:!0,enumerable:!1,value:qs(t),writable:!0})}:I0;function qd(e){return In(ff(e))}function U0(e,t,s){var o=-1,h=e.length;t<0&&(t=-t>h?0:h+t),s=s>h?h:s,s<0&&(s+=h),h=t>s?0:s-t>>>0,t>>>=0;for(var v=D(h);++o<h;)v[o]=e[o+t];return v}function $d(e,t){var s;return At(e,function(o,h,v){return s=t(o,h,v),!s}),!!s}function hn(e,t,s){var o=0,h=e==null?o:e.length;if(typeof t=="number"&&t===t&&h<=Te){for(;o<h;){var v=o+h>>>1,E=e[v];E!==null&&!R0(E)&&(s?E<=t:E<t)?o=v+1:h=v}return h}return ms(e,t,I0,s)}function ms(e,t,s,o){var h=0,v=e==null?0:e.length;if(v===0)return 0;t=s(t);for(var E=t!==t,I=t===null,R=R0(t),G=t===n;h<v;){var q=sn((h+v)/2),Y=s(e[q]),fe=Y!==n,ue=Y===null,me=Y===Y,we=R0(Y);if(E)var be=o||me;else G?be=me&&(o||fe):I?be=me&&fe&&(o||!ue):R?be=me&&fe&&!ue&&(o||!we):ue||we?be=!1:be=o?Y<=t:Y<t;be?h=q+1:v=q}return p0(v,de)}function Io(e,t){for(var s=-1,o=e.length,h=0,v=[];++s<o;){var E=e[s],I=t?t(E):E;if(!s||!H0(I,R)){var R=I;v[h++]=E===0?0:E}}return v}function So(e){return typeof e=="number"?e:R0(e)?se:+e}function C0(e){if(typeof e=="string")return e;if(Ee(e))return ze(e,C0)+"";if(R0(e))return to?to.call(e):"";var t=e+"";return t=="0"&&1/e==-x?"-0":t}function Et(e,t,s){var o=-1,h=Kf,v=e.length,E=!0,I=[],R=I;if(s)E=!1,h=Vr;else if(v>=i){var G=t?null:Zd(e);if(G)return Yf(G);E=!1,h=hf,R=new Dt}else R=t?[]:I;e:for(;++o<v;){var q=e[o],Y=t?t(q):q;if(q=s||q!==0?q:0,E&&Y===Y){for(var fe=R.length;fe--;)if(R[fe]===Y)continue e;t&&R.push(Y),I.push(q)}else h(R,Y,s)||(R!==I&&R.push(Y),I.push(q))}return I}function bs(e,t){return t=It(t,e),e=Jo(e,t),e==null||delete e[et(N0(t))]}function wo(e,t,s,o){return Sf(e,t,s(Bt(e,t)),o)}function mn(e,t,s,o){for(var h=e.length,v=o?h:-1;(o?v--:++v<h)&&t(e[v],v,e););return s?U0(e,o?0:v,o?v+1:h):U0(e,o?v+1:0,o?h:v)}function Co(e,t){var s=e;return s instanceof xe&&(s=s.value()),Hr(t,function(o,h){return h.func.apply(h.thisArg,gt([o],h.args))},s)}function ys(e,t,s){var o=e.length;if(o<2)return o?Et(e[0]):[];for(var h=-1,v=D(o);++h<o;)for(var E=e[h],I=-1;++I<o;)I!=h&&(v[h]=Af(v[h]||E,e[I],t,s));return Et(d0(v,1),t,s)}function Ro(e,t,s){for(var o=-1,h=e.length,v=t.length,E={};++o<h;){var I=o<v?t[o]:n;s(E,e[o],I)}return E}function gs(e){return f0(e)?e:[]}function vs(e){return typeof e=="function"?e:I0}function It(e,t){return Ee(e)?e:Os(e,t)?[e]:f1(Le(e))}var Wd=Oe;function St(e,t,s){var o=e.length;return s=s===n?o:s,!t&&s>=o?e:U0(e,t,s)}var Oo=x6||function(e){return c0.clearTimeout(e)};function _o(e,t){if(t)return e.slice();var s=e.length,o=Xi?Xi(s):new e.constructor(s);return e.copy(o),o}function Ts(e){var t=new e.constructor(e.byteLength);return new en(t).set(new en(e)),t}function Vd(e,t){var s=t?Ts(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Hd(e){var t=new e.constructor(e.source,di.exec(e));return t.lastIndex=e.lastIndex,t}function Kd(e){return vf?Ve(vf.call(e)):{}}function xo(e,t){var s=t?Ts(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function Do(e,t){if(e!==t){var s=e!==n,o=e===null,h=e===e,v=R0(e),E=t!==n,I=t===null,R=t===t,G=R0(t);if(!I&&!G&&!v&&e>t||v&&E&&R&&!I&&!G||o&&E&&R||!s&&R||!h)return 1;if(!o&&!v&&!G&&e<t||G&&s&&h&&!o&&!v||I&&s&&h||!E&&h||!R)return-1}return 0}function Qd(e,t,s){for(var o=-1,h=e.criteria,v=t.criteria,E=h.length,I=s.length;++o<E;){var R=Do(h[o],v[o]);if(R){if(o>=I)return R;var G=s[o];return R*(G=="desc"?-1:1)}}return e.index-t.index}function Po(e,t,s,o){for(var h=-1,v=e.length,E=s.length,I=-1,R=t.length,G=o0(v-E,0),q=D(R+G),Y=!o;++I<R;)q[I]=t[I];for(;++h<E;)(Y||h<v)&&(q[s[h]]=e[h]);for(;G--;)q[I++]=e[h++];return q}function Bo(e,t,s,o){for(var h=-1,v=e.length,E=-1,I=s.length,R=-1,G=t.length,q=o0(v-I,0),Y=D(q+G),fe=!o;++h<q;)Y[h]=e[h];for(var ue=h;++R<G;)Y[ue+R]=t[R];for(;++E<I;)(fe||h<v)&&(Y[ue+s[E]]=e[h++]);return Y}function T0(e,t){var s=-1,o=e.length;for(t||(t=D(o));++s<o;)t[s]=e[s];return t}function Z0(e,t,s,o){var h=!s;s||(s={});for(var v=-1,E=t.length;++v<E;){var I=t[v],R=o?o(s[I],e[I],I,s,e):n;R===n&&(R=e[I]),h?at(s,I,R):Tf(s,I,R)}return s}function Yd(e,t){return Z0(e,Rs(e),t)}function Xd(e,t){return Z0(e,Ko(e),t)}function bn(e,t){return function(s,o){var h=Ee(s)?e6:yd,v=t?t():{};return h(s,e,pe(o,2),v)}}function Jt(e){return Oe(function(t,s){var o=-1,h=s.length,v=h>1?s[h-1]:n,E=h>2?s[2]:n;for(v=e.length>3&&typeof v=="function"?(h--,v):n,E&&g0(s[0],s[1],E)&&(v=h<3?n:v,h=1),t=Ve(t);++o<h;){var I=s[o];I&&e(t,I,o,v)}return t})}function Mo(e,t){return function(s,o){if(s==null)return s;if(!A0(s))return e(s,o);for(var h=s.length,v=t?h:-1,E=Ve(s);(t?v--:++v<h)&&o(E[v],v,E)!==!1;);return s}}function ko(e){return function(t,s,o){for(var h=-1,v=Ve(t),E=o(t),I=E.length;I--;){var R=E[e?I:++h];if(s(v[R],R,v)===!1)break}return t}}function jd(e,t,s){var o=t&O,h=wf(e);function v(){var E=this&&this!==c0&&this instanceof v?h:e;return E.apply(o?s:this,arguments)}return v}function Fo(e){return function(t){t=Le(t);var s=Ht(t)?W0(t):n,o=s?s[0]:t.charAt(0),h=s?St(s,1).join(""):t.slice(1);return o[e]()+h}}function Zt(e){return function(t){return Hr(M1(B1(t).replace(G5,"")),e,"")}}function wf(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=zt(e.prototype),o=e.apply(s,t);return Je(o)?o:s}}function zd(e,t,s){var o=wf(e);function h(){for(var v=arguments.length,E=D(v),I=v,R=ef(h);I--;)E[I]=arguments[I];var G=v<3&&E[0]!==R&&E[v-1]!==R?[]:vt(E,R);if(v-=G.length,v<s)return qo(e,t,yn,h.placeholder,n,E,G,n,n,s-v);var q=this&&this!==c0&&this instanceof h?o:e;return S0(q,this,E)}return h}function Uo(e){return function(t,s,o){var h=Ve(t);if(!A0(t)){var v=pe(s,3);t=u0(t),s=function(I){return v(h[I],I,h)}}var E=e(t,s,o);return E>-1?h[v?t[E]:E]:n}}function No(e){return ot(function(t){var s=t.length,o=s,h=k0.prototype.thru;for(e&&t.reverse();o--;){var v=t[o];if(typeof v!="function")throw new M0(l);if(h&&!E&&An(v)=="wrapper")var E=new k0([],!0)}for(o=E?o:s;++o<s;){v=t[o];var I=An(v),R=I=="wrapper"?ws(v):n;R&&_s(R[0])&&R[1]==(K|$|F|te)&&!R[4].length&&R[9]==1?E=E[An(R[0])].apply(E,R[3]):E=v.length==1&&_s(v)?E[I]():E.thru(v)}return function(){var G=arguments,q=G[0];if(E&&G.length==1&&Ee(q))return E.plant(q).value();for(var Y=0,fe=s?t[Y].apply(this,G):q;++Y<s;)fe=t[Y].call(this,fe);return fe}})}function yn(e,t,s,o,h,v,E,I,R,G){var q=t&K,Y=t&O,fe=t&k,ue=t&($|j),me=t&ce,we=fe?n:wf(e);function be(){for(var _e=arguments.length,Pe=D(_e),O0=_e;O0--;)Pe[O0]=arguments[O0];if(ue)var v0=ef(be),_0=u6(Pe,v0);if(o&&(Pe=Po(Pe,o,h,ue)),v&&(Pe=Bo(Pe,v,E,ue)),_e-=_0,ue&&_e<G){var n0=vt(Pe,v0);return qo(e,t,yn,be.placeholder,s,Pe,n0,I,R,G-_e)}var K0=Y?s:this,lt=fe?K0[e]:e;return _e=Pe.length,I?Pe=yl(Pe,I):me&&_e>1&&Pe.reverse(),q&&R<_e&&(Pe.length=R),this&&this!==c0&&this instanceof be&&(lt=we||wf(lt)),lt.apply(K0,Pe)}return be}function Lo(e,t){return function(s,o){return wd(s,e,t(o),{})}}function gn(e,t){return function(s,o){var h;if(s===n&&o===n)return t;if(s!==n&&(h=s),o!==n){if(h===n)return o;typeof s=="string"||typeof o=="string"?(s=C0(s),o=C0(o)):(s=So(s),o=So(o)),h=e(s,o)}return h}}function As(e){return ot(function(t){return t=ze(t,w0(pe())),Oe(function(s){var o=this;return e(t,function(h){return S0(h,o,s)})})})}function vn(e,t){t=t===n?" ":C0(t);var s=t.length;if(s<2)return s?hs(t,e):t;var o=hs(t,rn(e/Kt(t)));return Ht(t)?St(W0(o),0,e).join(""):o.slice(0,e)}function Jd(e,t,s,o){var h=t&O,v=wf(e);function E(){for(var I=-1,R=arguments.length,G=-1,q=o.length,Y=D(q+R),fe=this&&this!==c0&&this instanceof E?v:e;++G<q;)Y[G]=o[G];for(;R--;)Y[G++]=arguments[++I];return S0(fe,h?s:this,Y)}return E}function Go(e){return function(t,s,o){return o&&typeof o!="number"&&g0(t,s,o)&&(s=o=n),t=dt(t),s===n?(s=t,t=0):s=dt(s),o=o===n?t<s?1:-1:dt(o),Ud(t,s,o,e)}}function Tn(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=L0(t),s=L0(s)),e(t,s)}}function qo(e,t,s,o,h,v,E,I,R,G){var q=t&$,Y=q?E:n,fe=q?n:E,ue=q?v:n,me=q?n:v;t|=q?F:J,t&=~(q?J:F),t&Q||(t&=~(O|k));var we=[e,t,h,ue,Y,me,fe,I,R,G],be=s.apply(n,we);return _s(e)&&Zo(be,we),be.placeholder=o,e1(be,e,t)}function Es(e){var t=i0[e];return function(s,o){if(s=L0(s),o=o==null?0:p0(Se(o),292),o&&Zi(s)){var h=(Le(s)+"e").split("e"),v=t(h[0]+"e"+(+h[1]+o));return h=(Le(v)+"e").split("e"),+(h[0]+"e"+(+h[1]-o))}return t(s)}}var Zd=Xt&&1/Yf(new Xt([,-0]))[1]==x?function(e){return new Xt(e)}:Vs;function $o(e){return function(t){var s=h0(t);return s==Fe?Jr(t):s==$0?b6(t):o6(t,e(t))}}function it(e,t,s,o,h,v,E,I){var R=t&k;if(!R&&typeof e!="function")throw new M0(l);var G=o?o.length:0;if(G||(t&=~(F|J),o=h=n),E=E===n?E:o0(Se(E),0),I=I===n?I:Se(I),G-=h?h.length:0,t&J){var q=o,Y=h;o=h=n}var fe=R?n:ws(e),ue=[e,t,s,o,h,q,Y,v,E,I];if(fe&&hl(ue,fe),e=ue[0],t=ue[1],s=ue[2],o=ue[3],h=ue[4],I=ue[9]=ue[9]===n?R?0:e.length:o0(ue[9]-G,0),!I&&t&($|j)&&(t&=~($|j)),!t||t==O)var me=jd(e,t,s);else t==$||t==j?me=zd(e,t,I):(t==F||t==(O|F))&&!h.length?me=Jd(e,t,s,o):me=yn.apply(n,ue);var we=fe?Eo:Zo;return e1(we(me,ue),e,t)}function Wo(e,t,s,o){return e===n||H0(e,Yt[s])&&!Ge.call(o,s)?t:e}function Vo(e,t,s,o,h,v){return Je(e)&&Je(t)&&(v.set(t,e),pn(e,t,n,Vo,v),v.delete(t)),e}function el(e){return Of(e)?n:e}function Ho(e,t,s,o,h,v){var E=s&S,I=e.length,R=t.length;if(I!=R&&!(E&&R>I))return!1;var G=v.get(e),q=v.get(t);if(G&&q)return G==t&&q==e;var Y=-1,fe=!0,ue=s&w?new Dt:n;for(v.set(e,t),v.set(t,e);++Y<I;){var me=e[Y],we=t[Y];if(o)var be=E?o(we,me,Y,t,e,v):o(me,we,Y,e,t,v);if(be!==n){if(be)continue;fe=!1;break}if(ue){if(!Kr(t,function(_e,Pe){if(!hf(ue,Pe)&&(me===_e||h(me,_e,s,o,v)))return ue.push(Pe)})){fe=!1;break}}else if(!(me===we||h(me,we,s,o,v))){fe=!1;break}}return v.delete(e),v.delete(t),fe}function tl(e,t,s,o,h,v,E){switch(s){case $t:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pf:return!(e.byteLength!=t.byteLength||!v(new en(e),new en(t)));case Xe:case We:case X:return H0(+e,+t);case ne:return e.name==t.name&&e.message==t.message;case cf:case df:return e==t+"";case Fe:var I=Jr;case $0:var R=o&S;if(I||(I=Yf),e.size!=t.size&&!R)return!1;var G=E.get(e);if(G)return G==t;o|=w,E.set(e,t);var q=Ho(I(e),I(t),o,h,v,E);return E.delete(e),q;case $f:if(vf)return vf.call(e)==vf.call(t)}return!1}function fl(e,t,s,o,h,v){var E=s&S,I=Is(e),R=I.length,G=Is(t),q=G.length;if(R!=q&&!E)return!1;for(var Y=R;Y--;){var fe=I[Y];if(!(E?fe in t:Ge.call(t,fe)))return!1}var ue=v.get(e),me=v.get(t);if(ue&&me)return ue==t&&me==e;var we=!0;v.set(e,t),v.set(t,e);for(var be=E;++Y<R;){fe=I[Y];var _e=e[fe],Pe=t[fe];if(o)var O0=E?o(Pe,_e,fe,t,e,v):o(_e,Pe,fe,e,t,v);if(!(O0===n?_e===Pe||h(_e,Pe,s,o,v):O0)){we=!1;break}be||(be=fe=="constructor")}if(we&&!be){var v0=e.constructor,_0=t.constructor;v0!=_0&&"constructor"in e&&"constructor"in t&&!(typeof v0=="function"&&v0 instanceof v0&&typeof _0=="function"&&_0 instanceof _0)&&(we=!1)}return v.delete(e),v.delete(t),we}function ot(e){return Ds(zo(e,n,a1),e+"")}function Is(e){return co(e,u0,Rs)}function Ss(e){return co(e,E0,Ko)}var ws=an?function(e){return an.get(e)}:Vs;function An(e){for(var t=e.name+"",s=jt[t],o=Ge.call(jt,t)?s.length:0;o--;){var h=s[o],v=h.func;if(v==null||v==e)return h.name}return t}function ef(e){var t=Ge.call(b,"placeholder")?b:e;return t.placeholder}function pe(){var e=b.iteratee||$s;return e=e===$s?ho:e,arguments.length?e(arguments[0],arguments[1]):e}function En(e,t){var s=e.__data__;return cl(t)?s[typeof t=="string"?"string":"hash"]:s.map}function Cs(e){for(var t=u0(e),s=t.length;s--;){var o=t[s],h=e[o];t[s]=[o,h,Xo(h)]}return t}function Mt(e,t){var s=p6(e,t);return po(s)?s:n}function nl(e){var t=Ge.call(e,_t),s=e[_t];try{e[_t]=n;var o=!0}catch{}var h=Jf.call(e);return o&&(t?e[_t]=s:delete e[_t]),h}var Rs=es?function(e){return e==null?[]:(e=Ve(e),yt(es(e),function(t){return zi.call(e,t)}))}:Hs,Ko=es?function(e){for(var t=[];e;)gt(t,Rs(e)),e=tn(e);return t}:Hs,h0=y0;(ts&&h0(new ts(new ArrayBuffer(1)))!=$t||bf&&h0(new bf)!=Fe||fs&&h0(fs.resolve())!=D0||Xt&&h0(new Xt)!=$0||yf&&h0(new yf)!=lf)&&(h0=function(e){var t=y0(e),s=t==Be?e.constructor:n,o=s?kt(s):"";if(o)switch(o){case L6:return $t;case G6:return Fe;case q6:return D0;case $6:return $0;case W6:return lf}return t});function rl(e,t,s){for(var o=-1,h=s.length;++o<h;){var v=s[o],E=v.size;switch(v.type){case"drop":e+=E;break;case"dropRight":t-=E;break;case"take":t=p0(t,e+E);break;case"takeRight":e=o0(e,t-E);break}}return{start:e,end:t}}function sl(e){var t=e.match(d5);return t?t[1].split(l5):[]}function Qo(e,t,s){t=It(t,e);for(var o=-1,h=t.length,v=!1;++o<h;){var E=et(t[o]);if(!(v=e!=null&&s(e,E)))break;e=e[E]}return v||++o!=h?v:(h=e==null?0:e.length,!!h&&_n(h)&&ut(E,h)&&(Ee(e)||Ft(e)))}function al(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&Ge.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Yo(e){return typeof e.constructor=="function"&&!Cf(e)?zt(tn(e)):{}}function il(e,t,s){var o=e.constructor;switch(t){case pf:return Ts(e);case Xe:case We:return new o(+e);case $t:return Vd(e,s);case Cr:case Rr:case Or:case _r:case xr:case Dr:case Pr:case Br:case Mr:return xo(e,s);case Fe:return new o;case X:case df:return new o(e);case cf:return Hd(e);case $0:return new o;case $f:return Kd(e)}}function ol(e,t){var s=t.length;if(!s)return e;var o=s-1;return t[o]=(s>1?"& ":"")+t[o],t=t.join(s>2?", ":" "),e.replace(c5,`{
/* [wrapped with `+t+`] */
`)}function ul(e){return Ee(e)||Ft(e)||!!(Ji&&e&&e[Ji])}function ut(e,t){var s=typeof e;return t=t==null?V:t,!!t&&(s=="number"||s!="symbol"&&A5.test(e))&&e>-1&&e%1==0&&e<t}function g0(e,t,s){if(!Je(s))return!1;var o=typeof t;return(o=="number"?A0(s)&&ut(t,s.length):o=="string"&&t in s)?H0(s[t],e):!1}function Os(e,t){if(Ee(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||R0(e)?!0:a5.test(e)||!s5.test(e)||t!=null&&e in Ve(t)}function cl(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function _s(e){var t=An(e),s=b[t];if(typeof s!="function"||!(t in xe.prototype))return!1;if(e===s)return!0;var o=ws(s);return!!o&&e===o[0]}function dl(e){return!!Yi&&Yi in e}var ll=jf?ct:Ks;function Cf(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Yt;return e===s}function Xo(e){return e===e&&!Je(e)}function jo(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==n||e in Ve(s))}}function pl(e){var t=Rn(e,function(o){return s.size===m&&s.clear(),o}),s=t.cache;return t}function hl(e,t){var s=e[1],o=t[1],h=s|o,v=h<(O|k|K),E=o==K&&s==$||o==K&&s==te&&e[7].length<=t[8]||o==(K|te)&&t[7].length<=t[8]&&s==$;if(!(v||E))return e;o&O&&(e[2]=t[2],h|=s&O?0:Q);var I=t[3];if(I){var R=e[3];e[3]=R?Po(R,I,t[4]):I,e[4]=R?vt(e[3],y):t[4]}return I=t[5],I&&(R=e[5],e[5]=R?Bo(R,I,t[6]):I,e[6]=R?vt(e[5],y):t[6]),I=t[7],I&&(e[7]=I),o&K&&(e[8]=e[8]==null?t[8]:p0(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}function ml(e){var t=[];if(e!=null)for(var s in Ve(e))t.push(s);return t}function bl(e){return Jf.call(e)}function zo(e,t,s){return t=o0(t===n?e.length-1:t,0),function(){for(var o=arguments,h=-1,v=o0(o.length-t,0),E=D(v);++h<v;)E[h]=o[t+h];h=-1;for(var I=D(t+1);++h<t;)I[h]=o[h];return I[t]=s(E),S0(e,this,I)}}function Jo(e,t){return t.length<2?e:Bt(e,U0(t,0,-1))}function yl(e,t){for(var s=e.length,o=p0(t.length,s),h=T0(e);o--;){var v=t[o];e[o]=ut(v,s)?h[v]:n}return e}function xs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Zo=t1(Eo),Rf=P6||function(e,t){return c0.setTimeout(e,t)},Ds=t1(Gd);function e1(e,t,s){var o=t+"";return Ds(e,ol(o,gl(sl(o),s)))}function t1(e){var t=0,s=0;return function(){var o=F6(),h=N-(o-s);if(s=o,h>0){if(++t>=P)return arguments[0]}else t=0;return e.apply(n,arguments)}}function In(e,t){var s=-1,o=e.length,h=o-1;for(t=t===n?o:t;++s<t;){var v=ps(s,h),E=e[v];e[v]=e[s],e[s]=E}return e.length=t,e}var f1=pl(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(i5,function(s,o,h,v){t.push(h?v.replace(m5,"$1"):o||s)}),t});function et(e){if(typeof e=="string"||R0(e))return e;var t=e+"";return t=="0"&&1/e==-x?"-0":t}function kt(e){if(e!=null){try{return zf.call(e)}catch{}try{return e+""}catch{}}return""}function gl(e,t){return B0(Ce,function(s){var o="_."+s[0];t&s[1]&&!Kf(e,o)&&e.push(o)}),e.sort()}function n1(e){if(e instanceof xe)return e.clone();var t=new k0(e.__wrapped__,e.__chain__);return t.__actions__=T0(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function vl(e,t,s){(s?g0(e,t,s):t===n)?t=1:t=o0(Se(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var h=0,v=0,E=D(rn(o/t));h<o;)E[v++]=U0(e,h,h+=t);return E}function Tl(e){for(var t=-1,s=e==null?0:e.length,o=0,h=[];++t<s;){var v=e[t];v&&(h[o++]=v)}return h}function Al(){var e=arguments.length;if(!e)return[];for(var t=D(e-1),s=arguments[0],o=e;o--;)t[o-1]=arguments[o];return gt(Ee(s)?T0(s):[s],d0(t,1))}var El=Oe(function(e,t){return f0(e)?Af(e,d0(t,1,f0,!0)):[]}),Il=Oe(function(e,t){var s=N0(t);return f0(s)&&(s=n),f0(e)?Af(e,d0(t,1,f0,!0),pe(s,2)):[]}),Sl=Oe(function(e,t){var s=N0(t);return f0(s)&&(s=n),f0(e)?Af(e,d0(t,1,f0,!0),n,s):[]});function wl(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===n?1:Se(t),U0(e,t<0?0:t,o)):[]}function Cl(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===n?1:Se(t),t=o-t,U0(e,0,t<0?0:t)):[]}function Rl(e,t){return e&&e.length?mn(e,pe(t,3),!0,!0):[]}function Ol(e,t){return e&&e.length?mn(e,pe(t,3),!0):[]}function _l(e,t,s,o){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&g0(e,t,s)&&(s=0,o=h),Ad(e,t,s,o)):[]}function r1(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:Se(s);return h<0&&(h=o0(o+h,0)),Qf(e,pe(t,3),h)}function s1(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=o-1;return s!==n&&(h=Se(s),h=s<0?o0(o+h,0):p0(h,o-1)),Qf(e,pe(t,3),h,!0)}function a1(e){var t=e==null?0:e.length;return t?d0(e,1):[]}function xl(e){var t=e==null?0:e.length;return t?d0(e,x):[]}function Dl(e,t){var s=e==null?0:e.length;return s?(t=t===n?1:Se(t),d0(e,t)):[]}function Pl(e){for(var t=-1,s=e==null?0:e.length,o={};++t<s;){var h=e[t];o[h[0]]=h[1]}return o}function i1(e){return e&&e.length?e[0]:n}function Bl(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:Se(s);return h<0&&(h=o0(o+h,0)),Vt(e,t,h)}function Ml(e){var t=e==null?0:e.length;return t?U0(e,0,-1):[]}var kl=Oe(function(e){var t=ze(e,gs);return t.length&&t[0]===e[0]?os(t):[]}),Fl=Oe(function(e){var t=N0(e),s=ze(e,gs);return t===N0(s)?t=n:s.pop(),s.length&&s[0]===e[0]?os(s,pe(t,2)):[]}),Ul=Oe(function(e){var t=N0(e),s=ze(e,gs);return t=typeof t=="function"?t:n,t&&s.pop(),s.length&&s[0]===e[0]?os(s,n,t):[]});function Nl(e,t){return e==null?"":M6.call(e,t)}function N0(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Ll(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=o;return s!==n&&(h=Se(s),h=h<0?o0(o+h,0):p0(h,o-1)),t===t?g6(e,t,h):Qf(e,Gi,h,!0)}function Gl(e,t){return e&&e.length?go(e,Se(t)):n}var ql=Oe(o1);function o1(e,t){return e&&e.length&&t&&t.length?ls(e,t):e}function $l(e,t,s){return e&&e.length&&t&&t.length?ls(e,t,pe(s,2)):e}function Wl(e,t,s){return e&&e.length&&t&&t.length?ls(e,t,n,s):e}var Vl=ot(function(e,t){var s=e==null?0:e.length,o=rs(e,t);return Ao(e,ze(t,function(h){return ut(h,s)?+h:h}).sort(Do)),o});function Hl(e,t){var s=[];if(!(e&&e.length))return s;var o=-1,h=[],v=e.length;for(t=pe(t,3);++o<v;){var E=e[o];t(E,o,e)&&(s.push(E),h.push(o))}return Ao(e,h),s}function Ps(e){return e==null?e:N6.call(e)}function Kl(e,t,s){var o=e==null?0:e.length;return o?(s&&typeof s!="number"&&g0(e,t,s)?(t=0,s=o):(t=t==null?0:Se(t),s=s===n?o:Se(s)),U0(e,t,s)):[]}function Ql(e,t){return hn(e,t)}function Yl(e,t,s){return ms(e,t,pe(s,2))}function Xl(e,t){var s=e==null?0:e.length;if(s){var o=hn(e,t);if(o<s&&H0(e[o],t))return o}return-1}function jl(e,t){return hn(e,t,!0)}function zl(e,t,s){return ms(e,t,pe(s,2),!0)}function Jl(e,t){var s=e==null?0:e.length;if(s){var o=hn(e,t,!0)-1;if(H0(e[o],t))return o}return-1}function Zl(e){return e&&e.length?Io(e):[]}function e8(e,t){return e&&e.length?Io(e,pe(t,2)):[]}function t8(e){var t=e==null?0:e.length;return t?U0(e,1,t):[]}function f8(e,t,s){return e&&e.length?(t=s||t===n?1:Se(t),U0(e,0,t<0?0:t)):[]}function n8(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===n?1:Se(t),t=o-t,U0(e,t<0?0:t,o)):[]}function r8(e,t){return e&&e.length?mn(e,pe(t,3),!1,!0):[]}function s8(e,t){return e&&e.length?mn(e,pe(t,3)):[]}var a8=Oe(function(e){return Et(d0(e,1,f0,!0))}),i8=Oe(function(e){var t=N0(e);return f0(t)&&(t=n),Et(d0(e,1,f0,!0),pe(t,2))}),o8=Oe(function(e){var t=N0(e);return t=typeof t=="function"?t:n,Et(d0(e,1,f0,!0),n,t)});function u8(e){return e&&e.length?Et(e):[]}function c8(e,t){return e&&e.length?Et(e,pe(t,2)):[]}function d8(e,t){return t=typeof t=="function"?t:n,e&&e.length?Et(e,n,t):[]}function Bs(e){if(!(e&&e.length))return[];var t=0;return e=yt(e,function(s){if(f0(s))return t=o0(s.length,t),!0}),jr(t,function(s){return ze(e,Qr(s))})}function u1(e,t){if(!(e&&e.length))return[];var s=Bs(e);return t==null?s:ze(s,function(o){return S0(t,n,o)})}var l8=Oe(function(e,t){return f0(e)?Af(e,t):[]}),p8=Oe(function(e){return ys(yt(e,f0))}),h8=Oe(function(e){var t=N0(e);return f0(t)&&(t=n),ys(yt(e,f0),pe(t,2))}),m8=Oe(function(e){var t=N0(e);return t=typeof t=="function"?t:n,ys(yt(e,f0),n,t)}),b8=Oe(Bs);function y8(e,t){return Ro(e||[],t||[],Tf)}function g8(e,t){return Ro(e||[],t||[],Sf)}var v8=Oe(function(e){var t=e.length,s=t>1?e[t-1]:n;return s=typeof s=="function"?(e.pop(),s):n,u1(e,s)});function c1(e){var t=b(e);return t.__chain__=!0,t}function T8(e,t){return t(e),e}function Sn(e,t){return t(e)}var A8=ot(function(e){var t=e.length,s=t?e[0]:0,o=this.__wrapped__,h=function(v){return rs(v,e)};return t>1||this.__actions__.length||!(o instanceof xe)||!ut(s)?this.thru(h):(o=o.slice(s,+s+(t?1:0)),o.__actions__.push({func:Sn,args:[h],thisArg:n}),new k0(o,this.__chain__).thru(function(v){return t&&!v.length&&v.push(n),v}))});function E8(){return c1(this)}function I8(){return new k0(this.value(),this.__chain__)}function S8(){this.__values__===n&&(this.__values__=S1(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function w8(){return this}function C8(e){for(var t,s=this;s instanceof un;){var o=n1(s);o.__index__=0,o.__values__=n,t?h.__wrapped__=o:t=o;var h=o;s=s.__wrapped__}return h.__wrapped__=e,t}function R8(){var e=this.__wrapped__;if(e instanceof xe){var t=e;return this.__actions__.length&&(t=new xe(this)),t=t.reverse(),t.__actions__.push({func:Sn,args:[Ps],thisArg:n}),new k0(t,this.__chain__)}return this.thru(Ps)}function O8(){return Co(this.__wrapped__,this.__actions__)}var _8=bn(function(e,t,s){Ge.call(e,s)?++e[s]:at(e,s,1)});function x8(e,t,s){var o=Ee(e)?Ni:Td;return s&&g0(e,t,s)&&(t=n),o(e,pe(t,3))}function D8(e,t){var s=Ee(e)?yt:oo;return s(e,pe(t,3))}var P8=Uo(r1),B8=Uo(s1);function M8(e,t){return d0(wn(e,t),1)}function k8(e,t){return d0(wn(e,t),x)}function F8(e,t,s){return s=s===n?1:Se(s),d0(wn(e,t),s)}function d1(e,t){var s=Ee(e)?B0:At;return s(e,pe(t,3))}function l1(e,t){var s=Ee(e)?t6:io;return s(e,pe(t,3))}var U8=bn(function(e,t,s){Ge.call(e,s)?e[s].push(t):at(e,s,[t])});function N8(e,t,s,o){e=A0(e)?e:ff(e),s=s&&!o?Se(s):0;var h=e.length;return s<0&&(s=o0(h+s,0)),xn(e)?s<=h&&e.indexOf(t,s)>-1:!!h&&Vt(e,t,s)>-1}var L8=Oe(function(e,t,s){var o=-1,h=typeof t=="function",v=A0(e)?D(e.length):[];return At(e,function(E){v[++o]=h?S0(t,E,s):Ef(E,t,s)}),v}),G8=bn(function(e,t,s){at(e,s,t)});function wn(e,t){var s=Ee(e)?ze:mo;return s(e,pe(t,3))}function q8(e,t,s,o){return e==null?[]:(Ee(t)||(t=t==null?[]:[t]),s=o?n:s,Ee(s)||(s=s==null?[]:[s]),vo(e,t,s))}var $8=bn(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function W8(e,t,s){var o=Ee(e)?Hr:$i,h=arguments.length<3;return o(e,pe(t,4),s,h,At)}function V8(e,t,s){var o=Ee(e)?f6:$i,h=arguments.length<3;return o(e,pe(t,4),s,h,io)}function H8(e,t){var s=Ee(e)?yt:oo;return s(e,On(pe(t,3)))}function K8(e){var t=Ee(e)?no:Nd;return t(e)}function Q8(e,t,s){(s?g0(e,t,s):t===n)?t=1:t=Se(t);var o=Ee(e)?md:Ld;return o(e,t)}function Y8(e){var t=Ee(e)?bd:qd;return t(e)}function X8(e){if(e==null)return 0;if(A0(e))return xn(e)?Kt(e):e.length;var t=h0(e);return t==Fe||t==$0?e.size:cs(e).length}function j8(e,t,s){var o=Ee(e)?Kr:$d;return s&&g0(e,t,s)&&(t=n),o(e,pe(t,3))}var z8=Oe(function(e,t){if(e==null)return[];var s=t.length;return s>1&&g0(e,t[0],t[1])?t=[]:s>2&&g0(t[0],t[1],t[2])&&(t=[t[0]]),vo(e,d0(t,1),[])}),Cn=D6||function(){return c0.Date.now()};function J8(e,t){if(typeof t!="function")throw new M0(l);return e=Se(e),function(){if(--e<1)return t.apply(this,arguments)}}function p1(e,t,s){return t=s?n:t,t=e&&t==null?e.length:t,it(e,K,n,n,n,n,t)}function h1(e,t){var s;if(typeof t!="function")throw new M0(l);return e=Se(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=n),s}}var Ms=Oe(function(e,t,s){var o=O;if(s.length){var h=vt(s,ef(Ms));o|=F}return it(e,o,t,s,h)}),m1=Oe(function(e,t,s){var o=O|k;if(s.length){var h=vt(s,ef(m1));o|=F}return it(t,o,e,s,h)});function b1(e,t,s){t=s?n:t;var o=it(e,$,n,n,n,n,n,t);return o.placeholder=b1.placeholder,o}function y1(e,t,s){t=s?n:t;var o=it(e,j,n,n,n,n,n,t);return o.placeholder=y1.placeholder,o}function g1(e,t,s){var o,h,v,E,I,R,G=0,q=!1,Y=!1,fe=!0;if(typeof e!="function")throw new M0(l);t=L0(t)||0,Je(s)&&(q=!!s.leading,Y="maxWait"in s,v=Y?o0(L0(s.maxWait)||0,t):v,fe="trailing"in s?!!s.trailing:fe);function ue(n0){var K0=o,lt=h;return o=h=n,G=n0,E=e.apply(lt,K0),E}function me(n0){return G=n0,I=Rf(_e,t),q?ue(n0):E}function we(n0){var K0=n0-R,lt=n0-G,U1=t-K0;return Y?p0(U1,v-lt):U1}function be(n0){var K0=n0-R,lt=n0-G;return R===n||K0>=t||K0<0||Y&&lt>=v}function _e(){var n0=Cn();if(be(n0))return Pe(n0);I=Rf(_e,we(n0))}function Pe(n0){return I=n,fe&&o?ue(n0):(o=h=n,E)}function O0(){I!==n&&Oo(I),G=0,o=R=h=I=n}function v0(){return I===n?E:Pe(Cn())}function _0(){var n0=Cn(),K0=be(n0);if(o=arguments,h=this,R=n0,K0){if(I===n)return me(R);if(Y)return Oo(I),I=Rf(_e,t),ue(R)}return I===n&&(I=Rf(_e,t)),E}return _0.cancel=O0,_0.flush=v0,_0}var Z8=Oe(function(e,t){return ao(e,1,t)}),e2=Oe(function(e,t,s){return ao(e,L0(t)||0,s)});function t2(e){return it(e,ce)}function Rn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new M0(l);var s=function(){var o=arguments,h=t?t.apply(this,o):o[0],v=s.cache;if(v.has(h))return v.get(h);var E=e.apply(this,o);return s.cache=v.set(h,E)||v,E};return s.cache=new(Rn.Cache||st),s}Rn.Cache=st;function On(e){if(typeof e!="function")throw new M0(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function f2(e){return h1(2,e)}var n2=Wd(function(e,t){t=t.length==1&&Ee(t[0])?ze(t[0],w0(pe())):ze(d0(t,1),w0(pe()));var s=t.length;return Oe(function(o){for(var h=-1,v=p0(o.length,s);++h<v;)o[h]=t[h].call(this,o[h]);return S0(e,this,o)})}),ks=Oe(function(e,t){var s=vt(t,ef(ks));return it(e,F,n,t,s)}),v1=Oe(function(e,t){var s=vt(t,ef(v1));return it(e,J,n,t,s)}),r2=ot(function(e,t){return it(e,te,n,n,n,t)});function s2(e,t){if(typeof e!="function")throw new M0(l);return t=t===n?t:Se(t),Oe(e,t)}function a2(e,t){if(typeof e!="function")throw new M0(l);return t=t==null?0:o0(Se(t),0),Oe(function(s){var o=s[t],h=St(s,0,t);return o&&gt(h,o),S0(e,this,h)})}function i2(e,t,s){var o=!0,h=!0;if(typeof e!="function")throw new M0(l);return Je(s)&&(o="leading"in s?!!s.leading:o,h="trailing"in s?!!s.trailing:h),g1(e,t,{leading:o,maxWait:t,trailing:h})}function o2(e){return p1(e,1)}function u2(e,t){return ks(vs(t),e)}function c2(){if(!arguments.length)return[];var e=arguments[0];return Ee(e)?e:[e]}function d2(e){return F0(e,A)}function l2(e,t){return t=typeof t=="function"?t:n,F0(e,A,t)}function p2(e){return F0(e,g|A)}function h2(e,t){return t=typeof t=="function"?t:n,F0(e,g|A,t)}function m2(e,t){return t==null||so(e,t,u0(t))}function H0(e,t){return e===t||e!==e&&t!==t}var b2=Tn(is),y2=Tn(function(e,t){return e>=t}),Ft=lo(function(){return arguments}())?lo:function(e){return t0(e)&&Ge.call(e,"callee")&&!zi.call(e,"callee")},Ee=D.isArray,g2=Pi?w0(Pi):Cd;function A0(e){return e!=null&&_n(e.length)&&!ct(e)}function f0(e){return t0(e)&&A0(e)}function v2(e){return e===!0||e===!1||t0(e)&&y0(e)==Xe}var wt=B6||Ks,T2=Bi?w0(Bi):Rd;function A2(e){return t0(e)&&e.nodeType===1&&!Of(e)}function E2(e){if(e==null)return!0;if(A0(e)&&(Ee(e)||typeof e=="string"||typeof e.splice=="function"||wt(e)||tf(e)||Ft(e)))return!e.length;var t=h0(e);if(t==Fe||t==$0)return!e.size;if(Cf(e))return!cs(e).length;for(var s in e)if(Ge.call(e,s))return!1;return!0}function I2(e,t){return If(e,t)}function S2(e,t,s){s=typeof s=="function"?s:n;var o=s?s(e,t):n;return o===n?If(e,t,n,s):!!o}function Fs(e){if(!t0(e))return!1;var t=y0(e);return t==ne||t==z||typeof e.message=="string"&&typeof e.name=="string"&&!Of(e)}function w2(e){return typeof e=="number"&&Zi(e)}function ct(e){if(!Je(e))return!1;var t=y0(e);return t==Ie||t==Ke||t==Ne||t==qt}function T1(e){return typeof e=="number"&&e==Se(e)}function _n(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=V}function Je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function t0(e){return e!=null&&typeof e=="object"}var A1=Mi?w0(Mi):_d;function C2(e,t){return e===t||us(e,t,Cs(t))}function R2(e,t,s){return s=typeof s=="function"?s:n,us(e,t,Cs(t),s)}function O2(e){return E1(e)&&e!=+e}function _2(e){if(ll(e))throw new ve(c);return po(e)}function x2(e){return e===null}function D2(e){return e==null}function E1(e){return typeof e=="number"||t0(e)&&y0(e)==X}function Of(e){if(!t0(e)||y0(e)!=Be)return!1;var t=tn(e);if(t===null)return!0;var s=Ge.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&zf.call(s)==R6}var Us=ki?w0(ki):xd;function P2(e){return T1(e)&&e>=-V&&e<=V}var I1=Fi?w0(Fi):Dd;function xn(e){return typeof e=="string"||!Ee(e)&&t0(e)&&y0(e)==df}function R0(e){return typeof e=="symbol"||t0(e)&&y0(e)==$f}var tf=Ui?w0(Ui):Pd;function B2(e){return e===n}function M2(e){return t0(e)&&h0(e)==lf}function k2(e){return t0(e)&&y0(e)==zc}var F2=Tn(ds),U2=Tn(function(e,t){return e<=t});function S1(e){if(!e)return[];if(A0(e))return xn(e)?W0(e):T0(e);if(mf&&e[mf])return m6(e[mf]());var t=h0(e),s=t==Fe?Jr:t==$0?Yf:ff;return s(e)}function dt(e){if(!e)return e===0?e:0;if(e=L0(e),e===x||e===-x){var t=e<0?-1:1;return t*ee}return e===e?e:0}function Se(e){var t=dt(e),s=t%1;return t===t?s?t-s:t:0}function w1(e){return e?Pt(Se(e),0,Z):0}function L0(e){if(typeof e=="number")return e;if(R0(e))return se;if(Je(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Je(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wi(e);var s=g5.test(e);return s||T5.test(e)?J5(e.slice(2),s?2:8):y5.test(e)?se:+e}function C1(e){return Z0(e,E0(e))}function N2(e){return e?Pt(Se(e),-V,V):e===0?e:0}function Le(e){return e==null?"":C0(e)}var L2=Jt(function(e,t){if(Cf(t)||A0(t)){Z0(t,u0(t),e);return}for(var s in t)Ge.call(t,s)&&Tf(e,s,t[s])}),R1=Jt(function(e,t){Z0(t,E0(t),e)}),Dn=Jt(function(e,t,s,o){Z0(t,E0(t),e,o)}),G2=Jt(function(e,t,s,o){Z0(t,u0(t),e,o)}),q2=ot(rs);function $2(e,t){var s=zt(e);return t==null?s:ro(s,t)}var W2=Oe(function(e,t){e=Ve(e);var s=-1,o=t.length,h=o>2?t[2]:n;for(h&&g0(t[0],t[1],h)&&(o=1);++s<o;)for(var v=t[s],E=E0(v),I=-1,R=E.length;++I<R;){var G=E[I],q=e[G];(q===n||H0(q,Yt[G])&&!Ge.call(e,G))&&(e[G]=v[G])}return e}),V2=Oe(function(e){return e.push(n,Vo),S0(O1,n,e)});function H2(e,t){return Li(e,pe(t,3),J0)}function K2(e,t){return Li(e,pe(t,3),as)}function Q2(e,t){return e==null?e:ss(e,pe(t,3),E0)}function Y2(e,t){return e==null?e:uo(e,pe(t,3),E0)}function X2(e,t){return e&&J0(e,pe(t,3))}function j2(e,t){return e&&as(e,pe(t,3))}function z2(e){return e==null?[]:ln(e,u0(e))}function J2(e){return e==null?[]:ln(e,E0(e))}function Ns(e,t,s){var o=e==null?n:Bt(e,t);return o===n?s:o}function Z2(e,t){return e!=null&&Qo(e,t,Ed)}function Ls(e,t){return e!=null&&Qo(e,t,Id)}var ep=Lo(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Jf.call(t)),e[t]=s},qs(I0)),tp=Lo(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Jf.call(t)),Ge.call(e,t)?e[t].push(s):e[t]=[s]},pe),fp=Oe(Ef);function u0(e){return A0(e)?fo(e):cs(e)}function E0(e){return A0(e)?fo(e,!0):Bd(e)}function np(e,t){var s={};return t=pe(t,3),J0(e,function(o,h,v){at(s,t(o,h,v),o)}),s}function rp(e,t){var s={};return t=pe(t,3),J0(e,function(o,h,v){at(s,h,t(o,h,v))}),s}var sp=Jt(function(e,t,s){pn(e,t,s)}),O1=Jt(function(e,t,s,o){pn(e,t,s,o)}),ap=ot(function(e,t){var s={};if(e==null)return s;var o=!1;t=ze(t,function(v){return v=It(v,e),o||(o=v.length>1),v}),Z0(e,Ss(e),s),o&&(s=F0(s,g|T|A,el));for(var h=t.length;h--;)bs(s,t[h]);return s});function ip(e,t){return _1(e,On(pe(t)))}var op=ot(function(e,t){return e==null?{}:kd(e,t)});function _1(e,t){if(e==null)return{};var s=ze(Ss(e),function(o){return[o]});return t=pe(t),To(e,s,function(o,h){return t(o,h[0])})}function up(e,t,s){t=It(t,e);var o=-1,h=t.length;for(h||(h=1,e=n);++o<h;){var v=e==null?n:e[et(t[o])];v===n&&(o=h,v=s),e=ct(v)?v.call(e):v}return e}function cp(e,t,s){return e==null?e:Sf(e,t,s)}function dp(e,t,s,o){return o=typeof o=="function"?o:n,e==null?e:Sf(e,t,s,o)}var x1=$o(u0),D1=$o(E0);function lp(e,t,s){var o=Ee(e),h=o||wt(e)||tf(e);if(t=pe(t,4),s==null){var v=e&&e.constructor;h?s=o?new v:[]:Je(e)?s=ct(v)?zt(tn(e)):{}:s={}}return(h?B0:J0)(e,function(E,I,R){return t(s,E,I,R)}),s}function pp(e,t){return e==null?!0:bs(e,t)}function hp(e,t,s){return e==null?e:wo(e,t,vs(s))}function mp(e,t,s,o){return o=typeof o=="function"?o:n,e==null?e:wo(e,t,vs(s),o)}function ff(e){return e==null?[]:zr(e,u0(e))}function bp(e){return e==null?[]:zr(e,E0(e))}function yp(e,t,s){return s===n&&(s=t,t=n),s!==n&&(s=L0(s),s=s===s?s:0),t!==n&&(t=L0(t),t=t===t?t:0),Pt(L0(e),t,s)}function gp(e,t,s){return t=dt(t),s===n?(s=t,t=0):s=dt(s),e=L0(e),Sd(e,t,s)}function vp(e,t,s){if(s&&typeof s!="boolean"&&g0(e,t,s)&&(t=s=n),s===n&&(typeof t=="boolean"?(s=t,t=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&t===n?(e=0,t=1):(e=dt(e),t===n?(t=e,e=0):t=dt(t)),e>t){var o=e;e=t,t=o}if(s||e%1||t%1){var h=eo();return p0(e+h*(t-e+z5("1e-"+((h+"").length-1))),t)}return ps(e,t)}var Tp=Zt(function(e,t,s){return t=t.toLowerCase(),e+(s?P1(t):t)});function P1(e){return Gs(Le(e).toLowerCase())}function B1(e){return e=Le(e),e&&e.replace(E5,c6).replace(q5,"")}function Ap(e,t,s){e=Le(e),t=C0(t);var o=e.length;s=s===n?o:Pt(Se(s),0,o);var h=s;return s-=t.length,s>=0&&e.slice(s,h)==t}function Ep(e){return e=Le(e),e&&f5.test(e)?e.replace(ui,d6):e}function Ip(e){return e=Le(e),e&&o5.test(e)?e.replace(kr,"\\$&"):e}var Sp=Zt(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),wp=Zt(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),Cp=Fo("toLowerCase");function Rp(e,t,s){e=Le(e),t=Se(t);var o=t?Kt(e):0;if(!t||o>=t)return e;var h=(t-o)/2;return vn(sn(h),s)+e+vn(rn(h),s)}function Op(e,t,s){e=Le(e),t=Se(t);var o=t?Kt(e):0;return t&&o<t?e+vn(t-o,s):e}function _p(e,t,s){e=Le(e),t=Se(t);var o=t?Kt(e):0;return t&&o<t?vn(t-o,s)+e:e}function xp(e,t,s){return s||t==null?t=0:t&&(t=+t),U6(Le(e).replace(Fr,""),t||0)}function Dp(e,t,s){return(s?g0(e,t,s):t===n)?t=1:t=Se(t),hs(Le(e),t)}function Pp(){var e=arguments,t=Le(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Bp=Zt(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function Mp(e,t,s){return s&&typeof s!="number"&&g0(e,t,s)&&(t=s=n),s=s===n?Z:s>>>0,s?(e=Le(e),e&&(typeof t=="string"||t!=null&&!Us(t))&&(t=C0(t),!t&&Ht(e))?St(W0(e),0,s):e.split(t,s)):[]}var kp=Zt(function(e,t,s){return e+(s?" ":"")+Gs(t)});function Fp(e,t,s){return e=Le(e),s=s==null?0:Pt(Se(s),0,e.length),t=C0(t),e.slice(s,s+t.length)==t}function Up(e,t,s){var o=b.templateSettings;s&&g0(e,t,s)&&(t=n),e=Le(e),t=Dn({},t,o,Wo);var h=Dn({},t.imports,o.imports,Wo),v=u0(h),E=zr(h,v),I,R,G=0,q=t.interpolate||Wf,Y="__p += '",fe=Zr((t.escape||Wf).source+"|"+q.source+"|"+(q===ci?b5:Wf).source+"|"+(t.evaluate||Wf).source+"|$","g"),ue="//# sourceURL="+(Ge.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++K5+"]")+`
`;e.replace(fe,function(be,_e,Pe,O0,v0,_0){return Pe||(Pe=O0),Y+=e.slice(G,_0).replace(I5,l6),_e&&(I=!0,Y+=`' +
__e(`+_e+`) +
'`),v0&&(R=!0,Y+=`';
`+v0+`;
__p += '`),Pe&&(Y+=`' +
((__t = (`+Pe+`)) == null ? '' : __t) +
'`),G=_0+be.length,be}),Y+=`';
`;var me=Ge.call(t,"variable")&&t.variable;if(!me)Y=`with (obj) {
`+Y+`
}
`;else if(h5.test(me))throw new ve(d);Y=(R?Y.replace(Jc,""):Y).replace(Zc,"$1").replace(e5,"$1;"),Y="function("+(me||"obj")+`) {
`+(me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(R?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Y+`return __p
}`;var we=k1(function(){return Ue(v,ue+"return "+Y).apply(n,E)});if(we.source=Y,Fs(we))throw we;return we}function Np(e){return Le(e).toLowerCase()}function Lp(e){return Le(e).toUpperCase()}function Gp(e,t,s){if(e=Le(e),e&&(s||t===n))return Wi(e);if(!e||!(t=C0(t)))return e;var o=W0(e),h=W0(t),v=Vi(o,h),E=Hi(o,h)+1;return St(o,v,E).join("")}function qp(e,t,s){if(e=Le(e),e&&(s||t===n))return e.slice(0,Qi(e)+1);if(!e||!(t=C0(t)))return e;var o=W0(e),h=Hi(o,W0(t))+1;return St(o,0,h).join("")}function $p(e,t,s){if(e=Le(e),e&&(s||t===n))return e.replace(Fr,"");if(!e||!(t=C0(t)))return e;var o=W0(e),h=Vi(o,W0(t));return St(o,h).join("")}function Wp(e,t){var s=le,o=Me;if(Je(t)){var h="separator"in t?t.separator:h;s="length"in t?Se(t.length):s,o="omission"in t?C0(t.omission):o}e=Le(e);var v=e.length;if(Ht(e)){var E=W0(e);v=E.length}if(s>=v)return e;var I=s-Kt(o);if(I<1)return o;var R=E?St(E,0,I).join(""):e.slice(0,I);if(h===n)return R+o;if(E&&(I+=R.length-I),Us(h)){if(e.slice(I).search(h)){var G,q=R;for(h.global||(h=Zr(h.source,Le(di.exec(h))+"g")),h.lastIndex=0;G=h.exec(q);)var Y=G.index;R=R.slice(0,Y===n?I:Y)}}else if(e.indexOf(C0(h),I)!=I){var fe=R.lastIndexOf(h);fe>-1&&(R=R.slice(0,fe))}return R+o}function Vp(e){return e=Le(e),e&&t5.test(e)?e.replace(oi,v6):e}var Hp=Zt(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),Gs=Fo("toUpperCase");function M1(e,t,s){return e=Le(e),t=s?n:t,t===n?h6(e)?E6(e):s6(e):e.match(t)||[]}var k1=Oe(function(e,t){try{return S0(e,n,t)}catch(s){return Fs(s)?s:new ve(s)}}),Kp=ot(function(e,t){return B0(t,function(s){s=et(s),at(e,s,Ms(e[s],e))}),e});function Qp(e){var t=e==null?0:e.length,s=pe();return e=t?ze(e,function(o){if(typeof o[1]!="function")throw new M0(l);return[s(o[0]),o[1]]}):[],Oe(function(o){for(var h=-1;++h<t;){var v=e[h];if(S0(v[0],this,o))return S0(v[1],this,o)}})}function Yp(e){return vd(F0(e,g))}function qs(e){return function(){return e}}function Xp(e,t){return e==null||e!==e?t:e}var jp=No(),zp=No(!0);function I0(e){return e}function $s(e){return ho(typeof e=="function"?e:F0(e,g))}function Jp(e){return bo(F0(e,g))}function Zp(e,t){return yo(e,F0(t,g))}var eh=Oe(function(e,t){return function(s){return Ef(s,e,t)}}),th=Oe(function(e,t){return function(s){return Ef(e,s,t)}});function Ws(e,t,s){var o=u0(t),h=ln(t,o);s==null&&!(Je(t)&&(h.length||!o.length))&&(s=t,t=e,e=this,h=ln(t,u0(t)));var v=!(Je(s)&&"chain"in s)||!!s.chain,E=ct(e);return B0(h,function(I){var R=t[I];e[I]=R,E&&(e.prototype[I]=function(){var G=this.__chain__;if(v||G){var q=e(this.__wrapped__),Y=q.__actions__=T0(this.__actions__);return Y.push({func:R,args:arguments,thisArg:e}),q.__chain__=G,q}return R.apply(e,gt([this.value()],arguments))})}),e}function fh(){return c0._===this&&(c0._=O6),this}function Vs(){}function nh(e){return e=Se(e),Oe(function(t){return go(t,e)})}var rh=As(ze),sh=As(Ni),ah=As(Kr);function F1(e){return Os(e)?Qr(et(e)):Fd(e)}function ih(e){return function(t){return e==null?n:Bt(e,t)}}var oh=Go(),uh=Go(!0);function Hs(){return[]}function Ks(){return!1}function ch(){return{}}function dh(){return""}function lh(){return!0}function ph(e,t){if(e=Se(e),e<1||e>V)return[];var s=Z,o=p0(e,Z);t=pe(t),e-=Z;for(var h=jr(o,t);++s<e;)t(s);return h}function hh(e){return Ee(e)?ze(e,et):R0(e)?[e]:T0(f1(Le(e)))}function mh(e){var t=++C6;return Le(e)+t}var bh=gn(function(e,t){return e+t},0),yh=Es("ceil"),gh=gn(function(e,t){return e/t},1),vh=Es("floor");function Th(e){return e&&e.length?dn(e,I0,is):n}function Ah(e,t){return e&&e.length?dn(e,pe(t,2),is):n}function Eh(e){return qi(e,I0)}function Ih(e,t){return qi(e,pe(t,2))}function Sh(e){return e&&e.length?dn(e,I0,ds):n}function wh(e,t){return e&&e.length?dn(e,pe(t,2),ds):n}var Ch=gn(function(e,t){return e*t},1),Rh=Es("round"),Oh=gn(function(e,t){return e-t},0);function _h(e){return e&&e.length?Xr(e,I0):0}function xh(e,t){return e&&e.length?Xr(e,pe(t,2)):0}return b.after=J8,b.ary=p1,b.assign=L2,b.assignIn=R1,b.assignInWith=Dn,b.assignWith=G2,b.at=q2,b.before=h1,b.bind=Ms,b.bindAll=Kp,b.bindKey=m1,b.castArray=c2,b.chain=c1,b.chunk=vl,b.compact=Tl,b.concat=Al,b.cond=Qp,b.conforms=Yp,b.constant=qs,b.countBy=_8,b.create=$2,b.curry=b1,b.curryRight=y1,b.debounce=g1,b.defaults=W2,b.defaultsDeep=V2,b.defer=Z8,b.delay=e2,b.difference=El,b.differenceBy=Il,b.differenceWith=Sl,b.drop=wl,b.dropRight=Cl,b.dropRightWhile=Rl,b.dropWhile=Ol,b.fill=_l,b.filter=D8,b.flatMap=M8,b.flatMapDeep=k8,b.flatMapDepth=F8,b.flatten=a1,b.flattenDeep=xl,b.flattenDepth=Dl,b.flip=t2,b.flow=jp,b.flowRight=zp,b.fromPairs=Pl,b.functions=z2,b.functionsIn=J2,b.groupBy=U8,b.initial=Ml,b.intersection=kl,b.intersectionBy=Fl,b.intersectionWith=Ul,b.invert=ep,b.invertBy=tp,b.invokeMap=L8,b.iteratee=$s,b.keyBy=G8,b.keys=u0,b.keysIn=E0,b.map=wn,b.mapKeys=np,b.mapValues=rp,b.matches=Jp,b.matchesProperty=Zp,b.memoize=Rn,b.merge=sp,b.mergeWith=O1,b.method=eh,b.methodOf=th,b.mixin=Ws,b.negate=On,b.nthArg=nh,b.omit=ap,b.omitBy=ip,b.once=f2,b.orderBy=q8,b.over=rh,b.overArgs=n2,b.overEvery=sh,b.overSome=ah,b.partial=ks,b.partialRight=v1,b.partition=$8,b.pick=op,b.pickBy=_1,b.property=F1,b.propertyOf=ih,b.pull=ql,b.pullAll=o1,b.pullAllBy=$l,b.pullAllWith=Wl,b.pullAt=Vl,b.range=oh,b.rangeRight=uh,b.rearg=r2,b.reject=H8,b.remove=Hl,b.rest=s2,b.reverse=Ps,b.sampleSize=Q8,b.set=cp,b.setWith=dp,b.shuffle=Y8,b.slice=Kl,b.sortBy=z8,b.sortedUniq=Zl,b.sortedUniqBy=e8,b.split=Mp,b.spread=a2,b.tail=t8,b.take=f8,b.takeRight=n8,b.takeRightWhile=r8,b.takeWhile=s8,b.tap=T8,b.throttle=i2,b.thru=Sn,b.toArray=S1,b.toPairs=x1,b.toPairsIn=D1,b.toPath=hh,b.toPlainObject=C1,b.transform=lp,b.unary=o2,b.union=a8,b.unionBy=i8,b.unionWith=o8,b.uniq=u8,b.uniqBy=c8,b.uniqWith=d8,b.unset=pp,b.unzip=Bs,b.unzipWith=u1,b.update=hp,b.updateWith=mp,b.values=ff,b.valuesIn=bp,b.without=l8,b.words=M1,b.wrap=u2,b.xor=p8,b.xorBy=h8,b.xorWith=m8,b.zip=b8,b.zipObject=y8,b.zipObjectDeep=g8,b.zipWith=v8,b.entries=x1,b.entriesIn=D1,b.extend=R1,b.extendWith=Dn,Ws(b,b),b.add=bh,b.attempt=k1,b.camelCase=Tp,b.capitalize=P1,b.ceil=yh,b.clamp=yp,b.clone=d2,b.cloneDeep=p2,b.cloneDeepWith=h2,b.cloneWith=l2,b.conformsTo=m2,b.deburr=B1,b.defaultTo=Xp,b.divide=gh,b.endsWith=Ap,b.eq=H0,b.escape=Ep,b.escapeRegExp=Ip,b.every=x8,b.find=P8,b.findIndex=r1,b.findKey=H2,b.findLast=B8,b.findLastIndex=s1,b.findLastKey=K2,b.floor=vh,b.forEach=d1,b.forEachRight=l1,b.forIn=Q2,b.forInRight=Y2,b.forOwn=X2,b.forOwnRight=j2,b.get=Ns,b.gt=b2,b.gte=y2,b.has=Z2,b.hasIn=Ls,b.head=i1,b.identity=I0,b.includes=N8,b.indexOf=Bl,b.inRange=gp,b.invoke=fp,b.isArguments=Ft,b.isArray=Ee,b.isArrayBuffer=g2,b.isArrayLike=A0,b.isArrayLikeObject=f0,b.isBoolean=v2,b.isBuffer=wt,b.isDate=T2,b.isElement=A2,b.isEmpty=E2,b.isEqual=I2,b.isEqualWith=S2,b.isError=Fs,b.isFinite=w2,b.isFunction=ct,b.isInteger=T1,b.isLength=_n,b.isMap=A1,b.isMatch=C2,b.isMatchWith=R2,b.isNaN=O2,b.isNative=_2,b.isNil=D2,b.isNull=x2,b.isNumber=E1,b.isObject=Je,b.isObjectLike=t0,b.isPlainObject=Of,b.isRegExp=Us,b.isSafeInteger=P2,b.isSet=I1,b.isString=xn,b.isSymbol=R0,b.isTypedArray=tf,b.isUndefined=B2,b.isWeakMap=M2,b.isWeakSet=k2,b.join=Nl,b.kebabCase=Sp,b.last=N0,b.lastIndexOf=Ll,b.lowerCase=wp,b.lowerFirst=Cp,b.lt=F2,b.lte=U2,b.max=Th,b.maxBy=Ah,b.mean=Eh,b.meanBy=Ih,b.min=Sh,b.minBy=wh,b.stubArray=Hs,b.stubFalse=Ks,b.stubObject=ch,b.stubString=dh,b.stubTrue=lh,b.multiply=Ch,b.nth=Gl,b.noConflict=fh,b.noop=Vs,b.now=Cn,b.pad=Rp,b.padEnd=Op,b.padStart=_p,b.parseInt=xp,b.random=vp,b.reduce=W8,b.reduceRight=V8,b.repeat=Dp,b.replace=Pp,b.result=up,b.round=Rh,b.runInContext=C,b.sample=K8,b.size=X8,b.snakeCase=Bp,b.some=j8,b.sortedIndex=Ql,b.sortedIndexBy=Yl,b.sortedIndexOf=Xl,b.sortedLastIndex=jl,b.sortedLastIndexBy=zl,b.sortedLastIndexOf=Jl,b.startCase=kp,b.startsWith=Fp,b.subtract=Oh,b.sum=_h,b.sumBy=xh,b.template=Up,b.times=ph,b.toFinite=dt,b.toInteger=Se,b.toLength=w1,b.toLower=Np,b.toNumber=L0,b.toSafeInteger=N2,b.toString=Le,b.toUpper=Lp,b.trim=Gp,b.trimEnd=qp,b.trimStart=$p,b.truncate=Wp,b.unescape=Vp,b.uniqueId=mh,b.upperCase=Hp,b.upperFirst=Gs,b.each=d1,b.eachRight=l1,b.first=i1,Ws(b,function(){var e={};return J0(b,function(t,s){Ge.call(b.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),b.VERSION=a,B0(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){b[e].placeholder=b}),B0(["drop","take"],function(e,t){xe.prototype[e]=function(s){s=s===n?1:o0(Se(s),0);var o=this.__filtered__&&!t?new xe(this):this.clone();return o.__filtered__?o.__takeCount__=p0(s,o.__takeCount__):o.__views__.push({size:p0(s,Z),type:e+(o.__dir__<0?"Right":"")}),o},xe.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),B0(["filter","map","takeWhile"],function(e,t){var s=t+1,o=s==L||s==H;xe.prototype[e]=function(h){var v=this.clone();return v.__iteratees__.push({iteratee:pe(h,3),type:s}),v.__filtered__=v.__filtered__||o,v}}),B0(["head","last"],function(e,t){var s="take"+(t?"Right":"");xe.prototype[e]=function(){return this[s](1).value()[0]}}),B0(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");xe.prototype[e]=function(){return this.__filtered__?new xe(this):this[s](1)}}),xe.prototype.compact=function(){return this.filter(I0)},xe.prototype.find=function(e){return this.filter(e).head()},xe.prototype.findLast=function(e){return this.reverse().find(e)},xe.prototype.invokeMap=Oe(function(e,t){return typeof e=="function"?new xe(this):this.map(function(s){return Ef(s,e,t)})}),xe.prototype.reject=function(e){return this.filter(On(pe(e)))},xe.prototype.slice=function(e,t){e=Se(e);var s=this;return s.__filtered__&&(e>0||t<0)?new xe(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==n&&(t=Se(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},xe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},xe.prototype.toArray=function(){return this.take(Z)},J0(xe.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),h=b[o?"take"+(t=="last"?"Right":""):t],v=o||/^find/.test(t);!h||(b.prototype[t]=function(){var E=this.__wrapped__,I=o?[1]:arguments,R=E instanceof xe,G=I[0],q=R||Ee(E),Y=function(_e){var Pe=h.apply(b,gt([_e],I));return o&&fe?Pe[0]:Pe};q&&s&&typeof G=="function"&&G.length!=1&&(R=q=!1);var fe=this.__chain__,ue=!!this.__actions__.length,me=v&&!fe,we=R&&!ue;if(!v&&q){E=we?E:new xe(this);var be=e.apply(E,I);return be.__actions__.push({func:Sn,args:[Y],thisArg:n}),new k0(be,fe)}return me&&we?e.apply(this,I):(be=this.thru(Y),me?o?be.value()[0]:be.value():be)})}),B0(["pop","push","shift","sort","splice","unshift"],function(e){var t=Xf[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);b.prototype[e]=function(){var h=arguments;if(o&&!this.__chain__){var v=this.value();return t.apply(Ee(v)?v:[],h)}return this[s](function(E){return t.apply(Ee(E)?E:[],h)})}}),J0(xe.prototype,function(e,t){var s=b[t];if(s){var o=s.name+"";Ge.call(jt,o)||(jt[o]=[]),jt[o].push({name:t,func:s})}}),jt[yn(n,k).name]=[{name:"wrapper",func:n}],xe.prototype.clone=V6,xe.prototype.reverse=H6,xe.prototype.value=K6,b.prototype.at=A8,b.prototype.chain=E8,b.prototype.commit=I8,b.prototype.next=S8,b.prototype.plant=C8,b.prototype.reverse=R8,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=O8,b.prototype.first=b.prototype.head,mf&&(b.prototype[mf]=w8),b},Qt=I6();Ot?((Ot.exports=Qt)._=Qt,$r._=Qt):c0._=Qt}).call(He)})(sa,sa.exports);var _=sa.exports,oe;(function(r){r.Seconds="Seconds",r.Microseconds="Microseconds",r.Milliseconds="Milliseconds",r.Bytes="Bytes",r.Kilobytes="Kilobytes",r.Megabytes="Megabytes",r.Gigabytes="Gigabytes",r.Terabytes="Terabytes",r.Bits="Bits",r.Kilobits="Kilobits",r.Megabits="Megabits",r.Gigabits="Gigabits",r.Terabits="Terabits",r.Percent="Percent",r.Count="Count",r.BytesPerSecond="Bytes/Second",r.KilobytesPerSecond="Kilobytes/Second",r.MegabytesPerSecond="Megabytes/Second",r.GigabytesPerSecond="Gigabytes/Second",r.TerabytesPerSecond="Terabytes/Second",r.BitsPerSecond="Bits/Second",r.KilobitsPerSecond="Kilobits/Second",r.MegabitsPerSecond="Megabits/Second",r.GigabitsPerSecond="Gigabits/Second",r.TerabitsPerSecond="Terabits/Second",r.CountPerSecond="Count/Second",r.None="None"})(oe||(oe={}));class gb{}class vb extends gb{constructor(f){super(),this.log=M.child(f||{})}setProperty(f,n){this.log=this.log.child({[f]:n})}putDimensions(f){this.log=this.log.child(f)}putMetric(f,n,a){this.log.info({key:f,value:n,unit:a},`[Metric]: ${f}: ${n} | ${a||""}`)}}let ie=new vb;class Df{constructor(f,n,a){this.tokenCache=a,this.CACHE_KEY=i=>`token-list-token-${this.chainId}/${this.tokenList.name}/${this.tokenList.timestamp}/${this.tokenList.version}/${i.address.toLowerCase()}/${i.decimals}/${i.symbol}/${i.name}`,this.chainId=f,this.tokenList=n,this.chainToTokenInfos=_.reduce(this.tokenList.tokens,(i,c)=>{const l=c.chainId.toString();return i[l]||(i[l]=[]),i[l].push(c),i},{}),this.chainSymbolToTokenInfo=_.mapValues(this.chainToTokenInfos,i=>_.keyBy(i,"symbol")),this.chainAddressToTokenInfo=_.mapValues(this.chainToTokenInfos,i=>_.keyBy(i,c=>c.address.toLowerCase()))}static async fromTokenListURI(f,n,a){const i=Date.now(),c=await this.buildTokenList(n);return ie.putMetric("TokenListLoad",Date.now()-i,oe.Milliseconds),new Df(f,c,a)}static async buildTokenList(f){M.info(`Getting tokenList from ${f}.`);const n=await xa.get(f);M.info(`Got tokenList from ${f}.`);const{data:a,status:i}=n;if(i!=200)throw M.error({response:n},`Unabled to get token list from ${f}.`),new Error(`Unable to get token list from ${f}`);return a}static async fromTokenList(f,n,a){const i=Date.now(),c=new Df(f,n,a);return ie.putMetric("TokenListLoad",Date.now()-i,oe.Milliseconds),c}async getTokens(f){const n={},a={};for(const i of f){const c=await this.getTokenByAddress(i);!c||(n[i.toLowerCase()]=c,c.symbol&&(a[c.symbol.toLowerCase()]=c))}return{getTokenByAddress:i=>n[i.toLowerCase()],getTokenBySymbol:i=>a[i.toLowerCase()],getAllTokens:()=>Object.values(n)}}async getTokenBySymbol(f){let n=f;if(f=="ETH"&&(n="WETH"),!this.chainSymbolToTokenInfo[this.chainId.toString()])return;const a=this.chainSymbolToTokenInfo[this.chainId.toString()][n];return a?await this.buildToken(a):void 0}async getTokenByAddress(f){if(!this.chainAddressToTokenInfo[this.chainId.toString()])return;const n=this.chainAddressToTokenInfo[this.chainId.toString()][f.toLowerCase()];return n?await this.buildToken(n):void 0}async buildToken(f){const n=this.CACHE_KEY(f),a=await this.tokenCache.get(n);if(a)return a;const i=new W(this.chainId,f.address,f.decimals,f.symbol,f.name);return await this.tokenCache.set(n,i),i}}var p;(function(r){r[r.MAINNET=1]="MAINNET",r[r.ROPSTEN=3]="ROPSTEN",r[r.RINKEBY=4]="RINKEBY",r[r.G\u00D6RLI=5]="G\xD6RLI",r[r.KOVAN=42]="KOVAN",r[r.OPTIMISM=10]="OPTIMISM",r[r.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",r[r.OPTIMISTIC_KOVAN=69]="OPTIMISTIC_KOVAN",r[r.ARBITRUM_ONE=42161]="ARBITRUM_ONE",r[r.ARBITRUM_RINKEBY=421611]="ARBITRUM_RINKEBY",r[r.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",r[r.POLYGON=137]="POLYGON",r[r.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",r[r.CELO=42220]="CELO",r[r.CELO_ALFAJORES=44787]="CELO_ALFAJORES",r[r.GNOSIS=100]="GNOSIS",r[r.MOONBEAM=1284]="MOONBEAM",r[r.BSC=56]="BSC"})(p||(p={}));p.MAINNET,p.RINKEBY,p.ROPSTEN,p.KOVAN,p.OPTIMISM,p.OPTIMISM_GOERLI,p.OPTIMISTIC_KOVAN,p.ARBITRUM_ONE,p.ARBITRUM_RINKEBY,p.ARBITRUM_GOERLI,p.POLYGON,p.POLYGON_MUMBAI,p.G\u00D6RLI,p.CELO_ALFAJORES,p.CELO,p.BSC;const Tb=[p.MAINNET,p.KOVAN,p.G\u00D6RLI,p.RINKEBY,p.ROPSTEN],J1=[p.OPTIMISM,p.OPTIMISM_GOERLI,p.OPTIMISTIC_KOVAN,p.ARBITRUM_ONE,p.ARBITRUM_RINKEBY,p.ARBITRUM_GOERLI],Ab=[p.MAINNET,p.ROPSTEN,p.RINKEBY,p.G\u00D6RLI,p.KOVAN,p.OPTIMISM,p.OPTIMISTIC_KOVAN,p.ARBITRUM_ONE,p.ARBITRUM_RINKEBY,p.POLYGON,p.POLYGON_MUMBAI],Eb=r=>{switch(r){case 1:return p.MAINNET;case 3:return p.ROPSTEN;case 4:return p.RINKEBY;case 5:return p.G\u00D6RLI;case 42:return p.KOVAN;case 56:return p.BSC;case 10:return p.OPTIMISM;case 420:return p.OPTIMISM_GOERLI;case 69:return p.OPTIMISTIC_KOVAN;case 42161:return p.ARBITRUM_ONE;case 421611:return p.ARBITRUM_RINKEBY;case 421613:return p.ARBITRUM_GOERLI;case 137:return p.POLYGON;case 80001:return p.POLYGON_MUMBAI;case 42220:return p.CELO;case 44787:return p.CELO_ALFAJORES;case 100:return p.GNOSIS;case 1284:return p.MOONBEAM;default:throw new Error(`Unknown chain id: ${r}`)}};var s0;(function(r){r.MAINNET="mainnet",r.ROPSTEN="ropsten",r.RINKEBY="rinkeby",r.G\u00D6RLI="goerli",r.KOVAN="kovan",r.OPTIMISM="optimism-mainnet",r.OPTIMISM_GOERLI="optimism-goerli",r.OPTIMISTIC_KOVAN="optimism-kovan",r.ARBITRUM_ONE="arbitrum-mainnet",r.ARBITRUM_RINKEBY="arbitrum-rinkeby",r.ARBITRUM_GOERLI="arbitrum-goerli",r.POLYGON="polygon-mainnet",r.POLYGON_MUMBAI="polygon-mumbai",r.CELO="celo-mainnet",r.CELO_ALFAJORES="celo-alfajores",r.GNOSIS="gnosis-mainnet",r.MOONBEAM="moonbeam-mainnet",r.BSC="bsc-mainnet"})(s0||(s0={}));var a0;(function(r){r.ETHER="ETH",r.MATIC="MATIC",r.CELO="CELO",r.GNOSIS="XDAI",r.MOONBEAM="GLMR",r.BNB="BNB"})(a0||(a0={}));p.MAINNET+"",p.RINKEBY+"",p.G\u00D6RLI+"",p.KOVAN+"",p.ROPSTEN+"",p.OPTIMISM+"",p.OPTIMISM_GOERLI+"",p.OPTIMISTIC_KOVAN+"",p.ARBITRUM_ONE+"",p.ARBITRUM_RINKEBY+"",p.ARBITRUM_GOERLI+"",p.POLYGON+"",p.POLYGON_MUMBAI+"",p.CELO+"",p.CELO_ALFAJORES+"",p.GNOSIS+"",p.MOONBEAM+"",p.BSC+"";p.MAINNET+"",a0.ETHER,p.ROPSTEN+"",a0.ETHER,p.RINKEBY+"",a0.ETHER,p.G\u00D6RLI+"",a0.ETHER,p.KOVAN+"",a0.ETHER,p.OPTIMISM+"",a0.ETHER,p.OPTIMISM_GOERLI+"",a0.ETHER,p.OPTIMISTIC_KOVAN+"",a0.ETHER,p.ARBITRUM_ONE+"",a0.ETHER,p.ARBITRUM_RINKEBY+"",a0.ETHER,p.ARBITRUM_GOERLI+"",a0.ETHER,p.POLYGON+"",a0.MATIC,p.POLYGON_MUMBAI+"",a0.MATIC,p.CELO+"",a0.CELO,p.CELO_ALFAJORES+"",a0.CELO,p.GNOSIS+"",a0.GNOSIS,p.MOONBEAM+"",a0.MOONBEAM,p.BSC+"",a0.BNB;const Ib=r=>{switch(r){case 1:return s0.MAINNET;case 3:return s0.ROPSTEN;case 4:return s0.RINKEBY;case 5:return s0.G\u00D6RLI;case 42:return s0.KOVAN;case 56:return s0.BSC;case 10:return s0.OPTIMISM;case 420:return s0.OPTIMISM_GOERLI;case 69:return s0.OPTIMISTIC_KOVAN;case 42161:return s0.ARBITRUM_ONE;case 421611:return s0.ARBITRUM_RINKEBY;case 421613:return s0.ARBITRUM_GOERLI;case 137:return s0.POLYGON;case 80001:return s0.POLYGON_MUMBAI;case 42220:return s0.CELO;case 44787:return s0.CELO_ALFAJORES;case 100:return s0.GNOSIS;case 1284:return s0.MOONBEAM;default:throw new Error(`Unknown chain id: ${r}`)}};Object.values(p).map(r=>r.toString());const he={[p.MAINNET]:new W(1,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),[p.ROPSTEN]:new W(3,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),[p.RINKEBY]:new W(4,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),[p.G\u00D6RLI]:new W(5,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),[p.KOVAN]:new W(42,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),[p.BSC]:new W(56,"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",18,"WBNB","Wrapped BNB"),[p.OPTIMISM]:new W(p.OPTIMISM,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),[p.OPTIMISM_GOERLI]:new W(p.OPTIMISM_GOERLI,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),[p.OPTIMISTIC_KOVAN]:new W(p.OPTIMISTIC_KOVAN,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),[p.ARBITRUM_ONE]:new W(p.ARBITRUM_ONE,"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",18,"WETH","Wrapped Ether"),[p.ARBITRUM_RINKEBY]:new W(p.ARBITRUM_RINKEBY,"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681",18,"WETH","Wrapped Ether"),[p.ARBITRUM_GOERLI]:new W(p.ARBITRUM_GOERLI,"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",18,"WETH","Wrapped Ether"),[p.POLYGON]:new W(p.POLYGON,"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",18,"WMATIC","Wrapped MATIC"),[p.POLYGON_MUMBAI]:new W(p.POLYGON_MUMBAI,"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",18,"WMATIC","Wrapped MATIC"),[p.CELO]:new W(p.CELO,"0x471EcE3750Da237f93B8E339c536989b8978a438",18,"CELO","Celo native asset"),[p.CELO_ALFAJORES]:new W(p.CELO_ALFAJORES,"0xF194afDf50B03e69Bd7D057c1Aa9e10c9954E4C9",18,"CELO","Celo native asset"),[p.GNOSIS]:new W(p.GNOSIS,"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",18,"WXDAI","Wrapped XDAI on Gnosis"),[p.MOONBEAM]:new W(p.MOONBEAM,"0xAcc15dC74880C9944775448304B263D191c6077F",18,"WGLMR","Wrapped GLMR")};class Da extends Fh{get wrapped(){if(this.chainId in he)return he[this.chainId];throw new Error("Unsupported chain ID")}static onChain(f){var n;return(n=this._cachedExtendedEther[f])!==null&&n!==void 0?n:this._cachedExtendedEther[f]=new Da(f)}}Da._cachedExtendedEther={};const Z1="0xAfE208a311B21f13EF87E33A90049fC17A7acDEc",eu="0x82825d0554fA07f7FC52Ab63c961F330fdEFa8E8",tu="0x633987602DE5C4F337e3DbF265303A1080324204",Sb="0x4893376342d5D7b3e31d4184c08b265e5aB2A3f6",wb="0x1dd92b83591781D0C6d98d07391eea4b9a6008FA",Cb="0x8260CB40247290317a4c062F3542622367F206Ee",Rb="0xB656dA17129e7EB733A557f4EBc57B76CFbB5d10",Ob="0x9569CbA925c8ca2248772A9A4976A516743A246F",_b="0x07F2D8a2a02251B62af965f22fC4744A5f96BCCd",xb="0xdB1d10011AD0Ff90774D0C6Bb92e5C5c8b4461F7",Db="0x78D78E420Da98ad378D7799bE8f4AF69033EB077",Pb="0x963Df249eD09c358A4819E39d9Cd5736c3087184",Bb="0xB971eF87ede563556b2ED4b1C0b0019111Dd85d2",Mu={...Ba(Uh),[p.CELO]:Z1,[p.CELO_ALFAJORES]:Z1,[p.OPTIMISM_GOERLI]:Rb,[p.ARBITRUM_GOERLI]:Sb,[p.BSC]:xb},Mb={...Ba("0x61fFE014bA17989E743c5F6cB21bF9697530B21e"),[p.CELO]:eu,[p.CELO_ALFAJORES]:eu,[p.OPTIMISM_GOERLI]:Ob,[p.ARBITRUM_GOERLI]:wb,[p.BSC]:Db},kb={[p.MAINNET]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[p.RINKEBY]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[p.ROPSTEN]:"0x84E44095eeBfEC7793Cd7d5b57B7e401D7f1cA2E",[p.G\u00D6RLI]:"0xBa60b6e6fF25488308789E6e0A65D838be34194e"},Fb={...Ba("0x1F98415757620B543A52E61c46B32eB19261F984"),[p.CELO]:tu,[p.CELO_ALFAJORES]:tu,[p.OPTIMISM_GOERLI]:_b,[p.ARBITRUM_GOERLI]:Cb,[p.BSC]:Pb},Pa=r=>r==p.BSC?Bb:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45",Ub="0x420000000000000000000000000000000000000F",Nb="0x000000000000000000000000000000000000006C";function Ba(r,f=[]){return Ab.concat(f).reduce((n,a)=>(n[a]=r,n),{})}p.MAINNET+"",new W(p.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),p.ROPSTEN+"",new W(p.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),p.RINKEBY+"",new W(p.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),p.G\u00D6RLI+"",new W(p.G\u00D6RLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),p.KOVAN+"",new W(p.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),p.OPTIMISM+"",new W(p.OPTIMISM,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),p.OPTIMISM_GOERLI+"",new W(p.OPTIMISM_GOERLI,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),p.OPTIMISTIC_KOVAN+"",new W(p.OPTIMISTIC_KOVAN,"0x4200000000000000000000000000000000000006",18,"WETH","Wrapped Ether"),p.ARBITRUM_ONE+"",new W(p.ARBITRUM_ONE,"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",18,"WETH","Wrapped Ether"),p.ARBITRUM_RINKEBY+"",new W(p.ARBITRUM_RINKEBY,"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681",18,"WETH","Wrapped Ether"),p.ARBITRUM_GOERLI+"",new W(p.ARBITRUM_GOERLI,"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",18,"WETH","Wrapped Ether");class De extends gu{}function ku(r){switch(r){case"10000":return ke.HIGH;case"3000":return ke.MEDIUM;case"500":return ke.LOW;case"100":return ke.LOWEST;default:throw new Error(`Fee amount ${r} not supported.`)}}function Fu(r){switch(r){case ke.HIGH:return"10000";case ke.MEDIUM:return"3000";case ke.LOW:return"500";case ke.LOWEST:return"100";default:throw new Error(`Fee amount ${r} not supported.`)}}const z0=r=>{const f=[],n=r.protocol===ge.exports.Protocol.V3?r.tokenPath:r.path,a=_.map(n,l=>`${l.symbol}`),i=r.protocol===ge.exports.Protocol.V3||r.protocol===ge.exports.Protocol.MIXED?r.pools:r.pairs,c=_.map(i,l=>`${l instanceof mt?` -- ${l.fee/1e4}% [${mt.getAddress(l.token0,l.token1,l.fee,void 0,Mu[l.chainId])}]`:` -- [${sf.getAddress(l.token0,l.token1)}]`} --> `);for(let l=0;l<a.length;l++)f.push(a[l]),l<c.length&&f.push(c[l]);return f.join("")},Uu=r=>{const f=_.reduce(r,(a,i)=>a.add(i.amount),De.fromRawAmount(r[0].amount.currency,0)),n=_.map(r,({protocol:a,route:i,amount:c})=>{const l=c.divide(f),d=new vu(l.numerator,l.denominator);return`[${a==ge.exports.Protocol.MIXED?"V2 + V3":a}] ${d.toFixed(2)}% = ${z0(i)}`});return _.join(n,", ")},Xn=r=>`${r.token0.symbol}/${r.token1.symbol}${r instanceof mt?`/${r.fee/1e4}%`:""}`,aa=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class ia{static createInterface(){return new G0(aa)}static connect(f,n){return new q0(f,aa,n)}}ia.abi=aa;const kf=new W(p.MAINNET,"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",6,"USDC","USD//C"),Ff=new W(p.MAINNET,"0xdAC17F958D2ee523a2206206994597C13D831ec7",6,"USDT","Tether USD"),jn=new W(p.MAINNET,"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",8,"WBTC","Wrapped BTC"),Uf=new W(p.MAINNET,"0x6B175474E89094C44Da98b954EedeAC495271d0F",18,"DAI","Dai Stablecoin"),Lb=new W(p.MAINNET,"0x956F47F50A910163D8BF957Cf5846D573E7f87CA",18,"FEI","Fei USD");new W(p.MAINNET,"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",18,"UNI","Uniswap");const Nu=new W(p.ROPSTEN,"0x07865c6e87b9f70255377e024ace6630c1eaa37f",6,"USDC","USD//C"),Lu=new W(p.ROPSTEN,"0x516de3a7a567d81737e3a46ec4ff9cfd1fcb0136",6,"USDT","Tether USD"),Gu=new W(p.ROPSTEN,"0xad6d458402f60fd3bd25163575031acdce07538d",18,"DAI","Dai Stablecoin"),Nf=new W(p.RINKEBY,"0x5592ec0cfb4dbc12d3ab100b257153436a1f0fea",18,"DAI","DAI"),Lf=new W(p.RINKEBY,"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735",18,"DAI","DAI"),Gb=new W(p.RINKEBY,"0x4DBCdF9B62e891a7cec5A2568C3F4FAF9E8Abe2b",6,"tUSDC","test USD//C"),qb=new W(p.RINKEBY,"0xa689352b7c1cad82864beb1d90679356d3962f4d",18,"USDT","Tether USD"),qu=new W(p.G\u00D6RLI,"0x07865c6e87b9f70255377e024ace6630c1eaa37f",6,"USDC","USD//C"),$u=new W(p.G\u00D6RLI,"0xe583769738b6dd4e7caf8451050d1948be717679",18,"USDT","Tether USD"),Wu=new W(p.G\u00D6RLI,"0xa0a5ad2296b38bd3e3eb59aaeaf1589e8d9a29a9",8,"WBTC","Wrapped BTC"),Vu=new W(p.G\u00D6RLI,"0x11fe4b6ae13d2a6055c8d9cf65c55bac32b5d844",18,"DAI","Dai Stablecoin");new W(p.G\u00D6RLI,"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",18,"UNI","Uni token");const Hu=new W(p.KOVAN,"0x31eeb2d0f9b6fd8642914ab10f4dd473677d80df",6,"USDC","USD//C"),Ku=new W(p.KOVAN,"0xa325f1b1ebb748715dfbbaf62e0c6677e137f45d",18,"USDT","Tether USD"),$b=new W(p.KOVAN,"0xe36bc5d8b689ad6d80e78c3e736670e80d4b329d",8,"WBTC","Wrapped BTC"),Qu=new W(p.KOVAN,"0x9dc7b33c3b63fc00ed5472fbd7813edda6a64752",18,"DAI","Dai Stablecoin"),zn=new W(p.OPTIMISM,"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",6,"USDC","USD//C"),Jn=new W(p.OPTIMISM,"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",6,"USDT","Tether USD"),Ma=new W(p.OPTIMISM,"0x68f180fcCe6836688e9084f035309E29Bf0A2095",8,"WBTC","Wrapped BTC"),Zn=new W(p.OPTIMISM,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),Wb=new W(p.OPTIMISM,"0x4200000000000000000000000000000000000042",18,"OP","Optimism"),er=new W(p.OPTIMISM_GOERLI,"0x7E07E15D2a87A24492740D16f5bdF58c16db0c4E",6,"USDC","USD//C"),tr=new W(p.OPTIMISM_GOERLI,"0x853eb4bA5D0Ba2B77a0A5329Fd2110d5CE149ECE",6,"USDT","Tether USD"),ka=new W(p.OPTIMISM_GOERLI,"0xe0a592353e81a94Db6E3226fD4A99F881751776a",8,"WBTC","Wrapped BTC"),fr=new W(p.OPTIMISM_GOERLI,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),nr=new W(p.OPTIMISTIC_KOVAN,"0x3b8e53b3ab8e01fb57d0c9e893bc4d655aa67d84",6,"USDC","USD//C"),rr=new W(p.OPTIMISTIC_KOVAN,"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",6,"USDT","Tether USD"),Fa=new W(p.OPTIMISTIC_KOVAN,"0x2382a8f65b9120E554d1836a504808aC864E169d",8,"WBTC","Wrapped BTC"),sr=new W(p.OPTIMISTIC_KOVAN,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),ar=new W(p.ARBITRUM_ONE,"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",6,"USDC","USD//C"),ir=new W(p.ARBITRUM_ONE,"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",6,"USDT","Tether USD"),Ua=new W(p.ARBITRUM_ONE,"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",8,"WBTC","Wrapped BTC"),or=new W(p.ARBITRUM_ONE,"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",18,"DAI","Dai Stablecoin"),Vb=new W(p.ARBITRUM_ONE,"0x912CE59144191C1204E64559FE8253a0e49E6548",18,"ARB","Arbitrum"),ur=new W(p.ARBITRUM_RINKEBY,"0x5364dc963c402aaf150700f38a8ef52c1d7d7f14",18,"DAI","Dai Stablecoin");new W(p.ARBITRUM_GOERLI,"0x0000000000000000000000000000000000000000",18,"DAI","Dai Stablecoin");const cr=new W(p.ARBITRUM_RINKEBY,"0x920b9301c2de92186299cd2abc7199e25b9728b3",6,"UDST","Tether USD"),Hb=new W(p.ARBITRUM_RINKEBY,"0x09b98f8b2395d076514037ff7d39a091a536206c",6,"USDC","USD//C"),Yu=new W(p.ARBITRUM_RINKEBY,"0x049251a7175071316e089d0616d8b6aacd2c93b8",18,"UNI","Uni token"),dr=new W(p.ARBITRUM_GOERLI,"0x8FB1E3fC51F3b789dED7557E680551d93Ea9d892",6,"USDC","USD//C"),lr=new W(p.POLYGON,"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",18,"WMATIC","Wrapped MATIC"),Kb=new W(p.POLYGON,"0x7ceb23fd6bc0add59e62ac25578270cff1b9f619",18,"WETH","Wrapped Ether"),pr=new W(p.POLYGON,"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",6,"USDC","USD//C");new W(p.POLYGON,"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",18,"DAI","Dai Stablecoin");const Na=new W(p.POLYGON_MUMBAI,"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",18,"WMATIC","Wrapped MATIC");new W(p.POLYGON_MUMBAI,"0xe11a86849d99f524cac3e7a0ec1241828e332c62",6,"USDC","USD//C");const hr=new W(p.POLYGON_MUMBAI,"0x001b3b4d0f3714ca98ba10f6042daebf0b1b7b6f",18,"DAI","Dai Stablecoin");new W(p.POLYGON_MUMBAI,"0xa6fa4fb5f76172d178d61b04b0ecd319c5d1c0aa",18,"WETH","Wrapped Ether");const Xu=new W(p.BSC,"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",18,"BTCB","Binance BTC"),ju=new W(p.BSC,"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",18,"BUSD","BUSD"),mr=new W(p.BSC,"0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3",18,"DAI","DAI"),zu=new W(p.BSC,"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",18,"ETH","ETH"),br=new W(p.BSC,"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",18,"USDC","USDC"),yr=new W(p.BSC,"0x55d398326f99059fF775485246999027B3197955",18,"USDT","USDT"),La=new W(p.CELO,"0x471EcE3750Da237f93B8E339c536989b8978a438",18,"CELO","Celo native asset"),Ju=new W(p.CELO,"0xE4fE50cdD716522A56204352f00AA110F731932d",18,"DAI","Dai Stablecoin"),gr=new W(p.CELO,"0x765DE816845861e75A25fCA122bb6898B8B1282a",18,"CUSD","Celo Dollar Stablecoin"),Ga=new W(p.CELO,"0xD8763CBa276a3738E6DE85b4b3bF5FDed6D6cA73",18,"CEUR","Celo Euro Stablecoin"),qa=new W(p.CELO_ALFAJORES,"0xF194afDf50B03e69Bd7D057c1Aa9e10c9954E4C9",18,"CELO","Celo native asset"),Zu=new W(p.CELO_ALFAJORES,"0x7d91E51C8F218f7140188A155f5C75388630B6a8",18,"DAI","Dai Stablecoin"),Pf=new W(p.CELO_ALFAJORES,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1",18,"CUSD","Celo Dollar Stablecoin"),ec=new W(p.CELO_ALFAJORES,"0x10c892A6EC43a53E45D0B916B4b7D383B1b78C0F",18,"CEUR","Celo Euro Stablecoin"),vr=new W(p.GNOSIS,"0xddafbb505ad214d7b80b1f830fccc89b60fb7a83",6,"USDC","USDC from Ethereum on Gnosis"),tc=new W(p.GNOSIS,"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",18,"WXDAI","Wrapped XDAI on Gnosis"),fc=new W(p.GNOSIS,"0x8e5bbbb09ed1ebde8674cda39a0c169401db4252",8,"WBTC","Wrapped BTC from Ethereum on Gnosis"),Tr=new W(p.MOONBEAM,"0x818ec0A7Fe18Ff94269904fCED6AE3DaE6d6dC0b",6,"USDC","USD Coin bridged using Multichain"),Qb=new W(p.MOONBEAM,"0xAcc15dC74880C9944775448304B263D191c6077F",18,"WGLMR","Wrapped GLMR"),$a=new W(p.MOONBEAM,"0x818ec0A7Fe18Ff94269904fCED6AE3DaE6d6dC0b",6,"DAI","Dai on moonbeam bridged using Multichain"),Wa=new W(p.MOONBEAM,"0x922D641a426DcFFaeF11680e5358F34d97d112E1",8,"WBTC","Wrapped BTC bridged using Multichain");class Yb{constructor(f,n){this.chainId=f,this.multicall2Provider=n}async getTokens(f,n){const a={},i={},c=_(f).map(l=>l.toLowerCase()).uniq().value();if(c.length>0){const[l,d]=await Promise.all([this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:c,contractInterface:ia.createInterface(),functionName:"symbol",providerConfig:n}),this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:c,contractInterface:ia.createInterface(),functionName:"decimals",providerConfig:n})]),{results:u}=l,{results:m}=d;for(let y=0;y<c.length;y++){const g=c[y],T=u[y],A=m[y];if(!(T!=null&&T.success)||!(A!=null&&A.success)){M.info({symbolResult:T,decimalResult:A},`Dropping token with address ${g} as symbol or decimal are invalid`);continue}const S=T.result[0],w=A.result[0];a[g.toLowerCase()]=new W(this.chainId,g,w,S),i[S.toLowerCase()]=a[g.toLowerCase()]}M.info(`Got token symbol and decimals for ${Object.values(a).length} out of ${c.length} tokens on-chain ${n?`as of: ${n==null?void 0:n.blockNumber}`:""}`)}return{getTokenByAddress:l=>a[l.toLowerCase()],getTokenBySymbol:l=>i[l.toLowerCase()],getAllTokens:()=>Object.values(a)}}}const Xb={[p.MAINNET]:{WETH:he[p.MAINNET],USDC:kf,USDT:Ff,WBTC:jn,DAI:Uf,RING:new W(p.MAINNET,"0x9469D013805bFfB7D3DEBe5E7839237e535ec483",18,"RING","RING")},[p.RINKEBY]:{WETH:he[p.RINKEBY],DAI_1:Nf,DAI_2:Lf},[p.OPTIMISM]:{USDC:zn,USDT:Jn,WBTC:Ma,DAI:Zn},[p.OPTIMISM_GOERLI]:{USDC:er,USDT:tr,WBTC:ka,DAI:fr},[p.OPTIMISTIC_KOVAN]:{USDC:nr,USDT:rr,WBTC:Fa,DAI:sr},[p.ARBITRUM_ONE]:{USDC:ar,USDT:ir,WBTC:Ua,DAI:or},[p.ARBITRUM_RINKEBY]:{USDT:cr,UNI:Yu,DAI:ur,USDC:Hb},[p.ARBITRUM_GOERLI]:{USDC:dr},[p.POLYGON]:{WMATIC:lr,USDC:pr},[p.POLYGON_MUMBAI]:{WMATIC:Na,DAI:hr},[p.CELO]:{CELO:La,CUSD:gr,CEUR:Ga,DAI:Ju},[p.CELO_ALFAJORES]:{CELO:qa,CUSD:Pf,CEUR:Pf,DAI:Zu},[p.GNOSIS]:{WXDAI:he[p.GNOSIS],USDC_ETHEREUM_GNOSIS:vr},[p.MOONBEAM]:{USDC:Tr,DAI:$a,WBTC:Wa,WGLMR:he[p.MOONBEAM]},[p.BSC]:{USDC:br,USDT:yr,BUSD:ju,ETH:zu,DAI:mr,BTC:Xu,WBNB:he[p.BSC]}};class jb{constructor(f,n,a,i){this.chainId=f,this.tokenCache=n,this.primaryTokenProvider=a,this.fallbackTokenProvider=i,this.CACHE_KEY=(c,l)=>`token-${c}-${l}`}async getTokens(f){const n=Xb[this.chainId];if(n)for(const u of Object.values(n))await this.tokenCache.set(this.CACHE_KEY(this.chainId,u.address.toLowerCase()),u);const a={},i={},c=_(f).map(u=>u.toLowerCase()).uniq().value(),l=[],d=[];for(const u of c)await this.tokenCache.has(this.CACHE_KEY(this.chainId,u))?(a[u.toLowerCase()]=await this.tokenCache.get(this.CACHE_KEY(this.chainId,u)),i[a[u].symbol]=await this.tokenCache.get(this.CACHE_KEY(this.chainId,u))):l.push(u);if(M.info({addressesToFindInPrimary:l},`Found ${c.length-l.length} out of ${c.length} tokens in local cache. ${l.length>0?`Checking primary token provider for ${l.length} tokens`:""}
      `),l.length>0){const u=await this.primaryTokenProvider.getTokens(l);for(const m of l){const y=u.getTokenByAddress(m);y?(a[m.toLowerCase()]=y,i[a[m].symbol]=y,await this.tokenCache.set(this.CACHE_KEY(this.chainId,m.toLowerCase()),a[m])):d.push(m)}M.info({addressesToFindInSecondary:d},`Found ${l.length-d.length} tokens in primary. ${this.fallbackTokenProvider?`Checking secondary token provider for ${d.length} tokens`:"No fallback token provider specified. About to return."}`)}if(this.fallbackTokenProvider&&d.length>0){const u=await this.fallbackTokenProvider.getTokens(d);for(const m of d){const y=u.getTokenByAddress(m);y&&(a[m.toLowerCase()]=y,i[a[m].symbol]=y,await this.tokenCache.set(this.CACHE_KEY(this.chainId,m.toLowerCase()),a[m]))}}return{getTokenByAddress:u=>a[u.toLowerCase()],getTokenBySymbol:u=>i[u.toLowerCase()],getAllTokens:()=>Object.values(a)}}}class Ar{}const zb=50,Jb=4;class Zb extends Ar{constructor(f,n=zb,a=Jb){super(),this.provider=f,this.priorityFeePercentile=n,this.blocksToConsider=a}async getGasPrice(){const f=await this.provider.send("eth_feeHistory",[ye.from(this.blocksToConsider).toHexString().replace("0x0","0x"),"latest",[this.priorityFeePercentile]]),n={baseFeePerGas:_.map(f.baseFeePerGas,d=>ye.from(d)),gasUsedRatio:f.gasUsedRatio,oldestBlock:ye.from(f.oldestBlock),reward:_.map(f.reward,d=>ye.from(d[0]))},a=n.baseFeePerGas[n.baseFeePerGas.length-1],i=_.reduce(n.reward,(d,u)=>d.add(u),ye.from(0)).div(n.reward.length);M.info({feeHistory:n,feeHistoryReadable:{baseFeePerGas:_.map(n.baseFeePerGas,d=>d.toString()),oldestBlock:n.oldestBlock.toString(),reward:_.map(n.reward,d=>d.toString())},nextBlockBaseFeePerGas:a.toString(),averagePriorityFeePerGas:i.toString()},"Got fee history from provider and computed gas estimate");const c=a.add(i),l=n.oldestBlock.add(this.blocksToConsider);return M.info(`Estimated gas price in wei: ${c} as of block ${l.toString()}`),{gasPriceWei:c}}}const e3="Uniswap Labs List",t3="2021-12-21T23:59:15.901Z",f3={major:2,minor:3,patch:0},n3={},r3="ipfs://QmNa8mQkrNKp1WEEeGjFezDmDeodkWRevGFN8JCV7b4Xir",s3=["uniswap","default"],a3=[{chainId:1,address:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9",name:"Aave",symbol:"AAVE",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12645/thumb/AAVE.png?1601374110"},{chainId:1,address:"0xfF20817765cB7f73d4bde2e66e067E58D11095C2",name:"Amp",symbol:"AMP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12409/thumb/amp-200x200.png?1599625397"},{name:"Aragon Network Token",address:"0x960b236A07cf122663c4303350609A66A7B288C0",symbol:"ANT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x960b236A07cf122663c4303350609A66A7B288C0/logo.png"},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3D",symbol:"BAL",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xba100000625a3754423978a60c9317c58a424e3D/logo.png"},{chainId:1,address:"0xBA11D00c5f74255f56a5E366F4F77f5A186d7f55",name:"Band Protocol",symbol:"BAND",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/9545/thumb/band-protocol.png?1568730326"},{name:"Bancor Network Token",address:"0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C",symbol:"BNT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C/logo.png"},{name:"Compound",address:"0xc00e94Cb662C3520282E6f5717214004A7f26888",symbol:"COMP",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc00e94Cb662C3520282E6f5717214004A7f26888/logo.png"},{name:"Curve DAO Token",address:"0xD533a949740bb3306d119CC777fa900bA034cd52",symbol:"CRV",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xD533a949740bb3306d119CC777fa900bA034cd52/logo.png"},{chainId:1,address:"0x41e5560054824eA6B0732E656E3Ad64E20e94E45",name:"Civic",symbol:"CVC",decimals:8,logoURI:"https://assets.coingecko.com/coins/images/788/thumb/civic.png?1547034556"},{name:"Dai Stablecoin",address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",symbol:"DAI",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B175474E89094C44Da98b954EedeAC495271d0F/logo.png"},{chainId:1,address:"0x0AbdAce70D3790235af448C88547603b945604ea",name:"district0x",symbol:"DNT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/849/thumb/district0x.png?1547223762"},{chainId:1,address:"0xC18360217D8F7Ab5e7c516566761Ea12Ce7F9D72",name:"Ethereum Name Service",symbol:"ENS",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/19785/thumb/acatxTm8_400x400.jpg?1635850140"},{name:"Gnosis Token",address:"0x6810e776880C02933D47DB1b9fc05908e5386b96",symbol:"GNO",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6810e776880C02933D47DB1b9fc05908e5386b96/logo.png"},{chainId:1,address:"0xc944E90C64B2c07662A292be6244BDf05Cda44a7",name:"The Graph",symbol:"GRT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/13397/thumb/Graph_Token.png?1608145566"},{chainId:1,address:"0x85Eee30c52B0b379b046Fb0F85F4f3Dc3009aFEC",name:"Keep Network",symbol:"KEEP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3373/thumb/IuNzUb5b_400x400.jpg?1589526336"},{name:"Kyber Network Crystal",address:"0xdd974D5C2e2928deA5F71b9825b8b646686BD200",symbol:"KNC",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdd974D5C2e2928deA5F71b9825b8b646686BD200/logo.png"},{name:"ChainLink Token",address:"0x514910771AF9Ca656af840dff83E8264EcF986CA",symbol:"LINK",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png"},{name:"Loom Network",address:"0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0",symbol:"LOOM",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0/logo.png"},{name:"LoopringCoin V2",address:"0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD",symbol:"LRC",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD/logo.png"},{chainId:1,address:"0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",name:"Decentraland",symbol:"MANA",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/878/thumb/decentraland-mana.png?1550108745"},{chainId:1,address:"0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0",name:"Polygon",symbol:"MATIC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"},{name:"Maker",address:"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2",symbol:"MKR",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2/logo.png"},{chainId:1,address:"0xec67005c4E498Ec7f55E092bd1d35cbC47C91892",name:"Melon",symbol:"MLN",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/605/thumb/melon.png?1547034295"},{name:"Numeraire",address:"0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671",symbol:"NMR",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671/logo.png"},{chainId:1,address:"0x4fE83213D56308330EC302a8BD641f1d0113A4Cc",name:"NuCypher",symbol:"NU",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3318/thumb/photo1198982838879365035.jpg?1547037916"},{name:"Orchid",address:"0x4575f41308EC1483f3d399aa9a2826d74Da13Deb",symbol:"OXT",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4575f41308EC1483f3d399aa9a2826d74Da13Deb/logo.png"},{name:"Republic Token",address:"0x408e41876cCCDC0F92210600ef50372656052a38",symbol:"REN",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x408e41876cCCDC0F92210600ef50372656052a38/logo.png"},{name:"Reputation Augur v1",address:"0x1985365e9f78359a9B6AD760e32412f4a445E862",symbol:"REP",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1985365e9f78359a9B6AD760e32412f4a445E862/logo.png"},{name:"Reputation Augur v2",address:"0x221657776846890989a759BA2973e427DfF5C9bB",symbol:"REPv2",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x221657776846890989a759BA2973e427DfF5C9bB/logo.png"},{name:"Synthetix Network Token",address:"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F",symbol:"SNX",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F/logo.png"},{name:"Storj Token",address:"0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC",symbol:"STORJ",decimals:8,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC/logo.png"},{name:"Synth sUSD",address:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51",symbol:"sUSD",decimals:18,chainId:1,logoURI:"https://assets.coingecko.com/coins/images/5013/thumb/sUSD.png?1616150765"},{chainId:1,address:"0x8dAEBADE922dF735c38C80C7eBD708Af50815fAa",name:"tBTC",symbol:"TBTC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11224/thumb/tBTC.png?1589620754"},{name:"UMA Voting Token v1",address:"0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828",symbol:"UMA",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:1,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"USDCoin",address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{name:"Tether USD",address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png"},{name:"Wrapped BTC",address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",symbol:"WBTC",decimals:8,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599/logo.png"},{name:"Wrapped Ether",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",symbol:"WETH",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{chainId:1,address:"0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e",name:"yearn finance",symbol:"YFI",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11849/thumb/yfi-192x192.png?1598325330"},{name:"0x Protocol Token",address:"0xE41d2489571d322189246DaFA5ebDe1F4699F498",symbol:"ZRX",decimals:18,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xE41d2489571d322189246DaFA5ebDe1F4699F498/logo.png"},{name:"Dai Stablecoin",address:"0xaD6D458402F60fD3Bd25163575031ACDce07538D",symbol:"DAI",decimals:18,chainId:3,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xaD6D458402F60fD3Bd25163575031ACDce07538D/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:3,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",symbol:"WETH",decimals:18,chainId:3,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc778417E063141139Fce010982780140Aa0cD5Ab/logo.png"},{name:"Dai Stablecoin",address:"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735",symbol:"DAI",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735/logo.png"},{name:"Maker",address:"0xF9bA5210F91D0474bd1e1DcDAeC4C58E359AaD85",symbol:"MKR",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xF9bA5210F91D0474bd1e1DcDAeC4C58E359AaD85/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:4,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",symbol:"WETH",decimals:18,chainId:4,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc778417E063141139Fce010982780140Aa0cD5Ab/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:5,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",symbol:"WETH",decimals:18,chainId:5,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6/logo.png"},{name:"Dai Stablecoin",address:"0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa",symbol:"DAI",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa/logo.png"},{name:"Maker",address:"0xAaF64BFCC32d0F15873a02163e7E500671a4ffcD",symbol:"MKR",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xAaF64BFCC32d0F15873a02163e7E500671a4ffcD/logo.png"},{name:"Uniswap",address:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984",symbol:"UNI",decimals:18,chainId:42,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"Wrapped Ether",address:"0xd0A1E359811322d97991E03f863a0C30C2cF029C",symbol:"WETH",decimals:18,chainId:42,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xd0A1E359811322d97991E03f863a0C30C2cF029C/logo.png"},{chainId:137,address:"0xD6DF932A45C0f255f85145f286eA0b292B21C90B",name:"Aave",symbol:"AAVE",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12645/thumb/AAVE.png?1601374110"},{chainId:137,address:"0x0621d647cecbFb64b79E44302c1933cB4f27054d",name:"Amp",symbol:"AMP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/12409/thumb/amp-200x200.png?1599625397"},{name:"Balancer",address:"0x9a71012B13CA4d3D0Cdc72A177DF3ef03b0E76A3",symbol:"BAL",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xba100000625a3754423978a60c9317c58a424e3D/logo.png"},{chainId:137,address:"0xA8b1E0764f85f53dfe21760e8AfE5446D82606ac",name:"Band Protocol",symbol:"BAND",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/9545/thumb/band-protocol.png?1568730326"},{name:"Bancor Network Token",address:"0xc26D47d5c33aC71AC5CF9F776D63Ba292a4F7842",symbol:"BNT",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C/logo.png"},{name:"Compound",address:"0x8505b9d2254A7Ae468c0E9dd10Ccea3A837aef5c",symbol:"COMP",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xc00e94Cb662C3520282E6f5717214004A7f26888/logo.png"},{name:"Curve DAO Token",address:"0x172370d5Cd63279eFa6d502DAB29171933a610AF",symbol:"CRV",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xD533a949740bb3306d119CC777fa900bA034cd52/logo.png"},{chainId:137,address:"0x66Dc5A08091d1968e08C16aA5b27BAC8398b02Be",name:"Civic",symbol:"CVC",decimals:8,logoURI:"https://assets.coingecko.com/coins/images/788/thumb/civic.png?1547034556"},{name:"Dai Stablecoin",address:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063",symbol:"DAI",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B175474E89094C44Da98b954EedeAC495271d0F/logo.png"},{chainId:137,address:"0xbD7A5Cf51d22930B8B3Df6d834F9BCEf90EE7c4f",name:"Ethereum Name Service",symbol:"ENS",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/19785/thumb/acatxTm8_400x400.jpg?1635850140"},{name:"Gnosis Token",address:"0x5FFD62D3C3eE2E81C00A7b9079FB248e7dF024A8",symbol:"GNO",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6810e776880C02933D47DB1b9fc05908e5386b96/logo.png"},{chainId:137,address:"0x5fe2B58c013d7601147DcdD68C143A77499f5531",name:"The Graph",symbol:"GRT",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/13397/thumb/Graph_Token.png?1608145566"},{chainId:137,address:"0x42f37A1296b2981F7C3cAcEd84c5096b2Eb0C72C",name:"Keep Network",symbol:"KEEP",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/3373/thumb/IuNzUb5b_400x400.jpg?1589526336"},{name:"Kyber Network Crystal",address:"0x324b28d6565f784d596422B0F2E5aB6e9CFA1Dc7",symbol:"KNC",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdd974D5C2e2928deA5F71b9825b8b646686BD200/logo.png"},{name:"ChainLink Token",address:"0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39",symbol:"LINK",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x514910771AF9Ca656af840dff83E8264EcF986CA/logo.png"},{name:"Loom Network",address:"0x66EfB7cC647e0efab02eBA4316a2d2941193F6b3",symbol:"LOOM",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA4e8C3Ec456107eA67d3075bF9e3DF3A75823DB0/logo.png"},{name:"LoopringCoin V2",address:"0x84e1670F61347CDaeD56dcc736FB990fBB47ddC1",symbol:"LRC",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xBBbbCA6A901c926F240b89EacB641d8Aec7AEafD/logo.png"},{chainId:137,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"Decentraland",symbol:"MANA",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/878/thumb/decentraland-mana.png?1550108745"},{name:"Maker",address:"0x6f7C932e7684666C9fd1d44527765433e01fF61d",symbol:"MKR",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2/logo.png"},{name:"Numeraire",address:"0x0Bf519071b02F22C17E7Ed5F4002ee1911f46729",symbol:"NMR",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x1776e1F26f98b1A5dF9cD347953a26dd3Cb46671/logo.png"},{name:"Orchid",address:"0x9880e3dDA13c8e7D4804691A45160102d31F6060",symbol:"OXT",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4575f41308EC1483f3d399aa9a2826d74Da13Deb/logo.png"},{name:"Republic Token",address:"0x19782D3Dc4701cEeeDcD90f0993f0A9126ed89d0",symbol:"REN",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x408e41876cCCDC0F92210600ef50372656052a38/logo.png"},{name:"Reputation Augur v2",address:"0x6563c1244820CfBd6Ca8820FBdf0f2847363F733",symbol:"REPv2",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x221657776846890989a759BA2973e427DfF5C9bB/logo.png"},{name:"Synthetix Network Token",address:"0x50B728D8D964fd00C2d0AAD81718b71311feF68a",symbol:"SNX",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F/logo.png"},{name:"Storj Token",address:"0xd72357dAcA2cF11A5F155b9FF7880E595A3F5792",symbol:"STORJ",decimals:8,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xB64ef51C888972c908CFacf59B47C1AfBC0Ab8aC/logo.png"},{name:"Synth sUSD",address:"0xF81b4Bec6Ca8f9fe7bE01CA734F55B2b6e03A7a0",symbol:"sUSD",decimals:18,chainId:137,logoURI:"https://assets.coingecko.com/coins/images/5013/thumb/sUSD.png?1616150765"},{chainId:137,address:"0x50a4a434247089848991DD8f09b889D4e2870aB6",name:"tBTC",symbol:"TBTC",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11224/thumb/tBTC.png?1589620754"},{name:"UMA Voting Token v1",address:"0x3066818837c5e6eD6601bd5a91B0762877A6B731",symbol:"UMA",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x04Fa0d235C4abf4BcF4787aF4CF447DE572eF828/logo.png"},{name:"Uniswap",address:"0xb33EaAd8d922B1083446DC23f610c2567fB5180f",symbol:"UNI",decimals:18,chainId:137,logoURI:"ipfs://QmXttGpZrECX5qCyXbBQiqgQNytVGeZW5Anewvh2jc4psg"},{name:"USDCoin",address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",symbol:"USDC",decimals:6,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{name:"Tether USD",address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",symbol:"USDT",decimals:6,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png"},{name:"Wrapped BTC",address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",symbol:"WBTC",decimals:8,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599/logo.png"},{name:"Wrapped Ether",address:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",symbol:"WETH",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{name:"Wrapped Matic",address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",symbol:"WMATIC",decimals:18,chainId:137,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"},{chainId:137,address:"0xDA537104D6A5edd53c6fBba9A898708E465260b6",name:"yearn finance",symbol:"YFI",decimals:18,logoURI:"https://assets.coingecko.com/coins/images/11849/thumb/yfi-192x192.png?1598325330"},{name:"0x Protocol Token",address:"0x5559Edb74751A0edE9DeA4DC23aeE72cCA6bE3D5",symbol:"ZRX",decimals:18,chainId:137,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xE41d2489571d322189246DaFA5ebDe1F4699F498/logo.png"},{name:"Wrapped Ether",address:"0xA6FA4fB5f76172d178d61B04b0ecd319C5d1C0aa",symbol:"WETH",decimals:18,chainId:80001,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png"},{name:"Wrapped Matic",address:"0xd0A1E359811322d97991E03f863a0C30C2cF029C",symbol:"WMATIC",decimals:18,chainId:80001,logoURI:"https://assets.coingecko.com/coins/images/4713/thumb/matic-token-icon.png?1624446912"}];var i3={name:e3,timestamp:t3,version:f3,tags:n3,logoURI:r3,keywords:s3,tokens:a3},o3=Dh;function u3(r,f){function n(a,i){var c=f||{},l;"randomize"in c||(c.randomize=!0),l=o3.operation(c);function d(y){i(y||new Error("Aborted"))}function u(y,g){if(y.bail){d(y);return}l.retry(y)?c.onRetry&&c.onRetry(y,g):i(l.mainError())}function m(y){var g;try{g=r(d,y)}catch(T){u(T,y);return}Promise.resolve(g).then(a).catch(function(A){u(A,y)})}l.attempt(m)}return new Promise(n)}var of=u3,nc={exports:{}},rc={exports:{}},sc={exports:{}};(function(r){var f=function(){function n(T,A){return A!=null&&T instanceof A}var a;try{a=Map}catch{a=function(){}}var i;try{i=Set}catch{i=function(){}}var c;try{c=Promise}catch{c=function(){}}function l(T,A,S,w,O){typeof A=="object"&&(S=A.depth,w=A.prototype,O=A.includeNonEnumerable,A=A.circular);var k=[],Q=[],$=typeof Buffer!="undefined";typeof A=="undefined"&&(A=!0),typeof S=="undefined"&&(S=1/0);function j(F,J){if(F===null)return null;if(J===0)return F;var K,te;if(typeof F!="object")return F;if(n(F,a))K=new a;else if(n(F,i))K=new i;else if(n(F,c))K=new c(function(x,V){F.then(function(ee){x(j(ee,J-1))},function(ee){V(j(ee,J-1))})});else if(l.__isArray(F))K=[];else if(l.__isRegExp(F))K=new RegExp(F.source,g(F)),F.lastIndex&&(K.lastIndex=F.lastIndex);else if(l.__isDate(F))K=new Date(F.getTime());else{if($&&Buffer.isBuffer(F))return Buffer.allocUnsafe?K=Buffer.allocUnsafe(F.length):K=new Buffer(F.length),F.copy(K),K;n(F,Error)?K=Object.create(F):typeof w=="undefined"?(te=Object.getPrototypeOf(F),K=Object.create(te)):(K=Object.create(w),te=w)}if(A){var ce=k.indexOf(F);if(ce!=-1)return Q[ce];k.push(F),Q.push(K)}n(F,a)&&F.forEach(function(x,V){var ee=j(V,J-1),se=j(x,J-1);K.set(ee,se)}),n(F,i)&&F.forEach(function(x){var V=j(x,J-1);K.add(V)});for(var le in F){var Me;te&&(Me=Object.getOwnPropertyDescriptor(te,le)),!(Me&&Me.set==null)&&(K[le]=j(F[le],J-1))}if(Object.getOwnPropertySymbols)for(var P=Object.getOwnPropertySymbols(F),le=0;le<P.length;le++){var N=P[le],L=Object.getOwnPropertyDescriptor(F,N);L&&!L.enumerable&&!O||(K[N]=j(F[N],J-1),L.enumerable||Object.defineProperty(K,N,{enumerable:!1}))}if(O)for(var B=Object.getOwnPropertyNames(F),le=0;le<B.length;le++){var H=B[le],L=Object.getOwnPropertyDescriptor(F,H);L&&L.enumerable||(K[H]=j(F[H],J-1),Object.defineProperty(K,H,{enumerable:!1}))}return K}return j(T,S)}l.clonePrototype=function(A){if(A===null)return null;var S=function(){};return S.prototype=A,new S};function d(T){return Object.prototype.toString.call(T)}l.__objToStr=d;function u(T){return typeof T=="object"&&d(T)==="[object Date]"}l.__isDate=u;function m(T){return typeof T=="object"&&d(T)==="[object Array]"}l.__isArray=m;function y(T){return typeof T=="object"&&d(T)==="[object RegExp]"}l.__isRegExp=y;function g(T){var A="";return T.global&&(A+="g"),T.ignoreCase&&(A+="i"),T.multiline&&(A+="m"),A}return l.__getRegExpFlags=g,l}();r.exports&&(r.exports=f)})(sc);(function(){var r,f,n=[].splice,a=function(c,l){if(!(c instanceof l))throw new Error("Bound instance method accessed before binding")},i=[].indexOf;f=sc.exports,r=Ph.exports.EventEmitter,rc.exports=function(){class c extends r{constructor(d={}){super(),this.get=this.get.bind(this),this.mget=this.mget.bind(this),this.set=this.set.bind(this),this.mset=this.mset.bind(this),this.del=this.del.bind(this),this.take=this.take.bind(this),this.ttl=this.ttl.bind(this),this.getTtl=this.getTtl.bind(this),this.keys=this.keys.bind(this),this.has=this.has.bind(this),this.getStats=this.getStats.bind(this),this.flushAll=this.flushAll.bind(this),this.flushStats=this.flushStats.bind(this),this.close=this.close.bind(this),this._checkData=this._checkData.bind(this),this._check=this._check.bind(this),this._isInvalidKey=this._isInvalidKey.bind(this),this._wrap=this._wrap.bind(this),this._getValLength=this._getValLength.bind(this),this._error=this._error.bind(this),this._initErrors=this._initErrors.bind(this),this.options=d,this._initErrors(),this.data={},this.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},this.options),this.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach(u=>{var m;m=this[u],this[u]=function(...y){var g,T,A,S;if(A=y,[...y]=A,[g]=n.call(y,-1),typeof g=="function")try{S=m(...y),g(null,S)}catch(w){T=w,g(T)}else return m(...y,g)}})),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.validKeyTypes=["string","number"],this._checkData()}get(d){var u,m;if(a(this,c),(m=this._isInvalidKey(d))!=null)throw m;if(this.data[d]!=null&&this._check(d,this.data[d]))return this.stats.hits++,u=this._unwrap(this.data[d]),u;this.stats.misses++}mget(d){var u,m,y,g,T,A;if(a(this,c),!Array.isArray(d))throw u=this._error("EKEYSTYPE"),u;for(A={},y=0,T=d.length;y<T;y++){if(g=d[y],(m=this._isInvalidKey(g))!=null)throw m;this.data[g]!=null&&this._check(g,this.data[g])?(this.stats.hits++,A[g]=this._unwrap(this.data[g])):this.stats.misses++}return A}set(d,u,m){var y,g,T;if(a(this,c),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw y=this._error("ECACHEFULL"),y;if(this.options.forceString&&!typeof u==="string"&&(u=JSON.stringify(u)),m==null&&(m=this.options.stdTTL),(g=this._isInvalidKey(d))!=null)throw g;return T=!1,this.data[d]&&(T=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[d],!1))),this.data[d]=this._wrap(u,m),this.stats.vsize+=this._getValLength(u),T||(this.stats.ksize+=this._getKeyLength(d),this.stats.keys++),this.emit("set",d,u),!0}mset(d){var u,m,y,g,T,A,S,w,O,k;if(a(this,c),this.options.maxKeys>-1&&this.stats.keys+d.length>=this.options.maxKeys)throw u=this._error("ECACHEFULL"),u;for(y=0,S=d.length;y<S;y++){if(A=d[y],{key:T,val:k,ttl:O}=A,O&&typeof O!="number")throw u=this._error("ETTLTYPE"),u;if((m=this._isInvalidKey(T))!=null)throw m}for(g=0,w=d.length;g<w;g++)A=d[g],{key:T,val:k,ttl:O}=A,this.set(T,k,O);return!0}del(d){var u,m,y,g,T,A;for(a(this,c),Array.isArray(d)||(d=[d]),u=0,y=0,T=d.length;y<T;y++){if(g=d[y],(m=this._isInvalidKey(g))!=null)throw m;this.data[g]!=null&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[g],!1)),this.stats.ksize-=this._getKeyLength(g),this.stats.keys--,u++,A=this.data[g],delete this.data[g],this.emit("del",g,A.v))}return u}take(d){var u;return a(this,c),u=this.get(d),u!=null&&this.del(d),u}ttl(d,u){var m;if(a(this,c),u||(u=this.options.stdTTL),!d)return!1;if((m=this._isInvalidKey(d))!=null)throw m;return this.data[d]!=null&&this._check(d,this.data[d])?(u>=0?this.data[d]=this._wrap(this.data[d].v,u,!1):this.del(d),!0):!1}getTtl(d){var u,m;if(a(this,c),!!d){if((m=this._isInvalidKey(d))!=null)throw m;if(this.data[d]!=null&&this._check(d,this.data[d]))return u=this.data[d].t,u}}keys(){var d;return a(this,c),d=Object.keys(this.data),d}has(d){var u;return a(this,c),u=this.data[d]!=null&&this._check(d,this.data[d]),u}getStats(){return a(this,c),this.stats}flushAll(d=!0){a(this,c),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(d),this.emit("flush")}flushStats(){a(this,c),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats")}close(){a(this,c),this._killCheckPeriod()}_checkData(d=!0){var u,m,y;a(this,c),m=this.data;for(u in m)y=m[u],this._check(u,y);d&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,this.options.checkperiod*1e3,d),this.checkTimeout!=null&&this.checkTimeout.unref!=null&&this.checkTimeout.unref())}_killCheckPeriod(){if(this.checkTimeout!=null)return clearTimeout(this.checkTimeout)}_check(d,u){var m;return a(this,c),m=!0,u.t!==0&&u.t<Date.now()&&(this.options.deleteOnExpire&&(m=!1,this.del(d)),this.emit("expired",d,this._unwrap(u))),m}_isInvalidKey(d){var u;if(a(this,c),u=typeof d,i.call(this.validKeyTypes,u)<0)return this._error("EKEYTYPE",{type:typeof d})}_wrap(d,u,m=!0){var y,g,T;return a(this,c),this.options.useClones||(m=!1),g=Date.now(),y=0,T=1e3,u===0?y=0:u?y=g+u*T:this.options.stdTTL===0?y=this.options.stdTTL:y=g+this.options.stdTTL*T,{t:y,v:m?f(d):d}}_unwrap(d,u=!0){return this.options.useClones||(u=!1),d.v!=null?u?f(d.v):d.v:null}_getKeyLength(d){return d.toString().length}_getValLength(d){return a(this,c),typeof d=="string"?d.length:this.options.forceString?JSON.stringify(d).length:Array.isArray(d)?this.options.arrayValueSize*d.length:typeof d=="number"?8:typeof(d!=null?d.then:void 0)=="function"?this.options.promiseValueSize:typeof Buffer!="undefined"&&Buffer!==null&&Buffer.isBuffer(d)?d.length:d!=null&&typeof d=="object"?this.options.objectValueSize*Object.keys(d).length:typeof d=="boolean"?8:0}_error(d,u={}){var m;return a(this,c),m=new Error,m.name=d,m.errorcode=d,m.message=this.ERRORS[d]!=null?this.ERRORS[d](u):"-",m.data=u,m}_initErrors(){var d,u,m;a(this,c),this.ERRORS={},m=this._ERRORS;for(u in m)d=m[u],this.ERRORS[u]=this.createErrorMessage(d)}createErrorMessage(d){return function(u){return d.replace("__key",u.type)}}}return c.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},c}.call(this)}).call(He);(function(){var r;r=nc.exports=rc.exports,r.version="5.1.2"}).call(He);var ht=nc.exports;const oa=[{inputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"address[]",name:"baseTokens",type:"address[]"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"batchValidate",outputs:[{internalType:"enum ITokenValidator.Status[]",name:"",type:"uint8[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address[]",name:"baseTokens",type:"address[]"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"validate",outputs:[{internalType:"enum ITokenValidator.Status",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"}];class ac{static createInterface(){return new G0(oa)}static connect(f,n){return new q0(f,oa,n)}}ac.abi=oa;const c3=new Set(["0x777E2ae845272a2F540ebf6a3D03734A5a8f618e".toLowerCase()]);var X0;(function(r){r[r.UNKN=0]="UNKN",r[r.FOT=1]="FOT",r[r.STF=2]="STF"})(X0||(X0={}));const d3="0xb5ee1690b7dcc7859771148d0889be838fe108e0",l3="1000",p3=1e6;class h3{constructor(f,n,a,i=d3,c=p3,l=l3,d=c3){this.chainId=f,this.multicall2Provider=n,this.tokenValidationCache=a,this.tokenValidatorAddress=i,this.gasLimitPerCall=c,this.amountToFlashBorrow=l,this.allowList=d,this.CACHE_KEY=(u,m)=>`token-${u}-${m}`,this.BASES=[he[this.chainId].address]}async validateTokens(f,n){const a=_.keyBy(f,"address"),i=_(f).map(m=>m.address).uniq().value(),c=[],l={};for(const m of i)await this.tokenValidationCache.has(this.CACHE_KEY(this.chainId,m))?l[m.toLowerCase()]=await this.tokenValidationCache.get(this.CACHE_KEY(this.chainId,m)):c.push(m);M.info(`Got token validation results for ${i.length-c.length} tokens from cache. Getting ${c.length} on-chain.`);const d=_(c).map(m=>[m,this.BASES,this.amountToFlashBorrow]).value(),u=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:this.tokenValidatorAddress,contractInterface:ac.createInterface(),functionName:"validate",functionParams:d,providerConfig:n,additionalConfig:{gasLimitPerCallOverride:this.gasLimitPerCall}});for(let m=0;m<u.results.length;m++){const y=u.results[m],g=c[m],T=a[g];if(this.allowList.has(T.address.toLowerCase())){l[T.address.toLowerCase()]=X0.UNKN,await this.tokenValidationCache.set(this.CACHE_KEY(this.chainId,T.address.toLowerCase()),l[T.address.toLowerCase()]);continue}if(!y.success){M.info({result:y},`Failed to validate token ${T.symbol}`);continue}const A=y.result[0];l[T.address.toLowerCase()]=A,await this.tokenValidationCache.set(this.CACHE_KEY(this.chainId,T.address.toLowerCase()),l[T.address.toLowerCase()])}return{getValidationByToken:m=>l[m.address.toLowerCase()]}}}const ua=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount0Out",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1Out",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint112",name:"reserve0",type:"uint112"},{indexed:!1,internalType:"uint112",name:"reserve1",type:"uint112"}],name:"Sync",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINIMUM_LIQUIDITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"reserve0",type:"uint112"},{internalType:"uint112",name:"reserve1",type:"uint112"},{internalType:"uint32",name:"blockTimestampLast",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"kLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"price0CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price1CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"skim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Out",type:"uint256"},{internalType:"uint256",name:"amount1Out",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"sync",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class ic{static createInterface(){return new G0(ua)}static connect(f,n){return new q0(f,ua,n)}}ic.abi=ua;class m3{constructor(f,n,a={retries:2,minTimeout:50,maxTimeout:500}){this.chainId=f,this.multicall2Provider=n,this.retryOptions=a,this.POOL_ADDRESS_CACHE={}}async getPools(f,n){const a=new Set,i=[],c=[];for(const y of f){const[g,T]=y,{poolAddress:A,token0:S,token1:w}=this.getPoolAddress(g,T);a.has(A)||(a.add(A),i.push([S,w]),c.push(A))}M.debug(`getPools called with ${f.length} token pairs. Deduped down to ${a.size}`);const l=await this.getPoolsData(c,"getReserves",n);M.info(`Got reserves for ${a.size} pools ${n!=null&&n.blockNumber?`as of block: ${await(n==null?void 0:n.blockNumber)}.`:""}`);const d={},u=[];for(let y=0;y<c.length;y++){const g=l[y];if(!(g!=null&&g.success)){const[Q,$]=i[y];u.push([Q,$]);continue}const[T,A]=i[y],{reserve0:S,reserve1:w}=g.result,O=new sf(De.fromRawAmount(T,S.toString()),De.fromRawAmount(A,w.toString())),k=c[y];d[k]=O}u.length>0&&M.info({invalidPools:_.map(u,([y,g])=>`${y.symbol}/${g.symbol}`)},`${u.length} pools invalid after checking their slot0 and liquidity results. Dropping.`);const m=_.map(Object.values(d),Xn);return M.debug({poolStrs:m},`Found ${m.length} valid pools`),{getPool:(y,g)=>{const{poolAddress:T}=this.getPoolAddress(y,g);return d[T]},getPoolByAddress:y=>d[y],getAllPools:()=>Object.values(d)}}getPoolAddress(f,n){const[a,i]=f.sortsBefore(n)?[f,n]:[n,f],c=`${this.chainId}/${a.address}/${i.address}`,l=this.POOL_ADDRESS_CACHE[c];if(l)return{poolAddress:l,token0:a,token1:i};const d=sf.getAddress(a,i);return this.POOL_ADDRESS_CACHE[c]=d,{poolAddress:d,token0:a,token1:i}}async getPoolsData(f,n,a){const{results:i,blockNumber:c}=await of(async()=>this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:f,contractInterface:ic.createInterface(),functionName:n,providerConfig:a}),this.retryOptions);return M.debug(`Pool data fetched as of block ${c}`),i}}const ca=[{inputs:[],name:"getPricesInWei",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];class oc{static createInterface(){return new G0(ca)}static connect(f,n){return new q0(f,ca,n)}}oc.abi=ca;const da=[{inputs:[{internalType:"address",name:"_owner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"DecimalsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"GasPriceUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"L1BaseFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"OverheadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"ScalarUpdated",type:"event"},{inputs:[],name:"decimals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"gasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1GasUsed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"l1BaseFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"overhead",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"scalar",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_decimals",type:"uint256"}],name:"setDecimals",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_gasPrice",type:"uint256"}],name:"setGasPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_baseFee",type:"uint256"}],name:"setL1BaseFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_overhead",type:"uint256"}],name:"setOverhead",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_scalar",type:"uint256"}],name:"setScalar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];class uc{static createInterface(){return new G0(da)}static connect(f,n){return new q0(f,da,n)}}uc.abi=da;class b3{constructor(f,n,a){if(this.chainId=f,this.multicall2Provider=n,f!=p.OPTIMISM&&f!=p.OPTIMISTIC_KOVAN)throw new Error("This data provider is used only on optimism networks.");this.gasOracleAddress=a!=null?a:Ub}async getGasData(){var f,n,a,i;const c=["l1BaseFee","scalar","decimals","overhead"],l=await this.multicall2Provider.callMultipleFunctionsOnSameContract({address:this.gasOracleAddress,contractInterface:uc.createInterface(),functionNames:c});if(!(!((f=l.results[0])===null||f===void 0)&&f.success)||!(!((n=l.results[1])===null||n===void 0)&&n.success)||!(!((a=l.results[2])===null||a===void 0)&&a.success)||!(!((i=l.results[3])===null||i===void 0)&&i.success))throw M.info({results:l.results},"Failed to get gas constants data from the optimism gas oracle"),new Error("Failed to get gas constants data from the optimism gas oracle");const{result:d}=l.results[0],{result:u}=l.results[1],{result:m}=l.results[2],{result:y}=l.results[3];return{l1BaseFee:d[0],scalar:u[0],decimals:m[0],overhead:y[0]}}}class y3{constructor(f,n,a){this.chainId=f,this.provider=n,this.gasFeesAddress=a||Nb}async getGasData(){const n=await oc.connect(this.gasFeesAddress,this.provider).getPricesInWei();return{perL2TxFee:n[0],perL1CalldataFee:n[1],perArbGasTotal:n[5]}}}const la=[{inputs:[],name:"feeGrowthGlobal0X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeGrowthGlobal1X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidity",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"observations",outputs:[{internalType:"uint32",name:"blockTimestamp",type:"uint32"},{internalType:"int56",name:"tickCumulative",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityCumulativeX128",type:"uint160"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"positions",outputs:[{internalType:"uint128",name:"_liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolFees",outputs:[{internalType:"uint128",name:"token0",type:"uint128"},{internalType:"uint128",name:"token1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"slot0",outputs:[{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{internalType:"int24",name:"tick",type:"int24"},{internalType:"uint16",name:"observationIndex",type:"uint16"},{internalType:"uint16",name:"observationCardinality",type:"uint16"},{internalType:"uint16",name:"observationCardinalityNext",type:"uint16"},{internalType:"uint8",name:"feeProtocol",type:"uint8"},{internalType:"bool",name:"unlocked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int16",name:"wordPosition",type:"int16"}],name:"tickBitmap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int24",name:"tick",type:"int24"}],name:"ticks",outputs:[{internalType:"uint128",name:"liquidityGross",type:"uint128"},{internalType:"int128",name:"liquidityNet",type:"int128"},{internalType:"uint256",name:"feeGrowthOutside0X128",type:"uint256"},{internalType:"uint256",name:"feeGrowthOutside1X128",type:"uint256"},{internalType:"int56",name:"tickCumulativeOutside",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityOutsideX128",type:"uint160"},{internalType:"uint32",name:"secondsOutside",type:"uint32"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"}];class cc{static createInterface(){return new G0(la)}static connect(f,n){return new q0(f,la,n)}}cc.abi=la;class g3{constructor(f,n,a={retries:2,minTimeout:50,maxTimeout:500}){this.chainId=f,this.multicall2Provider=n,this.retryOptions=a,this.POOL_ADDRESS_CACHE={}}async getPools(f,n){const a=new Set,i=[],c=[];for(const g of f){const[T,A,S]=g,{poolAddress:w,token0:O,token1:k}=this.getPoolAddress(T,A,S);a.has(w)||(a.add(w),i.push([O,k,S]),c.push(w))}M.debug(`getPools called with ${f.length} token pairs. Deduped down to ${a.size}`);const[l,d]=await Promise.all([this.getPoolsData(c,"slot0",n),this.getPoolsData(c,"liquidity",n)]);M.info(`Got liquidity and slot0s for ${a.size} pools ${n!=null&&n.blockNumber?`as of block: ${n==null?void 0:n.blockNumber}.`:""}`);const u={},m=[];for(let g=0;g<c.length;g++){const T=l[g],A=d[g];if(!(T!=null&&T.success)||!(A!=null&&A.success)||T.result.sqrtPriceX96.eq(0)){const[F,J,K]=i[g];m.push([F,J,K]);continue}const[S,w,O]=i[g],k=T.result,Q=A.result[0],$=new mt(S,w,O,k.sqrtPriceX96.toString(),Q.toString(),k.tick),j=c[g];u[j]=$}m.length>0&&M.info({invalidPools:_.map(m,([g,T,A])=>`${g.symbol}/${T.symbol}/${A/1e4}%`)},`${m.length} pools invalid after checking their slot0 and liquidity results. Dropping.`);const y=_.map(Object.values(u),Xn);return M.debug({poolStrs:y},`Found ${y.length} valid pools`),{getPool:(g,T,A)=>{const{poolAddress:S}=this.getPoolAddress(g,T,A);return u[S]},getPoolByAddress:g=>u[g],getAllPools:()=>Object.values(u)}}getPoolAddress(f,n,a){const[i,c]=f.sortsBefore(n)?[f,n]:[n,f],l=`${this.chainId}/${i.address}/${c.address}/${a}`,d=this.POOL_ADDRESS_CACHE[l];if(d)return{poolAddress:d,token0:i,token1:c};const u=Nh({factoryAddress:Mu[this.chainId],tokenA:i,tokenB:c,fee:a});return this.POOL_ADDRESS_CACHE[l]=u,{poolAddress:u,token0:i,token1:c}}async getPoolsData(f,n,a){const{results:i,blockNumber:c}=await of(async()=>this.multicall2Provider.callSameFunctionOnMultipleContracts({addresses:f,contractInterface:cc.createInterface(),functionName:n,providerConfig:a}),this.retryOptions);return M.debug(`Pool data fetched as of block ${c}`),i}}const pa=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];class dc{static createInterface(){return new G0(pa)}static connect(f,n){return new q0(f,pa,n)}}dc.abi=pa;function ha(r,f,n,a){const i=_.filter(a,g=>g.protocol===ge.exports.Protocol.V3),c=_.filter(a,g=>g.protocol===ge.exports.Protocol.V2),l=_.filter(a,g=>g.protocol===ge.exports.Protocol.MIXED),d=_.map(i,g=>{const{route:T,amount:A,quote:S}=g;if(n==$e.EXACT_INPUT){const w=De.fromFractionalAmount(r,A.numerator,A.denominator),O=De.fromFractionalAmount(f,S.numerator,S.denominator);return{routev3:new ea(T.pools,w.currency,O.currency),inputAmount:w,outputAmount:O}}else{const w=De.fromFractionalAmount(r,S.numerator,S.denominator),O=De.fromFractionalAmount(f,A.numerator,A.denominator);return{routev3:new ea(T.pools,w.currency,O.currency),inputAmount:w,outputAmount:O}}}),u=_.map(c,g=>{const{route:T,amount:A,quote:S}=g;if(n==$e.EXACT_INPUT){const w=De.fromFractionalAmount(r,A.numerator,A.denominator),O=De.fromFractionalAmount(f,S.numerator,S.denominator);return{routev2:new ta(T.pairs,w.currency,O.currency),inputAmount:w,outputAmount:O}}else{const w=De.fromFractionalAmount(r,S.numerator,S.denominator),O=De.fromFractionalAmount(f,A.numerator,A.denominator);return{routev2:new ta(T.pairs,w.currency,O.currency),inputAmount:w,outputAmount:O}}}),m=_.map(l,g=>{const{route:T,amount:A,quote:S}=g;if(n!=$e.EXACT_INPUT)throw new Error("Mixed routes are only supported for exact input trades");const w=De.fromFractionalAmount(r,A.numerator,A.denominator),O=De.fromFractionalAmount(f,S.numerator,S.denominator);return{mixedRoute:new ge.exports.MixedRouteSDK(T.pools,w.currency,O.currency),inputAmount:w,outputAmount:O}});return new ge.exports.Trade({v2Routes:u,v3Routes:d,mixedRoutes:m,tradeType:n})}function ma(r,f,n){if(f.type==Bf.UNIVERSAL_ROUTER)return{...N1.exports.SwapRouter.swapERC20CallParameters(r,f),to:N1.exports.UNIVERSAL_ROUTER_ADDRESS(n)};if(f.type==Bf.SWAP_ROUTER_02){const{recipient:a,slippageTolerance:i,deadline:c,inputTokenPermit:l}=f;return{...ge.exports.SwapRouter.swapCallParameters(r,{recipient:a,slippageTolerance:i,deadlineOrPreviousBlockhash:c,inputTokenPermit:l}),to:Pa(n)}}throw new Error(`Unsupported swap type ${f}`)}const v3={name:"Unsupported Token List",timestamp:"2021-01-05T20:47:02.923Z",version:{major:1,minor:0,patch:0},tags:{},logoURI:"ipfs://QmNa8mQkrNKp1WEEeGjFezDmDeodkWRevGFN8JCV7b4Xir",keywords:["uniswap","unsupported","broken"],tokens:[{name:"USD Token",address:"0xd233d1f6fd11640081abb8db125f722b5dc729dc",symbol:"USD",decimals:9,chainId:1,logoURI:""},{name:"UNI HODL",address:"0x4bf5dc91E2555449293D7824028Eb8Fe5879B689",symbol:"UniH",decimals:18,chainId:1,logoURI:""},{name:"Gold Tether",address:"0x4922a015c4407F87432B179bb209e125432E4a2A",symbol:"XAUt",decimals:6,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4922a015c4407F87432B179bb209e125432E4a2A/logo.png"},{name:"Grump Cat",address:"0x93B2FfF814FCaEFFB01406e80B4Ecd89Ca6A021b",symbol:"GRUMPY",decimals:9,chainId:1,logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x4922a015c4407F87432B179bb209e125432E4a2A/logo.png"},{name:"apeUSD-UMA Synthetic USD (Dec 2021)",address:"0xfA5e27893aee4805283D86e4283Da64F8c72dd56",symbol:"apeUSD-UMA-DEC21",decimals:18,chainId:1,logoURI:""},{chainId:1,address:"0xc6b11850241c5127eab73af4b6c68bc267cbbff4",name:"oWETHp Put 360 DEC2520",symbol:"oWETH-360P-12/25/20",decimals:7},{chainId:1,name:"oYFIp Put 25000 OCT0220",address:"0x452b421be5b30f0c6ad8c3f03c06bdaab4f5c56c",symbol:"oYFI-25000P-10/02/20",decimals:7},{chainId:1,name:"oWETHp Put 360 OCT3020",address:"0x0578779e746d7186253a36cf651ea786acfcf087",symbol:"oWETH-360P-10/30/20",decimals:7},{chainId:1,name:"ETHc Call 500 OCT3020",address:"0xf9aba2e43fb19184408ea3b572a0fd672946f87b",symbol:"oETH-500C-10/30/20",decimals:6},{chainId:1,name:"oBALp Put 22 OCT0220",address:"0xdb0991dfc7e828b5a2837dc82d68e16490562c8d",symbol:"oBAL-22P-10/02/20",decimals:7},{chainId:1,name:"oCOMPp Put 150 SEP2520",address:"0xe951ebe6b4420ab3f4844cf36dedd263d095b416",symbol:"oCOMP-150P-09/25/20",decimals:7},{chainId:1,name:"oCRVp Put 3 SEP252020",address:"0x9215bd49b59748419eac6bad9dbe247df06ebdb9",symbol:"oCRV-3P-09/25/20",decimals:7},{chainId:1,name:"oETHp Put 180 SEP2520",address:"0xE3A2c34Fa2F59ffa95C4ACd1E5663633d45Bc3AD",symbol:"oETH-180P-09/25/20",decimals:7},{chainId:1,name:"oETHc Call 400 SEP2520",address:"0x05977EBC26825C0CD6097E0Ad7204721516711Eb",symbol:"oETH-400C-09/25/20",decimals:7},{chainId:1,name:"oWETHp Put 380 SEP1820",address:"0x31f88266301b08631f9f0e33fd5c43c2a5d1e5b2",symbol:"oWETH-380P-09/18/20",decimals:7},{chainId:1,name:"oYFIp Put 8500 SEP1820",address:"0xd1cec2f67fdc4c60e0963515dfc3343f31e32e47",symbol:"oYFI-8500P-09/18/20",decimals:7},{chainId:1,name:"oWETHp Put 370 SEP1120",address:"0x15844029b2c2bf24506e9937739a9a912f1e4354",symbol:"oWETH-370P-09/11/20",decimals:7},{chainId:1,name:"oWETHp Put 400 SEP0420",address:"0x5562c33c383f6386be4f6dcdbd35a3a99bbcfde6",symbol:"oWETH-400P-09/04/20",decimals:7},{chainId:1,name:"oETHp Put 200 AUG2820",address:"0x3CBFC1397deF0602c2d211c70A1c0c38CEDB5448",symbol:"oWETH-400P-09/04/20",decimals:7},{chainId:1,name:"Opyn cDai Insurance",symbol:"ocDai",address:"0x98cc3bd6af1880fcfda17ac477b2f612980e5e33",decimals:8},{chainId:1,name:"Opyn cUSDC Insurance",symbol:"ocUSDC",address:"0x8ED9f862363fFdFD3a07546e618214b6D59F03d4",decimals:8},{chainId:1,address:"0x176C674Ee533C6139B0dc8b458D72A93dCB3e705",symbol:"iAAVE",name:"Synth Inverse Aave",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iAAVE.svg",tags:["inverse","synth"]},{chainId:1,address:"0x8A8079c7149B8A1611e5C5d978DCA3bE16545F83",symbol:"iADA",name:"Synth Inverse Cardano",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iADA.svg",tags:["inverse","synth"]},{chainId:1,address:"0xAFD870F32CE54EfdBF677466B612bf8ad164454B",symbol:"iBNB",name:"Synth Inverse Binance Coin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iBNB.svg",tags:["inverse","synth"]},{chainId:1,address:"0xD6014EA05BDe904448B743833dDF07c3C7837481",symbol:"iBTC",name:"Synth Inverse Bitcoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iBTC.svg",tags:["inverse","synth"]},{chainId:1,address:"0x336213e1DDFC69f4701Fc3F86F4ef4A160c1159d",symbol:"iCEX",name:"Synth Inverse Centralised Exchange Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iCEX.svg",tags:["index","inverse","synth"]},{chainId:1,address:"0x6345728B1ccE16E6f8C509950b5c84FFF88530d9",symbol:"iCOMP",name:"Synth Inverse Compound",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iCOMP.svg",tags:["inverse","synth"]},{chainId:1,address:"0xCB98f42221b2C251A4E74A1609722eE09f0cc08E",symbol:"iDASH",name:"Synth Inverse Dash",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDASH.svg",tags:["inverse","synth"]},{chainId:1,address:"0x14d10003807AC60d07BB0ba82cAeaC8d2087c157",symbol:"iDEFI",name:"Synth Inverse DeFi Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDEFI.svg",tags:["index","inverse","synth"]},{chainId:1,address:"0x46a97629C9C1F58De6EC18C7F536e7E6d6A6ecDe",symbol:"iDOT",name:"Synth Inverse Polkadot",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iDOT.svg",tags:["inverse","synth"]},{chainId:1,address:"0xF4EebDD0704021eF2a6Bbe993fdf93030Cd784b4",symbol:"iEOS",name:"Synth Inverse EOS",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iEOS.svg",tags:["inverse","synth"]},{chainId:1,address:"0xd50c1746D835d2770dDA3703B69187bFfeB14126",symbol:"iETC",name:"Synth Inverse Ethereum Classic",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iETC.svg",tags:["inverse","synth"]},{chainId:1,address:"0xA9859874e1743A32409f75bB11549892138BBA1E",symbol:"iETH",name:"Synth Inverse Ether",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iETH.svg",tags:["inverse","synth"]},{chainId:1,address:"0x2d7aC061fc3db53c39fe1607fB8cec1B2C162B01",symbol:"iLINK",name:"Synth Inverse Chainlink",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iLINK.svg",tags:["inverse","synth"]},{chainId:1,address:"0x79da1431150C9b82D2E5dfc1C68B33216846851e",symbol:"iLTC",name:"Synth Inverse Litecoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iLTC.svg",tags:["inverse","synth"]},{chainId:1,address:"0xA5a5DF41883Cdc00c4cCC6E8097130535399d9a3",symbol:"iOIL",name:"Synth Inverse Perpetual Oil Futures",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iOIL.svg",tags:["inverse","synth"]},{chainId:1,address:"0x0fEd38108bdb8e62ef7b5680E8E0726E2F29e0De",symbol:"iREN",name:"Synth Inverse Ren",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iREN.svg",tags:["inverse","synth"]},{chainId:1,address:"0xC5807183a9661A533CB08CbC297594a0B864dc12",symbol:"iTRX",name:"Synth Inverse TRON",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iTRX.svg",tags:["inverse","synth"]},{chainId:1,address:"0x36A00FF9072570eF4B9292117850B8FE08d96cce",symbol:"iUNI",name:"Synth Inverse Uniswap",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iUNI.svg",tags:["inverse","synth"]},{chainId:1,address:"0x4AdF728E2Df4945082cDD6053869f51278fae196",symbol:"iXMR",name:"Synth Inverse Monero",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXMR.svg",tags:["inverse","synth"]},{chainId:1,address:"0x27269b3e45A4D3E79A3D6BFeE0C8fB13d0D711A6",symbol:"iXRP",name:"Synth Inverse Ripple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXRP.svg",tags:["inverse","synth"]},{chainId:1,address:"0x8deef89058090ac5655A99EEB451a4f9183D1678",symbol:"iXTZ",name:"Synth Inverse Tezos",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iXTZ.svg",tags:["inverse","synth"]},{chainId:1,address:"0x592244301CeA952d6daB2fdC1fE6bd9E53917306",symbol:"iYFI",name:"Synth Inverse yearn.finance",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/iYFI.svg",tags:["inverse","synth"]},{chainId:1,address:"0xcD39b5434a0A92cf47D1F567a7dF84bE356814F0",symbol:"s1INCH",name:"Synth 1inch",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/s1INCH.svg",tags:["synth"]},{chainId:1,address:"0x7537AAe01f3B218DAE75e10d952473823F961B87",symbol:"sAAPL",name:"Synth Apple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAAPL.svg",tags:["synth"]},{chainId:1,address:"0xd2dF355C19471c8bd7D8A3aa27Ff4e26A21b4076",symbol:"sAAVE",name:"Synth Aave",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAAVE.svg",tags:["synth"]},{chainId:1,address:"0xe36E2D3c7c34281FA3bC737950a68571736880A1",symbol:"sADA",name:"Synth Cardano",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sADA.svg",tags:["synth"]},{chainId:1,address:"0x9CF7E61853ea30A41b02169391b393B901eac457",symbol:"sAMZN",name:"Synth Amazon",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAMZN.svg",tags:["synth"]},{chainId:1,address:"0xF48e200EAF9906362BB1442fca31e0835773b8B4",symbol:"sAUD",name:"Synth Australian Dollars",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sAUD.svg",tags:["synth"]},{chainId:1,address:"0x617aeCB6137B5108D1E7D4918e3725C8cEbdB848",symbol:"sBNB",name:"Synth Binance Coin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sBNB.svg",tags:["synth"]},{chainId:1,address:"0xfE18be6b3Bd88A2D2A7f928d00292E7a9963CfC6",symbol:"sBTC",name:"Synth Bitcoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sBTC.svg",tags:["synth"]},{chainId:1,address:"0xeABACD844A196D7Faf3CE596edeBF9900341B420",symbol:"sCEX",name:"Synth Centralised Exchange Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCEX.svg",tags:["index","synth"]},{chainId:1,address:"0x0F83287FF768D1c1e17a42F44d644D7F22e8ee1d",symbol:"sCHF",name:"Synth Swiss Franc",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCHF.svg",tags:["synth"]},{chainId:1,address:"0x9EeF4CA7aB9fa8bc0650127341C2d3F707a40f8A",symbol:"sCOIN",name:"Synth Coinbase",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCOIN.svg",tags:["synth"]},{chainId:1,address:"0xEb029507d3e043DD6C87F2917C4E82B902c35618",symbol:"sCOMP",name:"Synth Compound",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCOMP.svg",tags:["synth"]},{chainId:1,address:"0xD38aEb759891882e78E957c80656572503D8c1B1",symbol:"sCRV",name:"Synth Curve DAO Token",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sCRV.svg",tags:["synth"]},{chainId:1,address:"0xfE33ae95A9f0DA8A845aF33516EDc240DCD711d6",symbol:"sDASH",name:"Synth Dash",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDASH.svg",tags:["synth"]},{chainId:1,address:"0xe1aFe1Fd76Fd88f78cBf599ea1846231B8bA3B6B",symbol:"sDEFI",name:"Synth DeFi Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDEFI.svg",tags:["index","synth"]},{chainId:1,address:"0x1715AC0743102BF5Cd58EfBB6Cf2dC2685d967b6",symbol:"sDOT",name:"Synth Polkadot",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sDOT.svg",tags:["synth"]},{chainId:1,address:"0x88C8Cf3A212c0369698D13FE98Fcb76620389841",symbol:"sEOS",name:"Synth EOS",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sEOS.svg",tags:["synth"]},{chainId:1,address:"0x22602469d704BfFb0936c7A7cfcD18f7aA269375",symbol:"sETC",name:"Synth Ethereum Classic",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sETC.svg",tags:["synth"]},{chainId:1,address:"0x5e74C9036fb86BD7eCdcb084a0673EFc32eA31cb",symbol:"sETH",name:"Synth Ether",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sETH.svg",tags:["synth"]},{chainId:1,address:"0xD71eCFF9342A5Ced620049e616c5035F1dB98620",symbol:"sEUR",name:"Synth Euros",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sEUR.svg",tags:["synth"]},{chainId:1,address:"0xf50B5e535F62a56A9BD2d8e2434204E726c027Fa",symbol:"sFB",name:"Synth Facebook",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sFB.svg",tags:["synth"]},{chainId:1,address:"0x23348160D7f5aca21195dF2b70f28Fce2B0be9fC",symbol:"sFTSE",name:"Synth FTSE 100 Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sFTSE.svg",tags:["synth"]},{chainId:1,address:"0x97fe22E7341a0Cd8Db6F6C021A24Dc8f4DAD855F",symbol:"sGBP",name:"Synth Pound Sterling",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sGBP.svg",tags:["synth"]},{chainId:1,address:"0xC63B8ECCE56aB9C46184eC6aB85e4771fEa4c8AD",symbol:"sGOOG",name:"Synth Alphabet",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sGOOG.svg",tags:["synth"]},{chainId:1,address:"0xF6b1C627e95BFc3c1b4c9B825a032Ff0fBf3e07d",symbol:"sJPY",name:"Synth Japanese Yen",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sJPY.svg",tags:["synth"]},{chainId:1,address:"0x269895a3dF4D73b077Fc823dD6dA1B95f72Aaf9B",symbol:"sKRW",name:"Synth South Korean Won",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sKRW.svg",tags:["synth"]},{chainId:1,address:"0xbBC455cb4F1B9e4bFC4B73970d360c8f032EfEE6",symbol:"sLINK",name:"Synth Chainlink",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sLINK.svg",tags:["synth"]},{chainId:1,address:"0xC14103C2141E842e228FBaC594579e798616ce7A",symbol:"sLTC",name:"Synth Litecoin",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sLTC.svg",tags:["synth"]},{chainId:1,address:"0x745a824D6aBBD236AA794b5530062778A6Ad7523",symbol:"sMSFT",name:"Synth Microsoft",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sMSFT.svg",tags:["synth"]},{chainId:1,address:"0x5A7E3c07604EB515C16b36cd51906a65f021F609",symbol:"sNFLX",name:"Synth Netflix",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sNFLX.svg",tags:["synth"]},{chainId:1,address:"0x757de3ac6B830a931eF178C6634c5C551773155c",symbol:"sNIKKEI",name:"Synth Nikkei 225 Index",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sNIKKEI.svg",tags:["synth"]},{chainId:1,address:"0x6d16cF3EC5F763d4d99cB0B0b110eefD93B11B56",symbol:"sOIL",name:"Synth Perpetual Oil Futures",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sOIL.svg",tags:["synth"]},{chainId:1,address:"0xD31533E8d0f3DF62060e94B3F1318137bB6E3525",symbol:"sREN",name:"Synth Ren",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sREN.svg",tags:["synth"]},{chainId:1,address:"0x0352557B007A4Aae1511C114409b932F06F9E2f4",symbol:"sRUNE",name:"Synth THORChain",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sRUNE.svg",tags:["synth"]},{chainId:1,address:"0xf2E08356588EC5cd9E437552Da87C0076b4970B0",symbol:"sTRX",name:"Synth TRON",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sTRX.svg",tags:["synth"]},{chainId:1,address:"0x918dA91Ccbc32B7a6A0cc4eCd5987bbab6E31e6D",symbol:"sTSLA",name:"Synth Tesla",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sTSLA.svg",tags:["synth"]},{chainId:1,address:"0x30635297E450b930f8693297eBa160D9e6c8eBcf",symbol:"sUNI",name:"Synth Uniswap",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sUNI.svg",tags:["synth"]},{chainId:1,address:"0x6A22e5e94388464181578Aa7A6B869e00fE27846",symbol:"sXAG",name:"Synth Silver Ounce",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXAG.svg",tags:["synth"]},{chainId:1,address:"0x261EfCdD24CeA98652B9700800a13DfBca4103fF",symbol:"sXAU",name:"Synth Gold Ounce",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXAU.svg",tags:["synth"]},{chainId:1,address:"0x5299d6F7472DCc137D7f3C4BcfBBB514BaBF341A",symbol:"sXMR",name:"Synth Monero",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXMR.svg",tags:["synth"]},{chainId:1,address:"0xa2B0fDe6D710e201d0d608e924A484d1A5fEd57c",symbol:"sXRP",name:"Synth Ripple",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXRP.svg",tags:["synth"]},{chainId:1,address:"0x2e59005c5c0f0a4D77CcA82653d48b46322EE5Cd",symbol:"sXTZ",name:"Synth Tezos",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sXTZ.svg",tags:["synth"]},{chainId:1,address:"0x992058B7DB08F9734d84485bfbC243C4ee6954A7",symbol:"sYFI",name:"Synth yearn.finance",decimals:18,logoURI:"https://raw.githubusercontent.com/Synthetixio/synthetix-assets/v2.0.10/synths/sYFI.svg",tags:["synth"]},{chainId:1,address:"0x81ab848898b5ffD3354dbbEfb333D5D183eEDcB5",name:"yUSD Synthetic Expiring 1 September 2020",symbol:"yUSDSEP20",decimals:18},{chainId:1,address:"0xB2FdD60AD80ca7bA89B9BAb3b5336c2601C020b4",name:"yUSD Synthetic Expiring 1 October 2020",symbol:"yUSDOCT20",decimals:18},{chainId:1,address:"0x208d174775dc39fe18b1b374972f77ddec6c0f73",name:"uUSDrBTC Synthetic Expiring 1 Oct 2020",symbol:"uUSDrBTC-OCT",decimals:18},{chainId:1,address:"0xf06ddacf71e2992e2122a1a0168c6967afdf63ce",name:"uUSDrBTC Synthetic Expiring 31 Dec 2020",symbol:"uUSDrBTC-DEC",decimals:18},{chainId:1,address:"0xd16c79c8a39d44b2f3eb45d2019cd6a42b03e2a9",name:"uUSDwETH Synthetic Expiring 31 Dec 2020",symbol:"uUSDwETH-DEC",decimals:18},{chainId:1,address:"0x3d995510f8d82c2ea341845932b5ddde0bead9a3",name:"uGAS-JAN21 Token Expiring 31 Jan 2021",symbol:"uGAS-JAN21",decimals:18},{chainId:1,address:"0x90f802c7e8fb5d40b0de583e34c065a3bd2020d8",name:"YD-ETH-MAR21 Token Expiring 31 Mar 2021",symbol:"YD-ETH-MAR21",decimals:18},{chainId:1,address:"0x002f0b1a71c5730cf2f4da1970a889207bdb6d0d",name:"YD-BTC-MAR21 Token Expiring 31 Mar 2021",symbol:"YD-BTC-MAR21",decimals:18},{chainId:1,address:"0x1062ad0e59fa67fa0b27369113098cc941dd0d5f",name:"UMA 35 Call Expirying 30 Apr 2021",symbol:"UMAc35-0421",decimals:18},{chainId:1,address:"0xf93340b1a3adf7eedcaec25fae8171d4b736e89f",name:"pxUSD Synthetic USD Expiring 1 April 2021",symbol:"pxUSD_MAR2021",decimals:18},{chainId:1,address:"0x84bd083b1c8bf929f39c98bc17cf518f40154f58",name:"Mario Cash Synthetic Token Expiring 15 January 2021",symbol:"Mario Cash-JAN-2021",decimals:18},{chainId:1,address:"0x81fab276aec924fbde190cf379783526d413cf70",name:"uGAS-FEB21 Token Expiring 28 Feb 2021",symbol:"uGAS-FEB21",decimals:18},{chainId:1,address:"0x4e110603e70b0b5f1c403ee543b37e1f1244cf28",name:"uGAS-MAR21 Token Expiring 31 Mar 2021",symbol:"uGAS-MAR21",decimals:18},{chainId:1,address:"0xcf55a7f92d5e0c6683debbc1fc20c0a6e056df13",name:"Zelda Elastic Cash",symbol:"Zelda Elastic Cash",decimals:18},{chainId:1,address:"0x654eebac62240e6c56bab5f6adf7cfa74a894510",name:"Zelda Spring Nuts Cash",symbol:"Zelda Spring Nuts Cash",decimals:18},{chainId:1,address:"0xa48920cc1ad85d8ea13af5d7be180c0338c306dd",name:"Zelda Summer Nuts Cash",symbol:"Zelda Summer Nuts Cash",decimals:18},{chainId:1,address:"0x249a198d59b57fda5dda90630febc86fd8c7594c",name:"Zelda Whirlwind Cash",symbol:"Zelda Whirlwind Cash",decimals:18},{chainId:1,address:"0x5ed1406873c9eb91f6f9a67ac4e152387c1132e7",name:"Zelda Reinforced Cash",symbol:"Zelda Reinforced Cash",decimals:18},{chainId:1,address:"0x8104c9f13118320eefe5fbea8a44d600b85981ef",name:"Mini Mario Summer Cash",symbol:"Mini Mario Summer Cash",decimals:18},{chainId:1,address:"0x69746c719e59674b147df25f50e7cfa0673cb625",name:"Mini Mario Spring Cash",symbol:"Mini Mario Spring Cash",decimals:18},{chainId:1,address:"0x6b1257641d18791141f025eab36fb567c4b564ff",name:"Bitcoin Dominance Token 31 March 2021",symbol:"BTCDOM-MAR2021",decimals:18},{chainId:1,address:"0x4e83b6287588a96321b2661c5e041845ff7814af",name:"Altcoin Dominance Token 31 March 2021",symbol:"ALTDOM-MAR2021",decimals:18},{chainId:1,address:"0x59fec83ec709c893aedd1a144cf1828eb04127cd",name:"pxGOLD Synthetic GOLD Expiring 31 May 2021",symbol:"pxGOLD_MAY2021",decimals:18},{chainId:1,address:"0x89337BFb7938804c3776C9FB921EccAf5ab76758",name:"Compound Annualized Rate Future Expiring 28 March 2021",symbol:"CAR-USDC-MAR21",decimals:18},{chainId:1,address:"0xec58d3aefc9aaa2e0036fa65f70d569f49d9d1ed",name:"uSTONKS Index Token April 2021",symbol:"uSTONKS_APR21",decimals:6},{chainId:1,address:"0xa6B9d7E3d76cF23549293Fb22c488E0Ea591A44e",name:"uGAS-JUN21 Token Expiring 30 Jun 2021",symbol:"uGAS-JUN21",decimals:18},{chainId:1,address:"0xe813b65da6c38a04591aed3f082d32db7d53c382",name:"Yield Dollar [WETH Dec 2021]",symbol:"YD-ETH-DEC21",decimals:18},{chainId:1,address:"0x4b606e9eb2228c70f44453afe5a73e1fea258ce1",name:"pxUSD Synthetic USD Expiring 31 Mar 2022",symbol:"pxUSD_MAR2022",decimals:18},{chainId:1,address:"0x5247c0db4044fb6f97f32c7e1b48758019a5a912",name:"pxGOLD Synthetic Gold Expiring 31 Mar 2022",symbol:"pxGOLD_MAR2022",decimals:18},{chainId:1,address:"0x56fb1acaff95c0b6ebcd17c8361a63d98b1a5a11",name:"uForex CNYUSD Synthetic Token April 2021",symbol:"uCNYUSD-APR",decimals:6},{chainId:1,address:"0xd49fa405dce086c65d66ca1ca41f8e98583812b4",name:"uForex EURUSD Synthetic Token April 2021",symbol:"uEURUSD-APR",decimals:6},{chainId:1,address:"0x29dddacba3b231ee8d673dd0f0fa759ea145561b",name:"DEFI_PULSE_TOTAL_TVL Synthetic Token Expiring 15 April 2021",symbol:"TVL_ALL_APRIL15",decimals:6},{chainId:1,address:"0xcbe430927370e95b4b10cfc702c6017ec7abefc3",name:"Yield Dollar [WETH Jun 2021]",symbol:"YD-ETH-JUN21",decimals:18},{chainId:1,address:"0x4b7fb448df91c8ed973494f8c8c4f12daf3a8521",name:"Yield Dollar [renBTC Jun 2021]",symbol:"YD-BTC-JUN21",decimals:8},{chainId:1,address:"0x3108c33b6fb38efedaefd8b5f7ca01d5f5c7372d",name:"Yield Dollar UMA 21",symbol:"yUMA21",decimals:18},{chainId:1,address:"0x0cae9e4d663793c2a2A0b211c1Cf4bBca2B9cAa7",name:"Mirrored Amazon",symbol:"MAMZN",decimals:18},{chainId:1,address:"0x31c63146a635EB7465e5853020b39713AC356991",name:"M US Oil",symbol:"MUSO",decimals:18},{chainId:1,address:"0x59A921Db27Dd6d4d974745B7FfC5c33932653442",name:"M Google",symbol:"MGOOGL",decimals:18},{chainId:1,address:"0xf72FCd9DCF0190923Fadd44811E240Ef4533fc86",name:"Mirrored ProShares",symbol:"MVIXY",decimals:18},{chainId:1,address:"0x56aA298a19C93c6801FDde870fA63EF75Cc0aF72",name:"Mirrored Alibaba",symbol:"MBABA",decimals:18},{chainId:1,address:"0x0e99cC0535BB6251F6679Fa6E65d6d3b430e840B",name:"Mirrored Facebook",symbol:"MFB",decimals:18},{chainId:1,address:"0x13B02c8dE71680e71F0820c996E4bE43c2F57d15",name:"Mirrored Invesco QQ",symbol:"MQQQ",decimals:18},{chainId:1,address:"0x41BbEDd7286dAab5910a1f15d12CBda839852BD7",name:"Mirrored Microsoft",symbol:"MMSFT",decimals:18},{chainId:1,address:"0x9d1555d8cB3C846Bb4f7D5B1B1080872c3166676",name:"Mirrored iShares Si",symbol:"MSLV",decimals:18},{chainId:1,address:"0x21cA39943E91d704678F5D00b6616650F066fD63",name:"Mirrored Tesla",symbol:"MTSLA",decimals:18},{chainId:1,address:"0xe82bbB62fA81d0701643d1675FB50ec52fD3Df92",name:"DYDX Token",symbol:"DYDX",decimals:18},{chainId:10,address:"0xE405de8F52ba7559f9df3C368500B6E6ae6Cee49",name:"sETH",symbol:"Synth Ether",decimals:18},{chainId:10,address:"0x298B9B95708152ff6968aafd889c6586e9169f1D",name:"sBTC",symbol:"Synth Bitcoin",decimals:18},{chainId:10,address:"0xc5Db22719A06418028A40A9B5E9A7c02959D0d08",name:"sLINK",symbol:"Synth Link",decimals:18},{chainId:1,address:"0x6B60eE11b73230045cF9095E6e43AE9Ea638e172",name:"Shatner",symbol:"SHAT",decimals:18},{chainId:1,address:"0x7277a44D1325D81Ac58893002a1B40a41bea43fe",name:"FAANG Index",symbol:"FAANG",decimals:18},{chainId:1,address:"0x76175599887730786bdA1545D0D7AcE8737fEBB1",name:"ENS DAO",symbol:"ENS",decimals:18}]};class T3 extends ea{constructor(){super(...arguments),this.protocol=ge.exports.Protocol.V3}}class lc extends ta{constructor(){super(...arguments),this.protocol=ge.exports.Protocol.V2}}class A3 extends ge.exports.MixedRouteSDK{constructor(){super(...arguments),this.protocol=ge.exports.Protocol.MIXED}}var Ct;(function(r){r[r.SUCCESS=1]="SUCCESS",r[r.NO_ROUTE_FOUND=2]="NO_ROUTE_FOUND",r[r.NO_SWAP_NEEDED=3]="NO_SWAP_NEEDED"})(Ct||(Ct={}));var Bf;(function(r){r[r.UNIVERSAL_ROUTER=0]="UNIVERSAL_ROUTER",r[r.SWAP_ROUTER_02=1]="SWAP_ROUTER_02"})(Bf||(Bf={}));const Js=r=>{switch(r){case p.OPTIMISM:case p.OPTIMISM_GOERLI:case p.OPTIMISTIC_KOVAN:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},maxSwapsPerPath:3,minSplits:1,maxSplits:7,distributionPercent:10,forceCrossProtocol:!1};case p.ARBITRUM_ONE:case p.ARBITRUM_RINKEBY:case p.ARBITRUM_GOERLI:case p.CELO:case p.CELO_ALFAJORES:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:2},maxSwapsPerPath:2,minSplits:1,maxSplits:7,distributionPercent:25,forceCrossProtocol:!1};default:return{v2PoolSelection:{topN:3,topNDirectSwaps:1,topNTokenInOut:5,topNSecondHop:2,topNWithEachBaseToken:2,topNWithBaseToken:6},v3PoolSelection:{topN:2,topNDirectSwaps:2,topNTokenInOut:3,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:5},maxSwapsPerPath:3,minSplits:1,maxSplits:7,distributionPercent:5,forceCrossProtocol:!1}}},E3="https://ethgasstation.info/api/ethgasAPI.json";var uf={},I3=function(r,f){return r<f?-1:r>f?1:0},S3=function(r,f){return r<f?1:r>f?-1:0};function w3(r){return function(f,n){return r(n,f)}}function C3(r){return r===2?function(f,n){return f[0]<n[0]?-1:f[0]>n[0]?1:f[1]<n[1]?-1:f[1]>n[1]?1:0}:function(f,n){for(var a=0;a<r;){if(f[a]<n[a])return-1;if(f[a]>n[a])return 1;a++}return 0}}uf.DEFAULT_COMPARATOR=I3;uf.DEFAULT_REVERSE_COMPARATOR=S3;uf.reverseComparator=w3;uf.createTupleComparator=C3;var Va={};Va.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer!="undefined";Va.SYMBOL_SUPPORT=typeof Symbol!="undefined";var pc=Va,R3=pc.ARRAY_BUFFER_SUPPORT,O3=pc.SYMBOL_SUPPORT,Ha=function(f,n){var a,i,c,l,d;if(!f)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(f)||R3&&ArrayBuffer.isView(f)||typeof f=="string"||f.toString()==="[object Arguments]"){for(c=0,l=f.length;c<l;c++)n(f[c],c);return}if(typeof f.forEach=="function"){f.forEach(n);return}if(O3&&Symbol.iterator in f&&typeof f.next!="function"&&(f=f[Symbol.iterator]()),typeof f.next=="function"){for(a=f,c=0;d=a.next(),d.done!==!0;)n(d.value,c),c++;return}for(i in f)f.hasOwnProperty(i)&&n(f[i],i)},Gf={},hc={};(function(r){var f=Math.pow(2,8)-1,n=Math.pow(2,16)-1,a=Math.pow(2,32)-1,i=Math.pow(2,7)-1,c=Math.pow(2,15)-1,l=Math.pow(2,31)-1;r.getPointerArray=function(u){var m=u-1;if(m<=f)return Uint8Array;if(m<=n)return Uint16Array;if(m<=a)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(u){var m=u-1;return m<=i?Int8Array:m<=c?Int16Array:m<=l?Int32Array:Float64Array},r.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var d={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(u,m){var y=null,g=0,T,A,S,w,O;for(w=0,O=u.length;w<O;w++)S=m?m(u[w]):u[w],A=r.getNumberType(S),T=d[A.name],T>g&&(g=T,y=A);return y},r.isTypedArray=function(u){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView(u)},r.concat=function(){var u=0,m,y,g;for(m=0,g=arguments.length;m<g;m++)u+=arguments[m].length;var T=new arguments[0].constructor(u);for(m=0,y=0;m<g;m++)T.set(arguments[m],y),y+=arguments[m].length;return T},r.indices=function(u){for(var m=r.getPointerArray(u),y=new m(u),g=0;g<u;g++)y[g]=g;return y}})(hc);var mc=Ha,bc=hc;function _3(r){return Array.isArray(r)||bc.isTypedArray(r)}function Ka(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function x3(r){var f=Ka(r),n=typeof f=="number"?new Array(f):[],a=0;return mc(r,function(i){n[a++]=i}),n}function D3(r){var f=Ka(r),n=typeof f=="number"?bc.getPointerArray(f):Array,a=typeof f=="number"?new Array(f):[],i=typeof f=="number"?new n(f):[],c=0;return mc(r,function(l){a[c]=l,i[c]=c++}),[a,i]}Gf.isArrayLike=_3;Gf.guessLength=Ka;Gf.toArray=x3;Gf.toArrayWithIndices=D3;var Vn=Ha,yc=uf,tt=Gf,Er=yc.DEFAULT_COMPARATOR,Qa=yc.reverseComparator;function Ya(r,f,n,a){for(var i=f[a],c,l;a>n;){if(c=a-1>>1,l=f[c],r(i,l)<0){f[a]=l,a=c;continue}break}f[a]=i}function qf(r,f,n){for(var a=f.length,i=n,c=f[n],l=2*n+1,d;l<a;)d=l+1,d<a&&r(f[l],f[d])>=0&&(l=d),f[n]=f[l],n=l,l=2*n+1;f[n]=c,Ya(r,f,i,n)}function gc(r,f,n){f.push(n),Ya(r,f,0,f.length-1)}function Xa(r,f){var n=f.pop();if(f.length!==0){var a=f[0];return f[0]=n,qf(r,f,0),a}return n}function af(r,f,n){if(f.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var a=f[0];return f[0]=n,qf(r,f,0),a}function vc(r,f,n){var a;return f.length!==0&&r(f[0],n)<0&&(a=f[0],f[0]=n,n=a,qf(r,f,0)),n}function Lt(r,f){for(var n=f.length,a=n>>1,i=a;--i>=0;)qf(r,f,i)}function ja(r,f){for(var n=f.length,a=0,i=new Array(n);a<n;)i[a++]=Xa(r,f);return i}function P3(r,f,n){arguments.length===2&&(n=f,f=r,r=Er);var a=Qa(r),i,c,l,d=1/0,u;if(f===1){if(tt.isArrayLike(n)){for(i=0,c=n.length;i<c;i++)l=n[i],(d===1/0||r(l,d)<0)&&(d=l);return u=new n.constructor(1),u[0]=d,u}return Vn(n,function(y){(d===1/0||r(y,d)<0)&&(d=y)}),[d]}if(tt.isArrayLike(n)){if(f>=n.length)return n.slice().sort(r);for(u=n.slice(0,f),Lt(a,u),i=f,c=n.length;i<c;i++)a(n[i],u[0])>0&&af(a,u,n[i]);return u.sort(r)}var m=tt.guessLength(n);return m!==null&&m<f&&(f=m),u=new Array(f),i=0,Vn(n,function(y){i<f?u[i]=y:(i===f&&Lt(a,u),a(y,u[0])>0&&af(a,u,y)),i++}),u.length>i&&(u.length=i),u.sort(r)}function B3(r,f,n){arguments.length===2&&(n=f,f=r,r=Er);var a=Qa(r),i,c,l,d=-1/0,u;if(f===1){if(tt.isArrayLike(n)){for(i=0,c=n.length;i<c;i++)l=n[i],(d===-1/0||r(l,d)>0)&&(d=l);return u=new n.constructor(1),u[0]=d,u}return Vn(n,function(y){(d===-1/0||r(y,d)>0)&&(d=y)}),[d]}if(tt.isArrayLike(n)){if(f>=n.length)return n.slice().sort(a);for(u=n.slice(0,f),Lt(r,u),i=f,c=n.length;i<c;i++)r(n[i],u[0])>0&&af(r,u,n[i]);return u.sort(a)}var m=tt.guessLength(n);return m!==null&&m<f&&(f=m),u=new Array(f),i=0,Vn(n,function(y){i<f?u[i]=y:(i===f&&Lt(r,u),r(y,u[0])>0&&af(r,u,y)),i++}),u.length>i&&(u.length=i),u.sort(a)}function qe(r){if(this.clear(),this.comparator=r||Er,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}qe.prototype.clear=function(){this.items=[],this.size=0};qe.prototype.push=function(r){return gc(this.comparator,this.items,r),++this.size};qe.prototype.peek=function(){return this.items[0]};qe.prototype.pop=function(){return this.size!==0&&this.size--,Xa(this.comparator,this.items)};qe.prototype.replace=function(r){return af(this.comparator,this.items,r)};qe.prototype.pushpop=function(r){return vc(this.comparator,this.items,r)};qe.prototype.consume=function(){return this.size=0,ja(this.comparator,this.items)};qe.prototype.toArray=function(){return ja(this.comparator,this.items.slice())};qe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:qe,enumerable:!1}),r};typeof Symbol!="undefined"&&(qe.prototype[Symbol.for("nodejs.util.inspect.custom")]=qe.prototype.inspect);function Hn(r){if(this.clear(),this.comparator=r||Er,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Qa(this.comparator)}Hn.prototype=qe.prototype;qe.from=function(r,f){var n=new qe(f),a;return tt.isArrayLike(r)?a=r.slice():a=tt.toArray(r),Lt(n.comparator,a),n.items=a,n.size=a.length,n};Hn.from=function(r,f){var n=new Hn(f),a;return tt.isArrayLike(r)?a=r.slice():a=tt.toArray(r),Lt(n.comparator,a),n.items=a,n.size=a.length,n};qe.siftUp=qf;qe.siftDown=Ya;qe.push=gc;qe.pop=Xa;qe.replace=af;qe.pushpop=vc;qe.heapify=Lt;qe.consume=ja;qe.nsmallest=P3;qe.nlargest=B3;qe.MinHeap=qe;qe.MaxHeap=Hn;var M3=qe,Tc=uf,ba=M3,k3=Tc.DEFAULT_COMPARATOR,F3=Tc.reverseComparator;function U3(r,f,n,a){for(var i=n,c=a,l=f[a],d=2*a+1,u;d<i;)u=d+1,u<i&&r(f[d],f[u])>=0&&(d=u),f[a]=f[d],a=d,d=2*a+1;f[a]=l,ba.siftDown(r,f,c,a)}function Ac(r,f,n,a){for(var i=a,c=i,l=new r(a),d,u;c>0;)d=n[--c],c!==0&&(u=n[0],n[0]=d,U3(f,n,--a,0),d=u),l[c]=d;return l}function ft(r,f,n){if(arguments.length===2&&(n=f,f=null),this.ArrayClass=r,this.capacity=n,this.items=new r(n),this.clear(),this.comparator=f||k3,typeof n!="number"&&n<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=F3(this.comparator)}ft.prototype.clear=function(){this.size=0};ft.prototype.push=function(r){return this.size<this.capacity?(this.items[this.size]=r,ba.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(r,this.items[0])>0&&ba.replace(this.comparator,this.items,r),this.size};ft.prototype.peek=function(){return this.items[0]};ft.prototype.consume=function(){var r=Ac(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,r};ft.prototype.toArray=function(){return Ac(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};ft.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:ft,enumerable:!1}),r};typeof Symbol!="undefined"&&(ft.prototype[Symbol.for("nodejs.util.inspect.custom")]=ft.prototype.inspect);var N3=ft;function nt(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol!="undefined"&&(nt.prototype[Symbol.iterator]=function(){return this});nt.of=function(){var r=arguments,f=r.length,n=0;return new nt(function(){return n>=f?{done:!0}:{done:!1,value:r[n++]}})};nt.empty=function(){var r=new nt(function(){return{done:!0}});return r};nt.fromSequence=function(r){var f=0,n=r.length;return new nt(function(){return f>=n?{done:!0}:{done:!1,value:r[f++]}})};nt.is=function(r){return r instanceof nt?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};var L3=nt,Ec=L3,G3=Ha;function r0(){this.clear()}r0.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};r0.prototype.enqueue=function(r){return this.items.push(r),++this.size};r0.prototype.dequeue=function(){if(!!this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};r0.prototype.peek=function(){if(!!this.size)return this.items[this.offset]};r0.prototype.forEach=function(r,f){f=arguments.length>1?f:this;for(var n=this.offset,a=0,i=this.items.length;n<i;n++,a++)r.call(f,this.items[n],a,this)};r0.prototype.toArray=function(){return this.items.slice(this.offset)};r0.prototype.values=function(){var r=this.items,f=this.offset;return new Ec(function(){if(f>=r.length)return{done:!0};var n=r[f];return f++,{value:n,done:!1}})};r0.prototype.entries=function(){var r=this.items,f=this.offset,n=0;return new Ec(function(){if(f>=r.length)return{done:!0};var a=r[f];return f++,{value:[n++,a],done:!1}})};typeof Symbol!="undefined"&&(r0.prototype[Symbol.iterator]=r0.prototype.values);r0.prototype.toString=function(){return this.toArray().join(",")};r0.prototype.toJSON=function(){return this.toArray()};r0.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:r0,enumerable:!1}),r};typeof Symbol!="undefined"&&(r0.prototype[Symbol.for("nodejs.util.inspect.custom")]=r0.prototype.inspect);r0.from=function(r){var f=new r0;return G3(r,function(n){f.enqueue(n)}),f};r0.of=function(){return r0.from(arguments)};var q3=r0;const xf={[p.MAINNET]:[Uf,kf,Ff],[p.RINKEBY]:[Nf,Lf],[p.ARBITRUM_ONE]:[or,ar,ir],[p.OPTIMISM]:[Zn,zn,Jn],[p.OPTIMISM_GOERLI]:[fr,er,tr],[p.OPTIMISTIC_KOVAN]:[sr,nr,rr],[p.ARBITRUM_RINKEBY]:[ur,cr],[p.ARBITRUM_GOERLI]:[dr],[p.KOVAN]:[Qu,Hu,Ku],[p.G\u00D6RLI]:[Vu,qu,$u,Wu],[p.ROPSTEN]:[Gu,Nu,Lu],[p.POLYGON]:[pr],[p.POLYGON_MUMBAI]:[hr],[p.CELO]:[gr],[p.CELO_ALFAJORES]:[Pf],[p.GNOSIS]:[vr],[p.MOONBEAM]:[Tr],[p.BSC]:[yr,br,mr]};class $3{}class Ic{}async function W3(r,f){const n=r.chainId,a=he[n],c=(await f.getPools([[a,r]])).getPool(a,r);return!c||c.reserve0.equalTo(0)||c.reserve1.equalTo(0)?(M.error({weth:a,token:r,reserve0:c==null?void 0:c.reserve0.toExact(),reserve1:c==null?void 0:c.reserve1.toExact()},`Could not find a valid WETH V2 pool with ${r.symbol} for computing gas costs.`),null):c}async function Fn(r,f){const n=he[r.chainId],a=_([ke.HIGH,ke.MEDIUM,ke.LOW,ke.LOWEST]).map(d=>[n,r,d]).value(),i=await f.getPools(a),c=_([ke.HIGH,ke.MEDIUM,ke.LOW,ke.LOWEST]).map(d=>i.getPool(n,r,d)).compact().value();return c.length==0?(M.error({pools:c},`Could not find a ${n.symbol} pool with ${r.symbol} for computing gas costs.`),null):_.maxBy(c,d=>d.liquidity)}async function Sc(r,f){const n=xf[r],a=he[r];if(!n)throw new Error(`Could not find a USD token for computing gas costs on ${r}`);const i=_([ke.HIGH,ke.MEDIUM,ke.LOW,ke.LOWEST]).flatMap(u=>_.map(n,m=>[a,m,u])).value(),c=await f.getPools(i),l=_([ke.HIGH,ke.MEDIUM,ke.LOW,ke.LOWEST]).flatMap(u=>{const m=[];for(const y of n){const g=c.getPool(a,y,u);g&&m.push(g)}return m}).compact().value();if(l.length==0){const u=`Could not find a USD/${a.symbol} pool for computing gas costs.`;throw M.error({pools:l},u),new Error(u)}return _.maxBy(l,u=>u.liquidity)}function fu(r,f){const n=r.slice(2).match(/.{1,2}/g),a=n.length;let i=0;for(let d=0;d<a;d+=1)parseInt(n[d],16)==0?i+=4:i+=16;const c=f.add(i),l=68*16;return c.add(l)}const wc=ye.from(0),Cc=r=>{switch(r){case p.MAINNET:case p.ROPSTEN:case p.RINKEBY:case p.G\u00D6RLI:case p.OPTIMISM:case p.OPTIMISM_GOERLI:case p.OPTIMISTIC_KOVAN:case p.BSC:case p.KOVAN:return ye.from(2e3);case p.ARBITRUM_ONE:case p.ARBITRUM_RINKEBY:case p.ARBITRUM_GOERLI:return ye.from(5e3);case p.POLYGON:case p.POLYGON_MUMBAI:return ye.from(2e3);case p.CELO:case p.CELO_ALFAJORES:return ye.from(2e3);case p.GNOSIS:return ye.from(2e3);case p.MOONBEAM:return ye.from(2e3)}},Rc=r=>{switch(r){case p.MAINNET:case p.ROPSTEN:case p.RINKEBY:case p.G\u00D6RLI:case p.BSC:case p.KOVAN:return ye.from(31e3);case p.OPTIMISM:case p.OPTIMISM_GOERLI:case p.OPTIMISTIC_KOVAN:return ye.from(31e3);case p.ARBITRUM_ONE:case p.ARBITRUM_RINKEBY:case p.ARBITRUM_GOERLI:return ye.from(31e3);case p.POLYGON:case p.POLYGON_MUMBAI:return ye.from(31e3);case p.CELO:case p.CELO_ALFAJORES:return ye.from(31e3);case p.GNOSIS:return ye.from(31e3);case p.MOONBEAM:return ye.from(31e3)}},Oc=r=>{switch(r){case p.MAINNET:case p.ROPSTEN:case p.RINKEBY:case p.G\u00D6RLI:case p.KOVAN:case p.BSC:case p.OPTIMISM:case p.OPTIMISM_GOERLI:case p.OPTIMISTIC_KOVAN:return ye.from(8e4);case p.ARBITRUM_ONE:case p.ARBITRUM_RINKEBY:case p.ARBITRUM_GOERLI:return ye.from(8e4);case p.POLYGON:case p.POLYGON_MUMBAI:return ye.from(8e4);case p.CELO:case p.CELO_ALFAJORES:return ye.from(8e4);case p.GNOSIS:return ye.from(8e4);case p.MOONBEAM:return ye.from(8e4)}};class V3 extends Ic{constructor(){super()}async buildGasModel({chainId:f,gasPriceWei:n,v3poolProvider:a,amountToken:i,quoteToken:c,l2GasDataProvider:l}){const d=l?await l.getGasData():void 0,u=await Sc(f,a),m=async w=>{const O={type:Bf.UNIVERSAL_ROUTER,recipient:"0x0000000000000000000000000000000000000001",deadlineOrPreviousBlockhash:100,slippageTolerance:new vu(5,1e4)};let k=ye.from(0),Q=ye.from(0);f==p.OPTIMISM||f==p.OPTIMISTIC_KOVAN||f==p.OPTIMISM_GOERLI?[k,Q]=this.calculateOptimismToL1SecurityFee(w,O,d):(f==p.ARBITRUM_ONE||f==p.ARBITRUM_RINKEBY||f==p.ARBITRUM_GOERLI)&&([k,Q]=this.calculateArbitrumToL1SecurityFee(w,O,d));const $=he[f],j=De.fromRawAmount($,Q.toString()),J=(u.token0.address==$.address?u.token0Price:u.token1Price).quote(j);let K=j;if(!c.equals($)){const te=await Fn(c,a);te?K=(te.token0.address==$.address?te.token0Price:te.token1Price).quote(j):(M.info("Could not find a pool to convert the cost into the quote token"),K=De.fromRawAmount(c,0))}return{gasUsedL1:k,gasCostL1USD:J,gasCostL1QuoteToken:K}},y=he[f];if(c.equals(y))return{estimateGasCost:O=>{const{totalGasCostNativeCurrency:k,baseGasUse:Q}=this.estimateGas(O,n,f),F=(u.token0.address==y.address?u.token0Price:u.token1Price).quote(k);return{gasEstimate:Q,gasCostInToken:k,gasCostInUSD:F}},calculateL1GasFees:m};const g=await Fn(c,a);let T=null;i.equals(y)||(T=await Fn(i,a));const A=u.token0.address==y.address?u.token1:u.token0;return{estimateGasCost:(w=>{const{totalGasCostNativeCurrency:O,baseGasUse:k}=this.estimateGas(w,n,f);let Q=null;if(g){const K=g.token0.address==y.address?g.token0Price:g.token1Price;try{Q=K.quote(O)}catch(te){throw M.info({nativeTokenPriceBase:K.baseCurrency,nativeTokenPriceQuote:K.quoteCurrency,gasCostInEth:O.currency},"Debug eth price token issue"),te}}else M.info(`Unable to find ${y.symbol} pool with the quote token, ${c.symbol} to produce gas adjusted costs. Using amountToken to calculate gas costs.`);if(T){const J=new Lh(w.amount.currency,w.quote.currency,w.amount.quotient,w.quote.quotient),te=T.token0.address==y.address?T.token0Price:T.token1Price,ce=te.quote(O),le=J.quote(ce);(Q===null||le.lessThan(Q.asFraction))&&(M.info({nativeAmountTokenPrice:te.toSignificant(6),gasCostInTermsOfQuoteToken:Q?Q.toExact():0,gasCostInTermsOfAmountToken:ce.toExact(),executionPrice:J.toSignificant(6),syntheticGasCostInTermsOfQuoteToken:le.toSignificant(6)},"New gasCostInTermsOfQuoteToken calculated with synthetic quote token price is less than original"),Q=le)}const j=u.token0.address==y.address?u.token0Price:u.token1Price;let F;try{F=j.quote(O)}catch(J){throw M.info({usdT1:u.token0.symbol,usdT2:u.token1.symbol,gasCostInNativeToken:O.currency.symbol},"Failed to compute USD gas price"),J}return Q===null?(M.info(`Unable to find ${y.symbol} pool with the quote token, ${c.symbol}, or amount Token, ${i.symbol} to produce gas adjusted costs. Route will not account for gas.`),{gasEstimate:k,gasCostInToken:De.fromRawAmount(c,0),gasCostInUSD:De.fromRawAmount(A,0)}):{gasEstimate:k,gasCostInToken:Q,gasCostInUSD:F}}).bind(this),calculateL1GasFees:m}}estimateGas(f,n,a){const i=ye.from(Math.max(1,_.sum(f.initializedTicksCrossedList))),c=ye.from(f.route.pools.length),l=Oc(a).mul(c),d=Rc(a).mul(i),u=wc.mul(0),m=Cc(a).add(l).add(d).add(u),y=n.mul(m),g=he[a];return{totalGasCostNativeCurrency:De.fromRawAmount(g,y.toString()),totalInitializedTicksCrossed:i,baseGasUse:m}}calculateOptimismToL1SecurityFee(f,n,a){const{l1BaseFee:i,scalar:c,decimals:l,overhead:d}=a,u=f[0],m=u.tradeType==$e.EXACT_INPUT?u.amount.currency:u.quote.currency,y=u.tradeType==$e.EXACT_INPUT?u.quote.currency:u.amount.currency,g=ha(m,y,u.tradeType,f),T=ma(g,n,p.OPTIMISM).calldata,A=fu(T,d),w=A.mul(i).mul(c),O=ye.from(10).pow(l),k=w.div(O);return[A,k]}calculateArbitrumToL1SecurityFee(f,n,a){const{perL2TxFee:i,perL1CalldataFee:c}=a,l=f[0],d=l.tradeType==$e.EXACT_INPUT?l.amount.currency:l.quote.currency,u=l.tradeType==$e.EXACT_INPUT?l.quote.currency:l.amount.currency,m=ha(d,u,l.tradeType,f),y=ma(m,n,p.ARBITRUM_ONE).calldata,g=fu(y,ye.from(0));let T=g.mul(c);return T=T.add(i),[g,T]}}async function nu(r,f,n,a,i,c,l){const d=Date.now(),{forceMixedRoutes:u}=c;if(u&&(M.info({forceMixedRoutes:u},"Forcing mixed routes by filtering out other route types"),n=_.filter(n,S=>S.protocol===ge.exports.Protocol.MIXED),!n))return null;const m={};for(const S of n)m[S.percent]||(m[S.percent]=[]),m[S.percent].push(S);ie.putMetric("BuildRouteWithValidQuoteObjects",Date.now()-d,oe.Milliseconds);const y=await H3(a,m,f,i,S=>S.quoteAdjustedForGas,c,l);if(!y)return null;const{routes:g}=y,T=_.reduce(g,(S,w)=>S.add(w.amount),De.fromRawAmount(g[0].amount.currency,0)),A=r.subtract(T);return A.greaterThan(0)&&(M.info({missingAmount:A.quotient.toString()},"Optimal route's amounts did not equal exactIn/exactOut total. Adding missing amount to last route in array."),g[g.length-1].amount=g[g.length-1].amount.add(A)),M.info({routes:Uu(g),numSplits:g.length,amount:r.toExact(),quote:y.quote.toExact(),quoteGasAdjusted:y.quoteGasAdjusted.toFixed(Math.min(y.quoteGasAdjusted.currency.decimals,2)),estimatedGasUSD:y.estimatedGasUsedUSD.toFixed(Math.min(y.estimatedGasUsedUSD.currency.decimals,2)),estimatedGasToken:y.estimatedGasUsedQuoteToken.toFixed(Math.min(y.estimatedGasUsedQuoteToken.currency.decimals,2))},`Found best swap route. ${g.length} split.`),y}async function H3(r,f,n,a,i,c,l){var d;const u=_.mapValues(f,x=>x.sort((V,ee)=>r==$e.EXACT_INPUT?i(V).greaterThan(i(ee))?-1:1:i(V).lessThan(i(ee))?-1:1)),m=r==$e.EXACT_INPUT?(x,V)=>x.greaterThan(V):(x,V)=>x.lessThan(V),y=x=>{let V=x[0];for(let ee=1;ee<x.length;ee++)V=V.add(x[ee]);return V};let g,T;const A=new N3(Array,(x,V)=>m(x.quote,V.quote)?-1:1,3),{minSplits:S,maxSplits:w,forceCrossProtocol:O}=c;if(!u[100]||S>1||O)M.info({percentToSortedQuotes:_.mapValues(u,x=>x.length)},"Did not find a valid route without any splits. Continuing search anyway.");else{g=i(u[100][0]),T=[u[100][0]];for(const x of u[100].slice(0,5))A.push({quote:i(x),routes:[x]})}const k=new q3;for(let x=n.length;x>=0;x--){const V=n[x];!u[V]||(k.enqueue({curRoutes:[u[V][0]],percentIndex:x,remainingPercent:100-V,special:!1}),!(!u[V]||!u[V][1])&&k.enqueue({curRoutes:[u[V][1]],percentIndex:x,remainingPercent:100-V,special:!0}))}let Q=1,$=Date.now();for(;k.size>0;){ie.putMetric(`Split${Q}Done`,Date.now()-$,oe.Milliseconds),$=Date.now(),M.info({top5:_.map(Array.from(A.consume()),V=>`${V.quote.toExact()} (${_(V.routes).map(ee=>ee.toString()).join(", ")})`),onQueue:k.size},`Top 3 with ${Q} splits`),A.clear();let x=k.size;if(Q++,Q>=3&&T&&T.length<Q-1)break;if(Q>w){M.info("Max splits reached. Stopping search."),ie.putMetric("MaxSplitsHitReached",1,oe.Count);break}for(;x>0;){x--;const{remainingPercent:V,curRoutes:ee,percentIndex:se,special:Z}=k.dequeue();for(let de=se;de>=0;de--){const Te=n[de];if(Te>V||!u[Te])continue;const Ce=u[Te],Ae=K3(ee,Ce,O);if(!Ae)continue;const Ye=V-Te,Ne=[...ee,Ae];if(Ye==0&&Q>=S){const Xe=_.map(Ne,Ie=>i(Ie)),We=y(Xe);let z=De.fromRawAmount(We.currency,0);if(J1.includes(a)){const Ie=Ne.every(Ke=>Ke.protocol==ge.exports.Protocol.V3);if(l==null||!Ie)throw new Error("Can't compute L1 gas fees.");z=(await l.calculateL1GasFees(Ne)).gasCostL1QuoteToken}const ne=r==$e.EXACT_INPUT?We.subtract(z):We.add(z);A.push({quote:ne,routes:Ne}),(!g||m(ne,g))&&(g=ne,T=Ne,Z&&ie.putMetric("BestSwapNotPickingBestForPercent",1,oe.Count))}else k.enqueue({curRoutes:Ne,remainingPercent:Ye,percentIndex:de,special:Z})}}}if(!T){M.info("Could not find a valid swap");return}const j=Date.now();let F=y(_.map(T,x=>x.quoteAdjustedForGas));const J=_(T).map(x=>x.gasEstimate).reduce((x,V)=>x.add(V),ye.from(0));if(!xf[a]||!xf[a][0])throw new Error(`Could not find a USD token for computing gas costs on ${a}`);const K=xf[a][0],te=K.decimals;let ce={gasUsedL1:ye.from(0),gasCostL1USD:De.fromRawAmount(K,0),gasCostL1QuoteToken:De.fromRawAmount((d=T[0])===null||d===void 0?void 0:d.quoteToken,0)};if(J1.includes(a)){const x=T.every(V=>V.protocol==ge.exports.Protocol.V3);if(l==null||!x)throw new Error("Can't compute L1 gas fees.");ce=await l.calculateL1GasFees(T)}const{gasCostL1USD:le,gasCostL1QuoteToken:Me}=ce,P=_(T).map(x=>{const V=te-x.gasCostInUSD.currency.decimals;return V==0?De.fromRawAmount(K,x.gasCostInUSD.quotient):De.fromRawAmount(K,e0.multiply(x.gasCostInUSD.quotient,e0.exponentiate(e0.BigInt(10),e0.BigInt(V))))}).value();let N=y(P);if(N.currency!=le.currency){const x=te-le.currency.decimals;N=N.add(De.fromRawAmount(K,e0.multiply(le.quotient,e0.exponentiate(e0.BigInt(10),e0.BigInt(x)))))}else N=N.add(le);M.info({estimatedGasUsedUSD:N.toExact(),normalizedUsdToken:K,routeUSDGasEstimates:_.map(T,x=>`${x.percent}% ${z0(x.route)} ${x.gasCostInUSD.toExact()}`),flatL1GasCostUSD:le.toExact()},"USD gas estimates of best route");const L=y(_.map(T,x=>x.gasCostInToken)).add(Me),B=y(_.map(T,x=>x.quote));r==$e.EXACT_INPUT?F=F.subtract(Me):F=F.add(Me);const H=T.sort((x,V)=>V.amount.greaterThan(x.amount)?1:-1);return ie.putMetric("PostSplitDone",Date.now()-j,oe.Milliseconds),{quote:B,quoteGasAdjusted:F,estimatedGasUsed:J,estimatedGasUsedUSD:N,estimatedGasUsedQuoteToken:L,routes:H}}const K3=(r,f,n)=>{const a=new Set,i=_(r).flatMap(d=>d.poolAddresses).value();for(const d of i)a.add(d);const c=new Set,l=_(r).flatMap(d=>d.protocol).uniq().value();for(const d of l)c.add(d);for(const d of f){const{poolAddresses:u,protocol:m}=d;if(!(u.some(g=>a.has(g))||n&&c.size==1&&c.has(m)))return d}return null};function Q3(r,f,n,a){const i=new Ut(n.quotient).subtract(r.multiply(a.quotient)).divide(r.multiply(f).add(1));if(i.lessThan(0))throw new Error("routeToRatio: insufficient input token amount");return De.fromRawAmount(n.currency,i.quotient)}const _c=ye.from(135e3),xc=ye.from(5e4);class Y3 extends $3{constructor(){super()}async buildGasModel({chainId:f,gasPriceWei:n,poolProvider:a,token:i}){if(i.equals(he[f])){const d=await this.getHighestLiquidityUSDPool(f,a);return{estimateGasCost:u=>{const{gasCostInEth:m,gasUse:y}=this.estimateGas(u,n,f),A=(d.token0.address==he[f].address?d.token0Price:d.token1Price).quote(m);return{gasEstimate:y,gasCostInToken:m,gasCostInUSD:A}}}}const c=await this.getEthPool(f,i,a);c||M.info("Unable to find ETH pool with the quote token to produce gas adjusted costs. Route will not account for gas.");const l=await this.getHighestLiquidityUSDPool(f,a);return{estimateGasCost:d=>{const u=l.token0.address==he[f].address?l.token1:l.token0,{gasCostInEth:m,gasUse:y}=this.estimateGas(d,n,f);if(!c)return{gasEstimate:y,gasCostInToken:De.fromRawAmount(i,0),gasCostInUSD:De.fromRawAmount(u,0)};const T=c.token0.address==he[f].address?c.token0Price:c.token1Price;let A;try{A=T.quote(m)}catch(k){throw M.error({ethTokenPriceBase:T.baseCurrency,ethTokenPriceQuote:T.quoteCurrency,gasCostInEth:m.currency},"Debug eth price token issue"),k}const w=l.token0.address==he[f].address?l.token0Price:l.token1Price;let O;try{O=w.quote(m)}catch(k){throw M.error({usdT1:l.token0.symbol,usdT2:l.token1.symbol,gasCostInEthToken:m.currency.symbol},"Failed to compute USD gas price"),k}return{gasEstimate:y,gasCostInToken:A,gasCostInUSD:O}}}}estimateGas(f,n,a){const i=f.route.pairs.length,c=_c.add(xc.mul(i-1)),l=n.mul(c),d=he[a];return{gasCostInEth:De.fromRawAmount(d,l.toString()),gasUse:c}}async getEthPool(f,n,a){const i=he[f],l=(await a.getPools([[i,n]])).getPool(i,n);return!l||l.reserve0.equalTo(0)||l.reserve1.equalTo(0)?(M.error({weth:i,token:n,reserve0:l==null?void 0:l.reserve0.toExact(),reserve1:l==null?void 0:l.reserve1.toExact()},`Could not find a valid WETH pool with ${n.symbol} for computing gas costs.`),null):l}async getHighestLiquidityUSDPool(f,n){const a=xf[f];if(!a)throw new Error(`Could not find a USD token for computing gas costs on ${f}`);const i=_.map(a,m=>[m,he[f]]),l=(await n.getPools(i)).getAllPools(),d=_.filter(l,m=>m.reserve0.greaterThan(0)&&m.reserve1.greaterThan(0));if(d.length==0)throw M.error({pools:d},"Could not find a USD/WETH pool for computing gas costs."),new Error("Can't find USD/WETH pool for computing gas costs.");return _.maxBy(d,m=>m.token0.equals(he[f])?parseFloat(m.reserve0.toSignificant(2)):parseFloat(m.reserve1.toSignificant(2)))}}class X3 extends Ic{constructor(){super()}async buildGasModel({chainId:f,gasPriceWei:n,v3poolProvider:a,quoteToken:i,v2poolProvider:c}){const l=await Sc(f,a),d=he[f];if(i.equals(d))return{estimateGasCost:A=>{const{totalGasCostNativeCurrency:S,baseGasUse:w}=this.estimateGas(A,n,f),Q=(l.token0.address==d.address?l.token0Price:l.token1Price).quote(S);return{gasEstimate:w,gasCostInToken:S,gasCostInUSD:Q}}};const u=await Fn(i,a);let m;c&&(m=await W3(i,c));const y=l.token0.address==d.address?l.token1:l.token0;return{estimateGasCost:(T=>{const{totalGasCostNativeCurrency:A,baseGasUse:S}=this.estimateGas(T,n,f);if(!u&&!m)return M.info(`Unable to find ${d.symbol} pool with the quote token, ${i.symbol} to produce gas adjusted costs. Route will not account for gas.`),{gasEstimate:S,gasCostInToken:De.fromRawAmount(i,0),gasCostInUSD:De.fromRawAmount(y,0)};const w=(!u||e0.equal(u.liquidity,e0.BigInt(0)))&&m?m:u,k=w.token0.address==d.address?w.token0Price:w.token1Price;let Q;try{Q=k.quote(A)}catch(J){throw M.info({nativeTokenPriceBase:k.baseCurrency,nativeTokenPriceQuote:k.quoteCurrency,gasCostInEth:A.currency},"Debug eth price token issue"),J}const j=l.token0.address==d.address?l.token0Price:l.token1Price;let F;try{F=j.quote(A)}catch(J){throw M.info({usdT1:l.token0.symbol,usdT2:l.token1.symbol,gasCostInNativeToken:A.currency.symbol},"Failed to compute USD gas price"),J}return{gasEstimate:S,gasCostInToken:Q,gasCostInUSD:F}}).bind(this)}}estimateGas(f,n,a){const i=ye.from(Math.max(1,_.sum(f.initializedTicksCrossedList)));let c=ye.from(0);const l=f.route;ge.exports.partitionMixedRouteByProtocol(l).map(A=>{A.every(S=>S instanceof mt)?(c=c.add(Cc(a)),c=c.add(Oc(a).mul(A.length))):A.every(S=>S instanceof sf)&&(c=c.add(_c),c=c.add(xc.mul(A.length-1)))});const u=Rc(a).mul(i),m=wc.mul(0);c=c.add(u).add(m);const y=n.mul(c),g=he[a];return{totalGasCostNativeCurrency:De.fromRawAmount(g,y.toString()),totalInitializedTicksCrossed:i,baseGasUse:c}}}class za{constructor(f,n,a,i){this.tokenProvider=f,this.chainId=n,this.blockedTokenListProvider=a,this.tokenValidatorProvider=i}getRoutesThenQuotes(f,n,a,i,c,l,d,u,m){return this.getRoutes(f,n,l,d).then(y=>this.getQuotes(y.routes,a,i,c,l,d,y.candidatePools,u,m))}async applyTokenValidatorToPools(f,n){if(!this.tokenValidatorProvider)return f;M.info(`Running token validator on ${f.length} pools`);const a=_.flatMap(f,l=>[l.token0,l.token1]),i=await this.tokenValidatorProvider.validateTokens(a);return _.filter(f,l=>{const d=i.getValidationByToken(l.token0),u=i.getValidationByToken(l.token1),m=n(l.token0,d),y=n(l.token1,u);return(m||y)&&M.info(`Dropping pool ${Xn(l)} because token is invalid. ${l.token0.symbol}: ${d}, ${l.token1.symbol}: ${u}`),!m&&!y})}}class j3{constructor({amount:f,rawQuote:n,percent:a,route:i,gasModel:c,quoteToken:l,tradeType:d,v2PoolProvider:u}){this.protocol=ge.exports.Protocol.V2,this.amount=f,this.rawQuote=n,this.quote=De.fromRawAmount(l,n.toString()),this.percent=a,this.route=i,this.gasModel=c,this.quoteToken=l,this.tradeType=d;const{gasEstimate:m,gasCostInToken:y,gasCostInUSD:g}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=y,this.gasCostInUSD=g,this.gasEstimate=m,this.tradeType==$e.EXACT_INPUT){const T=this.quote.subtract(y);this.quoteAdjustedForGas=T}else{const T=this.quote.add(y);this.quoteAdjustedForGas=T}this.poolAddresses=_.map(i.pairs,T=>u.getPoolAddress(T.token0,T.token1).poolAddress),this.tokenPath=this.route.path}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${z0(this.route)}`}}class z3{constructor({amount:f,rawQuote:n,sqrtPriceX96AfterList:a,initializedTicksCrossedList:i,quoterGasEstimate:c,percent:l,route:d,gasModel:u,quoteToken:m,tradeType:y,v3PoolProvider:g}){this.protocol=ge.exports.Protocol.V3,this.amount=f,this.rawQuote=n,this.sqrtPriceX96AfterList=a,this.initializedTicksCrossedList=i,this.quoterGasEstimate=c,this.quote=De.fromRawAmount(m,n.toString()),this.percent=l,this.route=d,this.gasModel=u,this.quoteToken=m,this.tradeType=y;const{gasEstimate:T,gasCostInToken:A,gasCostInUSD:S}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=A,this.gasCostInUSD=S,this.gasEstimate=T,this.tradeType==$e.EXACT_INPUT){const w=this.quote.subtract(A);this.quoteAdjustedForGas=w}else{const w=this.quote.add(A);this.quoteAdjustedForGas=w}this.poolAddresses=_.map(d.pools,w=>g.getPoolAddress(w.token0,w.token1,w.fee).poolAddress),this.tokenPath=this.route.tokenPath}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${z0(this.route)}`}}class J3{constructor({amount:f,rawQuote:n,sqrtPriceX96AfterList:a,initializedTicksCrossedList:i,quoterGasEstimate:c,percent:l,route:d,mixedRouteGasModel:u,quoteToken:m,tradeType:y,v3PoolProvider:g,v2PoolProvider:T}){this.protocol=ge.exports.Protocol.MIXED,this.amount=f,this.rawQuote=n,this.sqrtPriceX96AfterList=a,this.initializedTicksCrossedList=i,this.quoterGasEstimate=c,this.quote=De.fromRawAmount(m,n.toString()),this.percent=l,this.route=d,this.gasModel=u,this.quoteToken=m,this.tradeType=y;const{gasEstimate:A,gasCostInToken:S,gasCostInUSD:w}=this.gasModel.estimateGasCost(this);if(this.gasCostInToken=S,this.gasCostInUSD=w,this.gasEstimate=A,this.tradeType==$e.EXACT_INPUT){const O=this.quote.subtract(S);this.quoteAdjustedForGas=O}else{const O=this.quote.add(S);this.quoteAdjustedForGas=O}this.poolAddresses=_.map(d.pools,O=>O instanceof mt?g.getPoolAddress(O.token0,O.token1,O.fee).poolAddress:T.getPoolAddress(O.token0,O.token1).poolAddress),this.tokenPath=this.route.path}toString(){return`${this.percent.toFixed(2)}% QuoteGasAdj[${this.quoteAdjustedForGas.toExact()}] Quote[${this.quote.toExact()}] Gas[${this.gasEstimate.toString()}] = ${z0(this.route)}`}}function Z3(r,f,n,a){return Ja(r,f,(i,c,l)=>new T3(i,c,l),n,a)}function ey(r,f,n,a){return Ja(r,f,(i,c,l)=>new lc(i,c,l),n,a)}function ty(r,f,n,a){return Ja(r,f,(c,l,d)=>new A3(c,l,d),n,a).filter(c=>!c.pools.every(l=>l instanceof mt)&&!c.pools.every(l=>l instanceof sf))}function Ja(r,f,n,a,i){var c;const l=Array(a.length).fill(!1),d=[],u=(m,y,g,T,A)=>{if(!(g.length>i)){if(g.length>0&&g[g.length-1].involvesToken(y)){d.push(n([...g],m,y));return}for(let S=0;S<a.length;S++){if(T[S])continue;const w=a[S],O=A||m;if(!w.involvesToken(O))continue;const k=w.token0.equals(O)?w.token1:w.token0;g.push(w),T[S]=!0,u(m,y,g,T,k),T[S]=!1,g.pop()}}};return u(r,f,[],l),M.info({routes:d.map(z0),pools:a.map(Xn)},`Computed ${d.length} possible routes for type ${(c=d[0])===null||c===void 0?void 0:c.protocol}.`),d}const Dc={[p.MAINNET]:[kf,Ff,jn,Uf,he[1],Lb],[p.RINKEBY]:[Nf,Lf],[p.OPTIMISM]:[Zn,zn,Jn,Ma],[p.OPTIMISM_GOERLI]:[fr,er,tr,ka],[p.OPTIMISTIC_KOVAN]:[sr,nr,Fa,rr],[p.ARBITRUM_ONE]:[or,ar,Ua,ir],[p.ARBITRUM_RINKEBY]:[ur,cr],[p.ARBITRUM_GOERLI]:[dr],[p.POLYGON]:[pr,lr],[p.POLYGON_MUMBAI]:[hr,Na],[p.CELO]:[gr,Ga,La],[p.CELO_ALFAJORES]:[Pf,ec,qa],[p.GNOSIS]:[fc,tc,vr],[p.MOONBEAM]:[$a,Tr,Wa,Qb],[p.BSC]:[mr,br,yr]};async function Pc({tokenIn:r,tokenOut:f,routeType:n,routingConfig:a,subgraphProvider:i,tokenProvider:c,poolProvider:l,blockedTokenListProvider:d,chainId:u}){var m,y,g,T,A;const{blockNumber:S,v3PoolSelection:{topN:w,topNDirectSwaps:O,topNTokenInOut:k,topNSecondHop:Q,topNSecondHopForTokenAddress:$,topNWithEachBaseToken:j,topNWithBaseToken:F}}=a,J=r.address.toLowerCase(),K=f.address.toLowerCase(),te=Date.now(),ce=await i.getPools(r,f,{blockNumber:S});M.info({samplePools:ce.slice(0,3)},"Got all pools from V3 subgraph provider");const le=_.map(ce,X=>({...X,token0:{...X.token0,id:X.token0.id.toLowerCase()},token1:{...X.token1,id:X.token1.id.toLowerCase()}}));ie.putMetric("V3SubgraphPoolsLoad",Date.now()-te,oe.Milliseconds);let Me=le;if(d){Me=[];for(const X of le){const Re=await d.getTokenByAddress(X.token0.id),Be=await d.getTokenByAddress(X.token1.id);Re||Be||Me.push(X)}}const P=_(Me).sortBy(X=>-X.tvlUSD).value();M.info(`After filtering blocked tokens went from ${le.length} to ${P.length}.`);const N=new Set,L=X=>{_(X).map(Re=>Re.id).forEach(Re=>N.add(Re))},B=(m=Dc[u])!==null&&m!==void 0?m:[],H=_(B).flatMap(X=>_(P).filter(Re=>{const Be=X.address.toLowerCase();return Re.token0.id==Be&&Re.token1.id==J||Re.token1.id==Be&&Re.token0.id==J}).sortBy(Re=>-Re.tvlUSD).slice(0,j).value()).sortBy(X=>-X.tvlUSD).slice(0,F).value(),x=_(B).flatMap(X=>_(P).filter(Re=>{const Be=X.address.toLowerCase();return Re.token0.id==Be&&Re.token1.id==K||Re.token1.id==Be&&Re.token0.id==K}).sortBy(Re=>-Re.tvlUSD).slice(0,j).value()).sortBy(X=>-X.tvlUSD).slice(0,F).value();let V=_(P).filter(X=>!N.has(X.id)&&(X.token0.id==J&&X.token1.id==K||X.token1.id==J&&X.token0.id==K)).slice(0,O).value();V.length==0&&O>0&&(V=_.map([ke.HIGH,ke.MEDIUM,ke.LOW,ke.LOWEST],X=>{const{token0:Re,token1:Be,poolAddress:D0}=l.getPoolAddress(r,f,X);return{id:D0,feeTier:Fu(X),liquidity:"10000",token0:{id:Re.address},token1:{id:Be.address},tvlETH:1e4,tvlUSD:1e4}})),L(V);const ee=(y=he[u])===null||y===void 0?void 0:y.address;let se=[];(((g=he[u])===null||g===void 0?void 0:g.symbol)==((T=he[p.MAINNET])===null||T===void 0?void 0:T.symbol)&&f.symbol!="WETH"&&f.symbol!="WETH9"&&f.symbol!="ETH"||((A=he[u])===null||A===void 0?void 0:A.symbol)==lr.symbol&&f.symbol!="MATIC"&&f.symbol!="WMATIC")&&(se=_(P).filter(X=>n==$e.EXACT_INPUT?X.token0.id==ee&&X.token1.id==K||X.token1.id==ee&&X.token0.id==K:X.token0.id==ee&&X.token1.id==J||X.token1.id==ee&&X.token0.id==J).slice(0,1).value()),L(se);const Z=_(P).filter(X=>!N.has(X.id)).slice(0,w).value();L(Z);const de=_(P).filter(X=>!N.has(X.id)&&(X.token0.id==J||X.token1.id==J)).slice(0,k).value();L(de);const Te=_(P).filter(X=>!N.has(X.id)&&(X.token0.id==K||X.token1.id==K)).slice(0,k).value();L(Te);const Ce=_(de).map(X=>J==X.token0.id?X.token1.id:X.token0.id).flatMap(X=>{var Re;return _(P).filter(Be=>!N.has(Be.id)&&(Be.token0.id==X||Be.token1.id==X)).slice(0,(Re=$==null?void 0:$.get(X))!==null&&Re!==void 0?Re:Q).value()}).uniqBy(X=>X.id).value();L(Ce);const Ae=_(Te).map(X=>K==X.token0.id?X.token1.id:X.token0.id).flatMap(X=>{var Re;return _(P).filter(Be=>!N.has(Be.id)&&(Be.token0.id==X||Be.token1.id==X)).slice(0,(Re=$==null?void 0:$.get(X))!==null&&Re!==void 0?Re:Q).value()}).uniqBy(X=>X.id).value();L(Ae);const Ye=_([...H,...x,...V,...se,...Z,...de,...Te,...Ce,...Ae]).compact().uniqBy(X=>X.id).value(),Ne=_(Ye).flatMap(X=>[X.token0.id,X.token1.id]).compact().uniq().value();M.info(`Getting the ${Ne.length} tokens within the ${Ye.length} V3 pools we are considering`);const Xe=await c.getTokens(Ne,{blockNumber:S}),We=X=>{var Re,Be,D0,qt;return`${(Be=(Re=Xe.getTokenByAddress(X.token0.id))===null||Re===void 0?void 0:Re.symbol)!==null&&Be!==void 0?Be:X.token0.id}/${(qt=(D0=Xe.getTokenByAddress(X.token1.id))===null||D0===void 0?void 0:D0.symbol)!==null&&qt!==void 0?qt:X.token1.id}/${X.feeTier}`};M.info({topByBaseWithTokenIn:H.map(We),topByBaseWithTokenOut:x.map(We),topByTVL:Z.map(We),topByTVLUsingTokenIn:de.map(We),topByTVLUsingTokenOut:Te.map(We),topByTVLUsingTokenInSecondHops:Ce.map(We),topByTVLUsingTokenOutSecondHops:Ae.map(We),top2DirectSwap:V.map(We),top2EthQuotePool:se.map(We)},"V3 Candidate Pools");const z=_.map(Ye,X=>{const Re=Xe.getTokenByAddress(X.token0.id),Be=Xe.getTokenByAddress(X.token1.id);let D0;try{D0=ku(X.feeTier)}catch{M.info({subgraphPool:X},`Dropping candidate pool for ${X.token0.id}/${X.token1.id}/${X.feeTier} because fee tier not supported`);return}if(!Re||!Be){M.info(`Dropping candidate pool for ${X.token0.id}/${X.token1.id}/${D0} because ${Re?X.token1.id:X.token0.id} not found by token provider`);return}return[Re,Be,D0]}),ne=_.compact(z),Ie=Date.now(),Ke=await l.getPools(ne);ie.putMetric("V3PoolsLoad",Date.now()-Ie,oe.Milliseconds);const Fe={protocol:ge.exports.Protocol.V3,selections:{topByBaseWithTokenIn:H,topByBaseWithTokenOut:x,topByDirectSwapPool:V,topByEthQuoteTokenPool:se,topByTVL:Z,topByTVLUsingTokenIn:de,topByTVLUsingTokenOut:Te,topByTVLUsingTokenInSecondHops:Ce,topByTVLUsingTokenOutSecondHops:Ae}};return{poolAccessor:Ke,candidatePools:Fe,subgraphPools:Ye}}async function Bc({tokenIn:r,tokenOut:f,routeType:n,routingConfig:a,subgraphProvider:i,tokenProvider:c,poolProvider:l,blockedTokenListProvider:d,chainId:u}){var m;const{blockNumber:y,v2PoolSelection:{topN:g,topNDirectSwaps:T,topNTokenInOut:A,topNSecondHop:S,topNWithEachBaseToken:w,topNWithBaseToken:O}}=a,k=r.address.toLowerCase(),Q=f.address.toLowerCase(),$=Date.now(),j=await i.getPools(r,f,{blockNumber:y}),F=_.map(j,z=>({...z,token0:{...z.token0,id:z.token0.id.toLowerCase()},token1:{...z.token1,id:z.token1.id.toLowerCase()}}));ie.putMetric("V2SubgraphPoolsLoad",Date.now()-$,oe.Milliseconds);let J=F;if(d){J=[];for(const z of F){const ne=await d.getTokenByAddress(z.token0.id),Ie=await d.getTokenByAddress(z.token1.id);ne||Ie||J.push(z)}}const K=_(J).sortBy(z=>-z.reserve).value();M.info(`After filtering blocked tokens went from ${F.length} to ${K.length}.`);const te=new Set,ce=z=>{_(z).map(ne=>ne.id).forEach(ne=>te.add(ne))},le=(m=Dc[u])!==null&&m!==void 0?m:[],Me=_(le).flatMap(z=>_(K).filter(ne=>{const Ie=z.address.toLowerCase();return ne.token0.id==Ie&&ne.token1.id==k||ne.token1.id==Ie&&ne.token0.id==k}).sortBy(ne=>-ne.reserve).slice(0,w).value()).sortBy(z=>-z.reserve).slice(0,O).value(),P=_(le).flatMap(z=>_(K).filter(ne=>{const Ie=z.address.toLowerCase();return ne.token0.id==Ie&&ne.token1.id==Q||ne.token1.id==Ie&&ne.token0.id==Q}).sortBy(ne=>-ne.reserve).slice(0,w).value()).sortBy(z=>-z.reserve).slice(0,O).value();let N=[];if(T!=0){const{token0:z,token1:ne,poolAddress:Ie}=l.getPoolAddress(r,f);N=[{id:Ie,token0:{id:z.address},token1:{id:ne.address},supply:1e4,reserve:1e4,reserveUSD:1e4}]}ce(N);const L=he[u].address;let B=[];f.symbol!="WETH"&&f.symbol!="WETH9"&&f.symbol!="ETH"&&(B=_(K).filter(z=>n==$e.EXACT_INPUT?z.token0.id==L&&z.token1.id==Q||z.token1.id==L&&z.token0.id==Q:z.token0.id==L&&z.token1.id==k||z.token1.id==L&&z.token0.id==k).slice(0,1).value()),ce(B);const H=_(K).filter(z=>!te.has(z.id)).slice(0,g).value();ce(H);const x=_(K).filter(z=>!te.has(z.id)&&(z.token0.id==k||z.token1.id==k)).slice(0,A).value();ce(x);const V=_(K).filter(z=>!te.has(z.id)&&(z.token0.id==Q||z.token1.id==Q)).slice(0,A).value();ce(V);const ee=_(x).map(z=>k==z.token0.id?z.token1.id:z.token0.id).flatMap(z=>_(K).filter(ne=>!te.has(ne.id)&&(ne.token0.id==z||ne.token1.id==z)).slice(0,S).value()).uniqBy(z=>z.id).value();ce(ee);const se=_(V).map(z=>Q==z.token0.id?z.token1.id:z.token0.id).flatMap(z=>_(K).filter(ne=>!te.has(ne.id)&&(ne.token0.id==z||ne.token1.id==z)).slice(0,S).value()).uniqBy(z=>z.id).value();ce(se);const Z=_([...Me,...P,...N,...B,...H,...x,...V,...ee,...se]).compact().uniqBy(z=>z.id).value(),de=_(Z).flatMap(z=>[z.token0.id,z.token1.id]).compact().uniq().value();M.info(`Getting the ${de.length} tokens within the ${Z.length} V2 pools we are considering`);const Te=await c.getTokens(de,{blockNumber:y}),Ce=z=>{var ne,Ie,Ke,Fe;return`${(Ie=(ne=Te.getTokenByAddress(z.token0.id))===null||ne===void 0?void 0:ne.symbol)!==null&&Ie!==void 0?Ie:z.token0.id}/${(Fe=(Ke=Te.getTokenByAddress(z.token1.id))===null||Ke===void 0?void 0:Ke.symbol)!==null&&Fe!==void 0?Fe:z.token1.id}`};M.info({topByBaseWithTokenIn:Me.map(Ce),topByBaseWithTokenOut:P.map(Ce),topByTVL:H.map(Ce),topByTVLUsingTokenIn:x.map(Ce),topByTVLUsingTokenOut:V.map(Ce),topByTVLUsingTokenInSecondHops:ee.map(Ce),topByTVLUsingTokenOutSecondHops:se.map(Ce),top2DirectSwap:N.map(Ce),top2EthQuotePool:B.map(Ce)},"V2 Candidate pools");const Ae=_.map(Z,z=>{const ne=Te.getTokenByAddress(z.token0.id),Ie=Te.getTokenByAddress(z.token1.id);if(!ne||!Ie){M.info(`Dropping candidate pool for ${z.token0.id}/${z.token1.id}`);return}return[ne,Ie]}),Ye=_.compact(Ae),Ne=Date.now(),Xe=await l.getPools(Ye,{blockNumber:y});ie.putMetric("V2PoolsLoad",Date.now()-Ne,oe.Milliseconds);const We={protocol:ge.exports.Protocol.V2,selections:{topByBaseWithTokenIn:Me,topByBaseWithTokenOut:P,topByDirectSwapPool:N,topByEthQuoteTokenPool:B,topByTVL:H,topByTVLUsingTokenIn:x,topByTVLUsingTokenOut:V,topByTVLUsingTokenInSecondHops:ee,topByTVLUsingTokenOutSecondHops:se}};return{poolAccessor:Xe,candidatePools:We,subgraphPools:Z}}async function fy({tokenIn:r,tokenOut:f,routeType:n,routingConfig:a,v3subgraphProvider:i,v2subgraphProvider:c,tokenProvider:l,v3poolProvider:d,v2poolProvider:u,blockedTokenListProvider:m,chainId:y}){const{blockNumber:g}=a,{subgraphPools:T,candidatePools:A}=await Pc({tokenIn:r,tokenOut:f,tokenProvider:l,blockedTokenListProvider:m,poolProvider:d,routeType:n,subgraphProvider:i,routingConfig:a,chainId:y}),{subgraphPools:S,candidatePools:w}=await Bc({tokenIn:r,tokenOut:f,tokenProvider:l,blockedTokenListProvider:m,poolProvider:u,routeType:n,subgraphProvider:c,routingConfig:a,chainId:y}),O=new Set([...w.selections.topByTVLUsingTokenIn,...w.selections.topByBaseWithTokenIn,...w.selections.topByTVLUsingTokenOut,...w.selections.topByBaseWithTokenOut,...w.selections.topByDirectSwapPool].map(B=>B.id)),k=_(S).filter(B=>O.has(B.id)).sortBy(B=>-B.reserveUSD).value(),Q=_(T).sortBy(B=>-B.tvlUSD).value(),$=[];k.forEach(B=>{const H=Q.find(x=>x.token0.id==B.token0.id&&x.token1.id==B.token1.id||x.token0.id==B.token1.id&&x.token1.id==B.token0.id);H?B.reserveUSD>H.tvlUSD&&(M.info({token0:B.token0.id,token1:B.token1.id,v2reserveUSD:B.reserveUSD,v3tvlUSD:H.tvlUSD},"MixedRoute heuristic, found a V2 pool with higher liquidity than its V3 counterpart"),$.push(B)):(M.info({token0:B.token0.id,token1:B.token1.id,v2reserveUSD:B.reserveUSD},"MixedRoute heuristic, found a V2 pool with no V3 counterpart"),$.push(B))}),M.info($.length,"Number of V2 candidate pools that fit first heuristic");const j=[...$,...Q],F=_(j).flatMap(B=>[B.token0.id,B.token1.id]).compact().uniq().value();M.info(`Getting the ${F.length} tokens within the ${j.length} pools we are considering`);const J=await l.getTokens(F,{blockNumber:g}),K=_.map(Q,B=>{const H=J.getTokenByAddress(B.token0.id),x=J.getTokenByAddress(B.token1.id);let V;try{V=ku(B.feeTier)}catch{M.info({subgraphPool:B},`Dropping candidate pool for ${B.token0.id}/${B.token1.id}/${B.feeTier} because fee tier not supported`);return}if(!H||!x){M.info(`Dropping candidate pool for ${B.token0.id}/${B.token1.id}/${V} because ${H?B.token1.id:B.token0.id} not found by token provider`);return}return[H,x,V]}),te=_.compact(K),ce=_.map($,B=>{const H=J.getTokenByAddress(B.token0.id),x=J.getTokenByAddress(B.token1.id);if(!H||!x){M.info(`Dropping candidate pool for ${B.token0.id}/${B.token1.id}`);return}return[H,x]}),le=_.compact(ce),[Me,P]=await Promise.all([u.getPools(le,{blockNumber:g}),d.getPools(te,{blockNumber:g})]),N=B=>[...$.filter(H=>w.selections[B].map(x=>x.id).includes(H.id)),...A.selections[B]],L={protocol:ge.exports.Protocol.MIXED,selections:{topByBaseWithTokenIn:N("topByBaseWithTokenIn"),topByBaseWithTokenOut:N("topByBaseWithTokenOut"),topByDirectSwapPool:N("topByDirectSwapPool"),topByEthQuoteTokenPool:N("topByEthQuoteTokenPool"),topByTVL:N("topByTVL"),topByTVLUsingTokenIn:N("topByTVLUsingTokenIn"),topByTVLUsingTokenOut:N("topByTVLUsingTokenOut"),topByTVLUsingTokenInSecondHops:N("topByTVLUsingTokenInSecondHops"),topByTVLUsingTokenOutSecondHops:N("topByTVLUsingTokenOutSecondHops")}};return{V2poolAccessor:Me,V3poolAccessor:P,candidatePools:L,subgraphPools:j}}class ny extends za{constructor(f,n,a,i,c,l,d,u){super(c,l,d,u),this.v2SubgraphProvider=f,this.v2PoolProvider=n,this.v2QuoteProvider=a,this.v2GasModelFactory=i}async getRoutes(f,n,a,i){const{poolAccessor:c,candidatePools:l}=await Bc({tokenIn:f,tokenOut:n,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,poolProvider:this.v2PoolProvider,routeType:a,subgraphProvider:this.v2SubgraphProvider,routingConfig:i,chainId:this.chainId}),d=c.getAllPools(),u=await this.applyTokenValidatorToPools(d,(g,T)=>!T||T==X0.STF&&(g.equals(f)||g.equals(n))?!1:T==X0.STF),{maxSwapsPerPath:m}=i;return{routes:ey(f,n,u,m),candidatePools:l}}async getQuotes(f,n,a,i,c,l,d,u,m){if(M.info("Starting to get V2 quotes"),m===void 0)throw new Error("GasPriceWei for V2Routes is required to getQuotes");if(f.length==0)return{routesWithValidQuotes:[],candidatePools:d};const y=c==$e.EXACT_INPUT?this.v2QuoteProvider.getQuotesManyExactIn.bind(this.v2QuoteProvider):this.v2QuoteProvider.getQuotesManyExactOut.bind(this.v2QuoteProvider),g=Date.now();M.info(`Getting quotes for V2 for ${f.length} routes with ${n.length} amounts per route.`);const{routesWithQuotes:T}=await y(n,f),A=await this.v2GasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:m,poolProvider:this.v2PoolProvider,token:i});ie.putMetric("V2QuotesLoad",Date.now()-g,oe.Milliseconds),ie.putMetric("V2QuotesFetched",_(T).map(([,w])=>w.length).sum(),oe.Count);const S=[];for(const w of T){const[O,k]=w;for(let Q=0;Q<k.length;Q++){const $=a[Q],j=k[Q],{quote:F,amount:J}=j;if(!F){M.debug({route:z0(O),amountQuote:j},"Dropping a null V2 quote for route.");continue}const K=new j3({route:O,rawQuote:F,amount:J,percent:$,gasModel:A,quoteToken:i,tradeType:c,v2PoolProvider:this.v2PoolProvider});S.push(K)}}return{routesWithValidQuotes:S,candidatePools:d}}}class ry extends za{constructor(f,n,a,i,c,l,d){super(i,c,l,d),this.v3SubgraphProvider=f,this.v3PoolProvider=n,this.onChainQuoteProvider=a}async getRoutes(f,n,a,i){const{poolAccessor:c,candidatePools:l}=await Pc({tokenIn:f,tokenOut:n,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,poolProvider:this.v3PoolProvider,routeType:a,subgraphProvider:this.v3SubgraphProvider,routingConfig:i,chainId:this.chainId}),d=c.getAllPools(),u=await this.applyTokenValidatorToPools(d,(g,T)=>!T||T==X0.STF&&(g.equals(f)||g.equals(n))?!1:T==X0.FOT||T==X0.STF),{maxSwapsPerPath:m}=i;return{routes:Z3(f,n,u,m),candidatePools:l}}async getQuotes(f,n,a,i,c,l,d,u){if(M.info("Starting to get V3 quotes"),u===void 0)throw new Error("GasModel for V3RouteWithValidQuote is required to getQuotes");if(f.length==0)return{routesWithValidQuotes:[],candidatePools:d};const m=c==$e.EXACT_INPUT?this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider):this.onChainQuoteProvider.getQuotesManyExactOut.bind(this.onChainQuoteProvider),y=Date.now();M.info(`Getting quotes for V3 for ${f.length} routes with ${n.length} amounts per route.`);const{routesWithQuotes:g}=await m(n,f,{blockNumber:l.blockNumber});ie.putMetric("V3QuotesLoad",Date.now()-y,oe.Milliseconds),ie.putMetric("V3QuotesFetched",_(g).map(([,A])=>A.length).sum(),oe.Count);const T=[];for(const A of g){const[S,w]=A;for(let O=0;O<w.length;O++){const k=a[O],Q=w[O],{quote:$,amount:j,sqrtPriceX96AfterList:F,initializedTicksCrossedList:J,gasEstimate:K}=Q;if(!$||!F||!J||!K){M.debug({route:z0(S),amountQuote:Q},"Dropping a null V3 quote for route.");continue}const te=new z3({route:S,rawQuote:$,amount:j,percent:k,sqrtPriceX96AfterList:F,initializedTicksCrossedList:J,quoterGasEstimate:K,gasModel:u,quoteToken:i,tradeType:c,v3PoolProvider:this.v3PoolProvider});T.push(te)}}return{routesWithValidQuotes:T,candidatePools:d}}}class sy extends za{constructor(f,n,a,i,c,l,d,u,m){super(l,d,u,m),this.v3SubgraphProvider=f,this.v3PoolProvider=n,this.v2SubgraphProvider=a,this.v2PoolProvider=i,this.onChainQuoteProvider=c}async getRoutes(f,n,a,i){if(a!=$e.EXACT_INPUT)throw new Error("Mixed route quotes are not supported for EXACT_OUTPUT");const{V2poolAccessor:c,V3poolAccessor:l,candidatePools:d}=await fy({tokenIn:f,tokenOut:n,tokenProvider:this.tokenProvider,blockedTokenListProvider:this.blockedTokenListProvider,v3poolProvider:this.v3PoolProvider,v2poolProvider:this.v2PoolProvider,routeType:a,v3subgraphProvider:this.v3SubgraphProvider,v2subgraphProvider:this.v2SubgraphProvider,routingConfig:i,chainId:this.chainId}),u=l.getAllPools(),m=c.getAllPools(),y=[...u,...m],g=d,T=await this.applyTokenValidatorToPools(y,(w,O)=>!O||O==X0.STF&&(w.equals(f)||w.equals(n))?!1:O==X0.FOT||O==X0.STF),{maxSwapsPerPath:A}=i;return{routes:ty(f,n,T,A),candidatePools:g}}async getQuotes(f,n,a,i,c,l,d,u){if(M.info("Starting to get mixed quotes"),u===void 0)throw new Error("GasModel for MixedRouteWithValidQuote is required to getQuotes");if(f.length==0)return{routesWithValidQuotes:[],candidatePools:d};const m=this.onChainQuoteProvider.getQuotesManyExactIn.bind(this.onChainQuoteProvider),y=Date.now();M.info(`Getting quotes for mixed for ${f.length} routes with ${n.length} amounts per route.`);const{routesWithQuotes:g}=await m(n,f,{blockNumber:l.blockNumber});ie.putMetric("MixedQuotesLoad",Date.now()-y,oe.Milliseconds),ie.putMetric("MixedQuotesFetched",_(g).map(([,A])=>A.length).sum(),oe.Count);const T=[];for(const A of g){const[S,w]=A;for(let O=0;O<w.length;O++){const k=a[O],Q=w[O],{quote:$,amount:j,sqrtPriceX96AfterList:F,initializedTicksCrossedList:J,gasEstimate:K}=Q;if(!$||!F||!J||!K){M.debug({route:z0(S),amountQuote:Q},"Dropping a null mixed quote for route.");continue}const te=new J3({route:S,rawQuote:$,amount:j,percent:k,sqrtPriceX96AfterList:F,initializedTicksCrossedList:J,quoterGasEstimate:K,mixedRouteGasModel:u,quoteToken:i,tradeType:c,v3PoolProvider:this.v3PoolProvider,v2PoolProvider:this.v2PoolProvider});T.push(te)}}return{routesWithValidQuotes:T,candidatePools:d}}}class ay{constructor({chainId:f,provider:n,multicall2Provider:a,v3PoolProvider:i,onChainQuoteProvider:c,v2PoolProvider:l,v2QuoteProvider:d,v2SubgraphProvider:u,tokenProvider:m,blockedTokenListProvider:y,v3SubgraphProvider:g,gasPriceProvider:T,v3GasModelFactory:A,v2GasModelFactory:S,mixedRouteGasModelFactory:w,swapRouterProvider:O,optimismGasDataProvider:k,tokenValidatorProvider:Q,arbitrumGasDataProvider:$,simulator:j,routeCachingProvider:F}){if(this.chainId=f,this.provider=n,this.multicall2Provider=a!=null?a:new Gc(f,n,375e3),this.v3PoolProvider=i!=null?i:new u9(this.chainId,new g3(Eb(f),this.multicall2Provider),new pt(new ht({stdTTL:360,useClones:!1}))),this.simulator=j,this.routeCachingProvider=F,c)this.onChainQuoteProvider=c;else switch(f){case p.OPTIMISM:case p.OPTIMISM_GOERLI:case p.OPTIMISTIC_KOVAN:this.onChainQuoteProvider=new _f(f,n,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:110,gasLimitPerCall:12e5,quoteMinSuccessRate:.1},{gasLimitOverride:3e6,multicallChunk:45},{gasLimitOverride:3e6,multicallChunk:45},{baseBlockOffset:-10,rollback:{enabled:!0,attemptsBeforeRollback:1,rollbackBlockOffset:-10}});break;case p.ARBITRUM_ONE:case p.ARBITRUM_RINKEBY:case p.ARBITRUM_GOERLI:this.onChainQuoteProvider=new _f(f,n,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:12e6,quoteMinSuccessRate:.1},{gasLimitOverride:3e7,multicallChunk:6},{gasLimitOverride:3e7,multicallChunk:6});break;case p.CELO:case p.CELO_ALFAJORES:this.onChainQuoteProvider=new _f(f,n,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:5e6,quoteMinSuccessRate:.1},{gasLimitOverride:5e6,multicallChunk:5},{gasLimitOverride:625e4,multicallChunk:4});break;default:this.onChainQuoteProvider=new _f(f,n,this.multicall2Provider,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:210,gasLimitPerCall:705e3,quoteMinSuccessRate:.15},{gasLimitOverride:2e6,multicallChunk:70});break}this.v2PoolProvider=l!=null?l:new wy(f,new m3(f,this.multicall2Provider),new pt(new ht({stdTTL:60,useClones:!1}))),this.v2QuoteProvider=d!=null?d:new Ry,this.blockedTokenListProvider=y!=null?y:new Df(f,v3,new pt(new ht({stdTTL:3600,useClones:!1}))),this.tokenProvider=m!=null?m:new jb(f,new pt(new ht({stdTTL:3600,useClones:!1})),new Df(f,i3,new pt(new ht({stdTTL:3600,useClones:!1}))),new Yb(f,this.multicall2Provider));const J=Ib(f);u?this.v2SubgraphProvider=u:this.v2SubgraphProvider=new o9([new Cy(f,new cu(f,`https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v2/${J}.json`,void 0,0),new pt(new ht({stdTTL:300,useClones:!1}))),new Vc(f)]),g?this.v3SubgraphProvider=g:this.v3SubgraphProvider=new p9([new c9(f,new cu(f,`https://cloudflare-ipfs.com/ipns/api.uniswap.org/v1/pools/v3/${J}.json`,void 0,0),new pt(new ht({stdTTL:300,useClones:!1}))),new l9(f,this.v3PoolProvider)]);let K;Gh.isProvider(this.provider)?K=new vy(f,new Zb(this.provider),new oy(this.provider)):K=new iy(E3),this.gasPriceProvider=T!=null?T:new Kh(f,K,new pt(new ht({stdTTL:15,useClones:!1}))),this.v3GasModelFactory=A!=null?A:new V3,this.v2GasModelFactory=S!=null?S:new Y3,this.mixedRouteGasModelFactory=w!=null?w:new X3,this.swapRouterProvider=O!=null?O:new Ty(this.multicall2Provider,this.chainId),(f===p.OPTIMISM||f===p.OPTIMISTIC_KOVAN)&&(this.l2GasDataProvider=k!=null?k:new b3(f,this.multicall2Provider)),(f===p.ARBITRUM_ONE||f===p.ARBITRUM_RINKEBY||f===p.ARBITRUM_GOERLI)&&(this.l2GasDataProvider=$!=null?$:new y3(f,this.provider)),Q?this.tokenValidatorProvider=Q:this.chainId===p.MAINNET&&(this.tokenValidatorProvider=new h3(this.chainId,this.multicall2Provider,new pt(new ht({stdTTL:3e4,useClones:!1})))),this.v2Quoter=new ny(this.v2SubgraphProvider,this.v2PoolProvider,this.v2QuoteProvider,this.v2GasModelFactory,this.tokenProvider,this.chainId,this.blockedTokenListProvider,this.tokenValidatorProvider),this.v3Quoter=new ry(this.v3SubgraphProvider,this.v3PoolProvider,this.onChainQuoteProvider,this.tokenProvider,this.chainId,this.blockedTokenListProvider,this.tokenValidatorProvider),this.mixedQuoter=new sy(this.v3SubgraphProvider,this.v3PoolProvider,this.v2SubgraphProvider,this.v2PoolProvider,this.onChainQuoteProvider,this.tokenProvider,this.chainId,this.blockedTokenListProvider,this.tokenValidatorProvider)}async routeToRatio(f,n,a,i,c,l=Js(this.chainId)){n.currency.wrapped.sortsBefore(f.currency.wrapped)&&([f,n]=[n,f]);let d=this.calculateOptimalRatio(a,a.pool.sqrtRatioX96,!0),u;a.pool.tickCurrent>a.tickUpper?u=!0:a.pool.tickCurrent<a.tickLower?u=!1:(u=new Ut(f.quotient,n.quotient).greaterThan(d),u||(d=d.invert()));const[m,y]=u?[f,n]:[n,f];let g=d,T=a.pool,A=u?a.pool.token0Price:a.pool.token1Price,S=null,w=!1,O=0;for(;!w;){if(O++,O>i.maxIterations)return M.info("max iterations exceeded"),{status:Ct.NO_ROUTE_FOUND,error:"max iterations exceeded"};const Q=Q3(g,A,m,y);if(Q.equalTo(0))return M.info("no swap needed: amountToSwap = 0"),{status:Ct.NO_SWAP_NEEDED};if(S=await this.route(Q,y.currency,$e.EXACT_INPUT,void 0,{...Js(this.chainId),...l,protocols:[ge.exports.Protocol.V3,ge.exports.Protocol.V2]}),!S)return M.info("no route found from this.route()"),{status:Ct.NO_ROUTE_FOUND,error:"no route found"};const $=m.subtract(S.trade.inputAmount),j=y.add(S.trade.outputAmount),F=$.divide(j);let J;if(S.route.forEach(K=>{if(K.protocol===ge.exports.Protocol.V3){const te=K;te.route.pools.forEach((ce,le)=>{ce.token0.equals(a.pool.token0)&&ce.token1.equals(a.pool.token1)&&ce.fee===a.pool.fee&&(J=e0.BigInt(te.sqrtPriceX96AfterList[le].toString()),g=this.calculateOptimalRatio(a,e0.BigInt(J.toString()),u))})}}),J||(g=d),w=F.equalTo(g)||this.absoluteValue(F.asFraction.divide(g).subtract(1)).lessThan(i.ratioErrorTolerance),w&&J&&(T=new mt(a.pool.token0,a.pool.token1,a.pool.fee,J,a.pool.liquidity,Qs.getTickAtSqrtRatio(J),a.pool.tickDataProvider)),A=S.trade.outputAmount.divide(S.trade.inputAmount),M.info({exchangeRate:A.asFraction.toFixed(18),optimalRatio:g.asFraction.toFixed(18),newRatio:F.asFraction.toFixed(18),inputBalanceUpdated:$.asFraction.toFixed(18),outputBalanceUpdated:j.asFraction.toFixed(18),ratioErrorTolerance:i.ratioErrorTolerance.toFixed(18),iterationN:O.toString()},"QuoteToRatio Iteration Parameters"),A.equalTo(0))return M.info("exchangeRate to 0"),{status:Ct.NO_ROUTE_FOUND,error:"insufficient liquidity to swap to optimal ratio"}}if(!S)return{status:Ct.NO_ROUTE_FOUND,error:"no route found"};let k;return c&&(k=await this.buildSwapAndAddMethodParameters(S.trade,c,{initialBalanceTokenIn:m,initialBalanceTokenOut:y,preLiquidityPosition:a})),{status:Ct.SUCCESS,result:{...S,methodParameters:k,optimalRatio:g,postSwapTargetPool:T}}}async route(f,n,a,i,c={}){var l,d,u;const{currencyIn:m,currencyOut:y}=this.determineCurrencyInOutFromTradeType(a,f,n),g=m.wrapped,T=y.wrapped;ie.setProperty("chainId",this.chainId),ie.setProperty("pair",`${g.symbol}/${T.symbol}`),ie.setProperty("tokenIn",g.address),ie.setProperty("tokenOut",T.address),ie.setProperty("tradeType",a===$e.EXACT_INPUT?"ExactIn":"ExactOut"),ie.putMetric(`QuoteRequestedForChain${this.chainId}`,1,oe.Count);const A=(l=c.blockNumber)!==null&&l!==void 0?l:this.getBlockNumberPromise(),S=_.merge({},Js(this.chainId),c,{blockNumber:A}),w=await this.getGasPriceWei(),O=n.wrapped,[k,Q]=await this.getGasModels(w,f.currency.wrapped,O),$=Array.from(new Set(S.protocols).values()),j=await((d=this.routeCachingProvider)===null||d===void 0?void 0:d.getCacheMode(this.chainId,f,O,a,$));let F;j!==Rt.Darkmode&&(F=await((u=this.routeCachingProvider)===null||u===void 0?void 0:u.getCachedRoute(this.chainId,f,O,a,$,await A))),j&&j!==Rt.Darkmode&&!F?(ie.putMetric(`GetCachedRoute_miss_${j}`,1,oe.Count),M.info({tokenIn:g.symbol,tokenInAddress:g.address,tokenOut:T.symbol,tokenOutAddress:T.address,cacheMode:j,amount:f.toExact(),chainId:this.chainId,tradeType:this.tradeTypeStr(a)},`GetCachedRoute miss ${j} for ${this.tokenPairSymbolTradeTypeChainId(g,T,a)}`)):F&&(ie.putMetric(`GetCachedRoute_hit_${j}`,1,oe.Count),M.info({tokenIn:g.symbol,tokenInAddress:g.address,tokenOut:T.symbol,tokenOutAddress:T.address,cacheMode:j,amount:f.toExact(),chainId:this.chainId,tradeType:this.tradeTypeStr(a)},`GetCachedRoute hit ${j} for ${this.tokenPairSymbolTradeTypeChainId(g,T,a)}`));let J=Promise.resolve(null);F&&(J=this.getSwapRouteFromCache(F,await A,f,O,a,S,k,Q,w));let K=Promise.resolve(null);(!F||j!==Rt.Livemode)&&(K=this.getSwapRouteFromChain(f,g,T,$,O,a,S,k,Q,w));const[te,ce]=await Promise.all([J,K]);let le;if(j===Rt.Livemode&&te?(M.info(`CacheMode is ${j}, and we are using swapRoute from cache`),le=te):(M.info(`CacheMode is ${j}, and we are using materialized swapRoute`),le=ce),j===Rt.Tapcompare&&te&&ce){const se=ce.quote.subtract(te.quote),Z=ce.quoteGasAdjusted.subtract(te.quoteGasAdjusted),de=ce.estimatedGasUsed.sub(te.estimatedGasUsed);if(!se.equalTo(0)||!(Z.equalTo(0)||de.eq(0))){const Te=Z.divide(ce.quoteGasAdjusted).multiply(100);ie.putMetric("TapcompareCachedRoute_quoteGasAdjustedDiffPercent",Number(Te.toExact()),oe.Percent),M.warn({quoteFromChain:ce.quote.toExact(),quoteFromCache:te.quote.toExact(),quoteDiff:se.toExact(),quoteGasAdjustedFromChain:ce.quoteGasAdjusted.toExact(),quoteGasAdjustedFromCache:te.quoteGasAdjusted.toExact(),quoteGasAdjustedDiff:Z.toExact(),gasUsedFromChain:ce.estimatedGasUsed.toString(),gasUsedFromCache:te.estimatedGasUsed.toString(),gasUsedDiff:de.toString(),routesFromChain:ce.routes.toString(),routesFromCache:te.routes.toString(),amount:f.toExact(),originalAmount:F==null?void 0:F.originalAmount,pair:this.tokenPairSymbolTradeTypeChainId(g,T,a),blockNumber:A},`Comparing quotes between Chain and Cache for ${this.tokenPairSymbolTradeTypeChainId(g,T,a)}`)}}if(!le)return null;const{quote:Me,quoteGasAdjusted:P,estimatedGasUsed:N,routes:L,estimatedGasUsedQuoteToken:B,estimatedGasUsedUSD:H}=le;if(this.routeCachingProvider&&j!==Rt.Darkmode&&ce){const se=ai.fromRoutesWithValidQuotes(ce.routes,this.chainId,g,T,$.sort(),await A,a,f.toExact());se&&this.routeCachingProvider.setCachedRoute(se,f).then(Z=>{const de=Z?"success":"rejected";ie.putMetric(`SetCachedRoute_${de}`,1,oe.Count)}).catch(Z=>{M.error({reason:Z,tokenPair:this.tokenPairSymbolTradeTypeChainId(g,T,a)},"SetCachedRoute failure"),ie.putMetric("SetCachedRoute_failure",1,oe.Count)})}ie.putMetric(`QuoteFoundForChain${this.chainId}`,1,oe.Count);const x=ha(m,y,a,L);let V;i&&(V=ma(x,i,this.chainId));const ee={quote:Me,quoteGasAdjusted:P,estimatedGasUsed:N,estimatedGasUsedQuoteToken:B,estimatedGasUsedUSD:H,gasPriceWei:w,route:L,trade:x,methodParameters:V,blockNumber:ye.from(await A)};if(i&&i.simulate&&V&&V.calldata){if(!this.simulator)throw new Error("Simulator not initialized!");M.info({swapConfig:i,methodParameters:V},"Starting simulation");const se=i.simulate.fromAddress,Z=Date.now(),de=await this.simulator.simulate(se,i,ee,f,De.fromRawAmount(n,Me.quotient.toString()),this.l2GasDataProvider?await this.l2GasDataProvider.getGasData():void 0,{blockNumber:A});return ie.putMetric("SimulateTransaction",Date.now()-Z,oe.Milliseconds),de}return ee}async getSwapRouteFromCache(f,n,a,i,c,l,d,u,m){M.info({protocols:f.protocolsCovered,tradeType:f.tradeType,cachedBlockNumber:f.blockNumber,quoteBlockNumber:n},"Routing across CachedRoute");const y=[],g=f.routes.filter($=>$.protocol===ge.exports.Protocol.V3),T=f.routes.filter($=>$.protocol===ge.exports.Protocol.V2),A=f.routes.filter($=>$.protocol===ge.exports.Protocol.MIXED),S=new Set(f.routes.map($=>$.percent));S.add(100),S.add(50);const w=Array.from(S.values()),O=w.map($=>a.multiply(new Ut($,100)));if(g.length>0){const $=g.map(j=>j.route);y.push(this.v3Quoter.getQuotes($,O,w,i,c,l,void 0,d))}if(T.length>0&&y.push(this.v2Quoter.getRoutesThenQuotes(T[0].tokenIn,T[0].tokenOut,O,w,i,c,l,void 0,m)),A.length>0){const $=A.map(j=>j.route);y.push(this.mixedQuoter.getQuotes($,O,w,i,c,l,void 0,u))}const k=await Promise.all(y),Q=_.flatMap(k,$=>$.routesWithValidQuotes);return nu(a,w,Q,c,this.chainId,l,d)}async getSwapRouteFromChain(f,n,a,i,c,l,d,u,m,y){const[g,T]=this.getAmountDistribution(f,d),A=i.length===0,S=i.includes(ge.exports.Protocol.V3),w=i.includes(ge.exports.Protocol.V2),O=Tb.includes(this.chainId),k=i.includes(ge.exports.Protocol.MIXED)||A&&O,Q=[p.MAINNET,p.G\u00D6RLI].includes(this.chainId)&&l===$e.EXACT_INPUT,$=[];(S||A)&&(M.info({protocols:i,tradeType:l},"Routing across V3"),$.push(this.v3Quoter.getRoutesThenQuotes(n,a,T,g,c,l,d,u))),O&&(w||A)&&(M.info({protocols:i,tradeType:l},"Routing across V2"),$.push(this.v2Quoter.getRoutesThenQuotes(n,a,T,g,c,l,d,void 0,y))),k&&Q&&(M.info({protocols:i,tradeType:l},"Routing across MixedRoutes"),$.push(this.mixedQuoter.getRoutesThenQuotes(n,a,T,g,c,l,d,m)));const j=await Promise.all($),F=[],J=[];if(j.forEach(te=>{F.push(...te.routesWithValidQuotes),te.candidatePools&&J.push(te.candidatePools)}),F.length===0)return M.info({allRoutesWithValidQuotes:F},"Received no valid quotes"),null;const K=await nu(f,g,F,l,this.chainId,d,u);return K&&this.emitPoolSelectionMetrics(K,J),K}tradeTypeStr(f){return f===$e.EXACT_INPUT?"ExactIn":"ExactOut"}tokenPairSymbolTradeTypeChainId(f,n,a){return`${f.symbol}/${n.symbol}/${this.tradeTypeStr(a)}/${this.chainId}`}determineCurrencyInOutFromTradeType(f,n,a){return f===$e.EXACT_INPUT?{currencyIn:n.currency,currencyOut:a}:{currencyIn:a,currencyOut:n.currency}}async getGasPriceWei(){const f=Date.now(),{gasPriceWei:n}=await this.gasPriceProvider.getGasPrice();return ie.putMetric("GasPriceLoad",Date.now()-f,oe.Milliseconds),n}async getGasModels(f,n,a){const i=Date.now(),c=this.v3GasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:f,v3poolProvider:this.v3PoolProvider,amountToken:n,quoteToken:a,v2poolProvider:this.v2PoolProvider,l2GasDataProvider:this.l2GasDataProvider}),l=this.mixedRouteGasModelFactory.buildGasModel({chainId:this.chainId,gasPriceWei:f,v3poolProvider:this.v3PoolProvider,amountToken:n,quoteToken:a,v2poolProvider:this.v2PoolProvider}),[d,u]=await Promise.all([c,l]);return ie.putMetric("GasModelCreation",Date.now()-i,oe.Milliseconds),[d,u]}getAmountDistribution(f,n){const{distributionPercent:a}=n,i=[],c=[];for(let l=1;l<=100/a;l++)i.push(l*a),c.push(f.multiply(new Ut(l*a,100)));return[i,c]}async buildSwapAndAddMethodParameters(f,n,a){const{swapOptions:{recipient:i,slippageTolerance:c,deadline:l,inputTokenPermit:d},addLiquidityOptions:u}=n,m=a.preLiquidityPosition,y=a.initialBalanceTokenIn.subtract(f.inputAmount),g=a.initialBalanceTokenOut.add(f.outputAmount),T=await this.swapRouterProvider.getApprovalType(y,g),A=y.currency.wrapped.sortsBefore(g.currency.wrapped);return{...ge.exports.SwapRouter.swapAndAddCallParameters(f,{recipient:i,slippageTolerance:c,deadlineOrPreviousBlockhash:l,inputTokenPermit:d},qh.fromAmounts({pool:m.pool,tickLower:m.tickLower,tickUpper:m.tickUpper,amount0:A?y.quotient.toString():g.quotient.toString(),amount1:A?g.quotient.toString():y.quotient.toString(),useFullPrecision:!1}),u,T.approvalTokenIn,T.approvalTokenOut),to:Pa(this.chainId)}}emitPoolSelectionMetrics(f,n){const a=new Set,{routes:i}=f;_(i).flatMap(u=>{const{poolAddresses:m}=u;return m}).forEach(u=>{a.add(u.toLowerCase())});for(const u of n){const{protocol:m}=u;_.forIn(u.selections,(y,g)=>{const T=_.findLastIndex(y,A=>a.has(A.id.toLowerCase()))+1;ie.putMetric(_.capitalize(`${m}${g}`),T,oe.Count)})}let c=!1,l=!1,d=!1;for(const u of i)u.protocol===ge.exports.Protocol.V3&&(c=!0),u.protocol===ge.exports.Protocol.V2&&(l=!0),u.protocol===ge.exports.Protocol.MIXED&&(d=!0);d&&(c||l)?c&&l?(ie.putMetric("MixedAndV3AndV2SplitRoute",1,oe.Count),ie.putMetric(`MixedAndV3AndV2SplitRouteForChain${this.chainId}`,1,oe.Count)):c?(ie.putMetric("MixedAndV3SplitRoute",1,oe.Count),ie.putMetric(`MixedAndV3SplitRouteForChain${this.chainId}`,1,oe.Count)):l&&(ie.putMetric("MixedAndV2SplitRoute",1,oe.Count),ie.putMetric(`MixedAndV2SplitRouteForChain${this.chainId}`,1,oe.Count)):c&&l?(ie.putMetric("V3AndV2SplitRoute",1,oe.Count),ie.putMetric(`V3AndV2SplitRouteForChain${this.chainId}`,1,oe.Count)):d?i.length>1?(ie.putMetric("MixedSplitRoute",1,oe.Count),ie.putMetric(`MixedSplitRouteForChain${this.chainId}`,1,oe.Count)):(ie.putMetric("MixedRoute",1,oe.Count),ie.putMetric(`MixedRouteForChain${this.chainId}`,1,oe.Count)):c?i.length>1?(ie.putMetric("V3SplitRoute",1,oe.Count),ie.putMetric(`V3SplitRouteForChain${this.chainId}`,1,oe.Count)):(ie.putMetric("V3Route",1,oe.Count),ie.putMetric(`V3RouteForChain${this.chainId}`,1,oe.Count)):l&&(i.length>1?(ie.putMetric("V2SplitRoute",1,oe.Count),ie.putMetric(`V2SplitRouteForChain${this.chainId}`,1,oe.Count)):(ie.putMetric("V2Route",1,oe.Count),ie.putMetric(`V2RouteForChain${this.chainId}`,1,oe.Count)))}calculateOptimalRatio(f,n,a){const i=Qs.getSqrtRatioAtTick(f.tickUpper),c=Qs.getSqrtRatioAtTick(f.tickLower);if(e0.greaterThan(n,i)||e0.lessThan(n,c))return new Ut(0,1);const l=e0.BigInt("1"+"0".repeat(18));let d=new Ut(L1.getAmount0Delta(n,i,l,!0),L1.getAmount1Delta(n,c,l,!0));return a||(d=d.invert()),d}async userHasSufficientBalance(f,n,a,i){try{const c=n===$e.EXACT_INPUT?a:i;let l;return c.currency.isNative?l=await this.provider.getBalance(f):l=await dc.connect(c.currency.address,this.provider).balanceOf(f),l.gte(ye.from(c.quotient.toString()))}catch(c){return M.error(c,"Error while checking user balance"),!1}}absoluteValue(f){const n=e0.lessThan(f.numerator,e0.BigInt(0))?e0.unaryMinus(f.numerator):f.numerator,a=e0.lessThan(f.denominator,e0.BigInt(0))?e0.unaryMinus(f.denominator):f.denominator;return new Ut(n,a)}getBlockNumberPromise(){return of(async(f,n)=>(n>1&&M.info(`Get block number attempt ${n}`),this.provider.getBlockNumber()),{retries:2,minTimeout:100,maxTimeout:1e3})}}const Un=[{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"}],name:"AllowanceExpired",type:"error"},{inputs:[],name:"ExcessiveInvalidation",type:"error"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"InsufficientAllowance",type:"error"},{inputs:[{internalType:"uint256",name:"maxAmount",type:"uint256"}],name:"InvalidAmount",type:"error"},{inputs:[],name:"InvalidContractSignature",type:"error"},{inputs:[],name:"InvalidNonce",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"InvalidSignatureLength",type:"error"},{inputs:[],name:"InvalidSigner",type:"error"},{inputs:[],name:"LengthMismatch",type:"error"},{inputs:[{internalType:"uint256",name:"signatureDeadline",type:"uint256"}],name:"SignatureExpired",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint160",name:"amount",type:"uint160"},{indexed:!1,internalType:"uint48",name:"expiration",type:"uint48"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"spender",type:"address"}],name:"Lockdown",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint48",name:"newNonce",type:"uint48"},{indexed:!1,internalType:"uint48",name:"oldNonce",type:"uint48"}],name:"NonceInvalidation",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint160",name:"amount",type:"uint160"},{indexed:!1,internalType:"uint48",name:"expiration",type:"uint48"},{indexed:!1,internalType:"uint48",name:"nonce",type:"uint48"}],name:"Permit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"word",type:"uint256"},{indexed:!1,internalType:"uint256",name:"mask",type:"uint256"}],name:"UnorderedNonceInvalidation",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"uint48",name:"expiration",type:"uint48"},{internalType:"uint48",name:"nonce",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"uint48",name:"expiration",type:"uint48"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint48",name:"newNonce",type:"uint48"}],name:"invalidateNonces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"wordPos",type:"uint256"},{internalType:"uint256",name:"mask",type:"uint256"}],name:"invalidateUnorderedNonces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"spender",type:"address"}],internalType:"struct IAllowanceTransfer.TokenSpenderPair[]",name:"approvals",type:"tuple[]"}],name:"lockdown",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"nonceBitmap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"uint48",name:"expiration",type:"uint48"},{internalType:"uint48",name:"nonce",type:"uint48"}],internalType:"struct IAllowanceTransfer.PermitDetails[]",name:"details",type:"tuple[]"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"sigDeadline",type:"uint256"}],internalType:"struct IAllowanceTransfer.PermitBatch",name:"permitBatch",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"uint48",name:"expiration",type:"uint48"},{internalType:"uint48",name:"nonce",type:"uint48"}],internalType:"struct IAllowanceTransfer.PermitDetails",name:"details",type:"tuple"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"sigDeadline",type:"uint256"}],internalType:"struct IAllowanceTransfer.PermitSingle",name:"permitSingle",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ISignatureTransfer.TokenPermissions",name:"permitted",type:"tuple"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct ISignatureTransfer.PermitTransferFrom",name:"permit",type:"tuple"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"requestedAmount",type:"uint256"}],internalType:"struct ISignatureTransfer.SignatureTransferDetails",name:"transferDetails",type:"tuple"},{internalType:"address",name:"owner",type:"address"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permitTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ISignatureTransfer.TokenPermissions[]",name:"permitted",type:"tuple[]"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct ISignatureTransfer.PermitBatchTransferFrom",name:"permit",type:"tuple"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"requestedAmount",type:"uint256"}],internalType:"struct ISignatureTransfer.SignatureTransferDetails[]",name:"transferDetails",type:"tuple[]"},{internalType:"address",name:"owner",type:"address"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permitTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ISignatureTransfer.TokenPermissions",name:"permitted",type:"tuple"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct ISignatureTransfer.PermitTransferFrom",name:"permit",type:"tuple"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"requestedAmount",type:"uint256"}],internalType:"struct ISignatureTransfer.SignatureTransferDetails",name:"transferDetails",type:"tuple"},{internalType:"address",name:"owner",type:"address"},{internalType:"bytes32",name:"witness",type:"bytes32"},{internalType:"string",name:"witnessTypeString",type:"string"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permitWitnessTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ISignatureTransfer.TokenPermissions[]",name:"permitted",type:"tuple[]"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct ISignatureTransfer.PermitBatchTransferFrom",name:"permit",type:"tuple"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"requestedAmount",type:"uint256"}],internalType:"struct ISignatureTransfer.SignatureTransferDetails[]",name:"transferDetails",type:"tuple[]"},{internalType:"address",name:"owner",type:"address"},{internalType:"bytes32",name:"witness",type:"bytes32"},{internalType:"string",name:"witnessTypeString",type:"string"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permitWitnessTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"address",name:"token",type:"address"}],internalType:"struct IAllowanceTransfer.AllowanceTransferDetails[]",name:"transferDetails",type:"tuple[]"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint160",name:"amount",type:"uint160"},{internalType:"address",name:"token",type:"address"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Mc="0x60c0346100bb574660a052602081017f8cad95687ba82c2ce50e74f7b754645e5117c3a5bec8151c0726d5857980a86681527f9ac997416e8ff9d2ff6bebeb7149f65cdae5e32e2b90440b566bb3044041d36a60408301524660608301523060808301526080825260a082019180831060018060401b038411176100a557826040525190206080526123c090816100c1823960805181611a90015260a05181611a6a0152f35b634e487b7160e01b600052604160045260246000fd5b600080fdfe6040608081526004908136101561001557600080fd5b600090813560e01c80630d58b1db1461126c578063137c29fe146110755780632a2d80d114610db75780632b67b57014610bde57806330f28b7a14610ade5780633644e51514610a9d57806336c7851614610a285780633ff9dcb1146109a85780634fe02b441461093f57806365d9723c146107ac57806387517c451461067a578063927da105146105c3578063cc53287f146104a3578063edd9444b1461033a5763fe8ec1a7146100c657600080fd5b346103365760c07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103365767ffffffffffffffff833581811161033257610114903690860161164b565b60243582811161032e5761012b903690870161161a565b6101336114e6565b9160843585811161032a5761014b9036908a016115c1565b98909560a43590811161032657610164913691016115c1565b969095815190610173826113ff565b606b82527f5065726d697442617463685769746e6573735472616e7366657246726f6d285460208301527f6f6b656e5065726d697373696f6e735b5d207065726d69747465642c61646472838301527f657373207370656e6465722c75696e74323536206e6f6e63652c75696e74323560608301527f3620646561646c696e652c000000000000000000000000000000000000000000608083015282519a8b9181610222602085018096611edc565b918237018a8152039961025b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09b8c8101835282611437565b5190209085515161026b81611e04565b908a5b8181106102f95750506102f6999a6102ed9183516102a081610294602082018095611eaf565b03848101835282611437565b519020602089810151858b015195519182019687526040820192909252336060820152608081019190915260a081019390935260643560c08401528260e081015b03908101835282611437565b51902093611c40565b80f35b8061031161030b610321938c5161175e565b51611f9d565b61031b828661175e565b52611e53565b61026e565b8880fd5b8780fd5b8480fd5b8380fd5b5080fd5b5091346103365760807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103365767ffffffffffffffff9080358281116103325761038b903690830161164b565b60243583811161032e576103a2903690840161161a565b9390926103ad6114e6565b9160643590811161049f576103c4913691016115c1565b949093835151976103d489611e04565b98885b81811061047d5750506102f697988151610425816103f9602082018095611eaf565b037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08101835282611437565b5190206020860151828701519083519260208401947ffcf35f5ac6a2c28868dc44c302166470266239195f02b0ee408334829333b7668652840152336060840152608083015260a082015260a081526102ed8161141b565b808b61031b8261049461030b61049a968d5161175e565b9261175e565b6103d7565b8680fd5b5082346105bf57602090817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126103325780359067ffffffffffffffff821161032e576104f49136910161161a565b929091845b848110610504578580f35b8061051a61051560019388886118b5565b6118c5565b61052f84610529848a8a6118b5565b016118c5565b3389528385528589209173ffffffffffffffffffffffffffffffffffffffff80911692838b528652868a20911690818a5285528589207fffffffffffffffffffffffff000000000000000000000000000000000000000081541690558551918252848201527f89b1add15eff56b3dfe299ad94e01f2b52fbcb80ae1a3baea6ae8c04cb2b98a4853392a2016104f9565b8280fd5b50346103365760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033657610676816105ff6114a0565b936106086114c3565b6106106114e6565b73ffffffffffffffffffffffffffffffffffffffff968716835260016020908152848420928816845291825283832090871683528152919020549251938316845260a083901c65ffffffffffff169084015260d09190911c604083015281906060820190565b0390f35b50346103365760807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610336576106b26114a0565b906106bb6114c3565b916106c46114e6565b65ffffffffffff926064358481169081810361032a5779ffffffffffff0000000000000000000000000000000000000000947fda9fa7c1b00402c17d0161b249b1ab8bbec047c5a52207b9c112deffd817036b94338a5260016020527fffffffffffff0000000000000000000000000000000000000000000000000000858b209873ffffffffffffffffffffffffffffffffffffffff809416998a8d5260205283878d209b169a8b8d52602052868c209486156000146107a457504216925b8454921697889360a01b16911617179055815193845260208401523392a480f35b905092610783565b5082346105bf5760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126105bf576107e56114a0565b906107ee6114c3565b9265ffffffffffff604435818116939084810361032a57338852602091600183528489209673ffffffffffffffffffffffffffffffffffffffff80911697888b528452858a20981697888a5283528489205460d01c93848711156109175761ffff9085840316116108f05750907f55eb90d810e1700b35a8e7e25395ff7f2b2259abd7415ca2284dfb1c246418f393929133895260018252838920878a528252838920888a5282528389209079ffffffffffffffffffffffffffffffffffffffffffffffffffff7fffffffffffff000000000000000000000000000000000000000000000000000083549260d01b16911617905582519485528401523392a480f35b84517f24d35a26000000000000000000000000000000000000000000000000000000008152fd5b5084517f756688fe000000000000000000000000000000000000000000000000000000008152fd5b503461033657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610336578060209273ffffffffffffffffffffffffffffffffffffffff61098f6114a0565b1681528084528181206024358252845220549051908152f35b5082346105bf57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126105bf577f3704902f963766a4e561bbaab6e6cdc1b1dd12f6e9e99648da8843b3f46b918d90359160243533855284602052818520848652602052818520818154179055815193845260208401523392a280f35b8234610a9a5760807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610a9a57610a606114a0565b610a686114c3565b610a706114e6565b6064359173ffffffffffffffffffffffffffffffffffffffff8316830361032e576102f6936117a1565b80fd5b503461033657817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033657602090610ad7611a67565b9051908152f35b508290346105bf576101007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126105bf57610b1a3661152a565b90807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7c36011261033257610b4c611478565b9160e43567ffffffffffffffff8111610bda576102f694610b6f913691016115c1565b939092610b7c8351611f9d565b6020840151828501519083519260208401947f939c21a48a8dbe3a9a2404a1d46691e4d39f6583d6ec6b35714604c986d801068652840152336060840152608083015260a082015260a08152610bd18161141b565b51902091611b6e565b8580fd5b509134610336576101007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033657610c186114a0565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc360160c08112610332576080855191610c51836113e3565b1261033257845190610c6282611398565b73ffffffffffffffffffffffffffffffffffffffff91602435838116810361049f578152604435838116810361049f57602082015265ffffffffffff606435818116810361032a5788830152608435908116810361049f576060820152815260a435938285168503610bda576020820194855260c4359087830182815260e43567ffffffffffffffff811161032657610cfe90369084016115c1565b929093804211610d88575050918591610d786102f6999a610d7e95610d238851611f07565b90898c511690519083519260208401947ff3841cd1ff0085026a6327b620b67997ce40f282c88a8e905a7a5626e310f3d086528401526060830152608082015260808152610d70816113ff565b519020611b22565b91612010565b51925116916118e6565b602492508a51917fcd21db4f000000000000000000000000000000000000000000000000000000008352820152fd5b5091346103365760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc93818536011261033257610df36114a0565b9260249081359267ffffffffffffffff9788851161032a578590853603011261049f578051978589018981108282111761104a578252848301358181116103265785019036602383011215610326578382013591610e50836115ef565b90610e5d85519283611437565b838252602093878584019160071b83010191368311611046578801905b828210610fe9575050508a526044610e93868801611509565b96838c01978852013594838b0191868352604435908111610fe557610ebb90369087016115c1565b959096804211610fba575050508998995151610ed681611e04565b908b5b818110610f9757505092889492610d7892610f6497958351610f02816103f98682018095611eaf565b5190209073ffffffffffffffffffffffffffffffffffffffff9a8b8b51169151928551948501957faf1b0d30d2cab0380e68f0689007e3254993c596f2fdd0aaa7f4d04f794408638752850152830152608082015260808152610d70816113ff565b51169082515192845b848110610f78578580f35b80610f918585610f8b600195875161175e565b516118e6565b01610f6d565b80610311610fac8e9f9e93610fb2945161175e565b51611f07565b9b9a9b610ed9565b8551917fcd21db4f000000000000000000000000000000000000000000000000000000008352820152fd5b8a80fd5b6080823603126110465785608091885161100281611398565b61100b85611509565b8152611018838601611509565b838201526110278a8601611607565b8a8201528d611037818701611607565b90820152815201910190610e7a565b8c80fd5b84896041867f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b5082346105bf576101407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126105bf576110b03661152a565b91807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7c360112610332576110e2611478565b67ffffffffffffffff93906101043585811161049f5761110590369086016115c1565b90936101243596871161032a57611125610bd1966102f6983691016115c1565b969095825190611134826113ff565b606482527f5065726d69745769746e6573735472616e7366657246726f6d28546f6b656e5060208301527f65726d697373696f6e73207065726d69747465642c6164647265737320737065848301527f6e6465722c75696e74323536206e6f6e63652c75696e7432353620646561646c60608301527f696e652c0000000000000000000000000000000000000000000000000000000060808301528351948591816111e3602085018096611edc565b918237018b8152039361121c7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe095868101835282611437565b5190209261122a8651611f9d565b6020878101518589015195519182019687526040820192909252336060820152608081019190915260a081019390935260e43560c08401528260e081016102e1565b5082346105bf576020807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033257813567ffffffffffffffff92838211610bda5736602383011215610bda5781013592831161032e576024906007368386831b8401011161049f57865b8581106112e5578780f35b80821b83019060807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc83360301126103265761139288876001946060835161132c81611398565b611368608461133c8d8601611509565b9485845261134c60448201611509565b809785015261135d60648201611509565b809885015201611509565b918291015273ffffffffffffffffffffffffffffffffffffffff80808093169516931691166117a1565b016112da565b6080810190811067ffffffffffffffff8211176113b457604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6060810190811067ffffffffffffffff8211176113b457604052565b60a0810190811067ffffffffffffffff8211176113b457604052565b60c0810190811067ffffffffffffffff8211176113b457604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176113b457604052565b60c4359073ffffffffffffffffffffffffffffffffffffffff8216820361149b57565b600080fd5b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361149b57565b6024359073ffffffffffffffffffffffffffffffffffffffff8216820361149b57565b6044359073ffffffffffffffffffffffffffffffffffffffff8216820361149b57565b359073ffffffffffffffffffffffffffffffffffffffff8216820361149b57565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc01906080821261149b576040805190611563826113e3565b8082941261149b57805181810181811067ffffffffffffffff8211176113b457825260043573ffffffffffffffffffffffffffffffffffffffff8116810361149b578152602435602082015282526044356020830152606435910152565b9181601f8401121561149b5782359167ffffffffffffffff831161149b576020838186019501011161149b57565b67ffffffffffffffff81116113b45760051b60200190565b359065ffffffffffff8216820361149b57565b9181601f8401121561149b5782359167ffffffffffffffff831161149b576020808501948460061b01011161149b57565b91909160608184031261149b576040805191611666836113e3565b8294813567ffffffffffffffff9081811161149b57830182601f8201121561149b578035611693816115ef565b926116a087519485611437565b818452602094858086019360061b8501019381851161149b579086899897969594939201925b8484106116e3575050505050855280820135908501520135910152565b90919293949596978483031261149b578851908982019082821085831117611730578a928992845261171487611509565b81528287013583820152815201930191908897969594936116c6565b602460007f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b80518210156117725760209160051b010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b92919273ffffffffffffffffffffffffffffffffffffffff604060008284168152600160205282828220961695868252602052818120338252602052209485549565ffffffffffff8760a01c16804211611884575082871696838803611812575b5050611810955016926122fc565b565b878484161160001461184f57602488604051907ff96fb0710000000000000000000000000000000000000000000000000000000082526004820152fd5b7fffffffffffffffffffffffff000000000000000000000000000000000000000084846118109a031691161790553880611802565b602490604051907fd81b2f2e0000000000000000000000000000000000000000000000000000000082526004820152fd5b91908110156117725760061b0190565b3573ffffffffffffffffffffffffffffffffffffffff8116810361149b5790565b9065ffffffffffff908160608401511673ffffffffffffffffffffffffffffffffffffffff908185511694826020820151169280866040809401511695169560009187835260016020528383208984526020528383209916988983526020528282209184835460d01c03611a3e579185611a1794927fc6a377bfc4eb120024a8ac08eef205be16b817020812c73223e81d1bdb9708ec98979694508715600014611a1c5779ffffffffffff00000000000000000000000000000000000000009042165b60a01b167fffffffffffff00000000000000000000000000000000000000000000000000006001860160d01b1617179055519384938491604091949373ffffffffffffffffffffffffffffffffffffffff606085019616845265ffffffffffff809216602085015216910152565b0390a4565b5079ffffffffffff0000000000000000000000000000000000000000876119a9565b600484517f756688fe000000000000000000000000000000000000000000000000000000008152fd5b467f000000000000000000000000000000000000000000000000000000000000000003611ab2577f000000000000000000000000000000000000000000000000000000000000000090565b60405160208101907f8cad95687ba82c2ce50e74f7b754645e5117c3a5bec8151c0726d5857980a86682527f9ac997416e8ff9d2ff6bebeb7149f65cdae5e32e2b90440b566bb3044041d36a604082015246606082015230608082015260808152611b1c816113ff565b51902090565b611b2a611a67565b906040519060208201927f190100000000000000000000000000000000000000000000000000000000000084526022830152604282015260428152611b1c81611398565b9192909360a435936040840151804211611c0f5750602084510151808611611bde5750918591610d78611bae94611ba9602088015186611d90565b611b22565b73ffffffffffffffffffffffffffffffffffffffff809151511692608435918216820361149b57611810936122fc565b602490604051907f3728b83d0000000000000000000000000000000000000000000000000000000082526004820152fd5b602490604051907fcd21db4f0000000000000000000000000000000000000000000000000000000082526004820152fd5b959093958051519560409283830151804211611d605750848803611d3757611c77918691610d7860209b611ba98d88015186611d90565b60005b868110611c8b575050505050505050565b611c9681835161175e565b5188611ca383878a6118b5565b01359089810151808311611d07575091818888886001968596611ccd575b50505050505001611c7a565b611cfc95611cf69273ffffffffffffffffffffffffffffffffffffffff610515935116956118b5565b916122fc565b803888888883611cc1565b6024908651907f3728b83d0000000000000000000000000000000000000000000000000000000082526004820152fd5b600484517fff633a38000000000000000000000000000000000000000000000000000000008152fd5b6024908551907fcd21db4f0000000000000000000000000000000000000000000000000000000082526004820152fd5b9073ffffffffffffffffffffffffffffffffffffffff600160ff83161b9216600052600060205260406000209060081c6000526020526040600020818154188091551615611dda57565b60046040517f756688fe000000000000000000000000000000000000000000000000000000008152fd5b90611e0e826115ef565b611e1b6040519182611437565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0611e4982946115ef565b0190602036910137565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114611e805760010190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b805160208092019160005b828110611ec8575050505090565b835185529381019392810192600101611eba565b9081519160005b838110611ef4575050016000815290565b8060208092840101518185015201611ee3565b60405160208101917f65626cad6cb96493bf6f5ebea28756c966f023ab9e8a83a7101849d5573b3678835273ffffffffffffffffffffffffffffffffffffffff8082511660408401526020820151166060830152606065ffffffffffff9182604082015116608085015201511660a082015260a0815260c0810181811067ffffffffffffffff8211176113b45760405251902090565b6040516020808201927f618358ac3db8dc274f0cd8829da7e234bd48cd73c4a740aede1adec9846d06a1845273ffffffffffffffffffffffffffffffffffffffff81511660408401520151606082015260608152611b1c81611398565b919082604091031261149b576020823592013590565b6000843b6121775750604182036120f55761202d82820182611ffa565b939092604010156117725760209360009360ff6040608095013560f81c5b60405194855216868401526040830152606082015282805260015afa156120e95773ffffffffffffffffffffffffffffffffffffffff80600051169182156120bf57160361209557565b60046040517f815e1d64000000000000000000000000000000000000000000000000000000008152fd5b60046040517f8baa579f000000000000000000000000000000000000000000000000000000008152fd5b6040513d6000823e3d90fd5b6040820361214d5761210991810190611ffa565b91601b7f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff84169360ff1c019060ff8211611e805760209360009360ff60809461204b565b60046040517f4be6321b000000000000000000000000000000000000000000000000000000008152fd5b929391601f928173ffffffffffffffffffffffffffffffffffffffff60646020957fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0604051988997889687947f1626ba7e000000000000000000000000000000000000000000000000000000009e8f8752600487015260406024870152816044870152868601378b85828601015201168101030192165afa9081156122f1578291612273575b507fffffffff000000000000000000000000000000000000000000000000000000009150160361224957565b60046040517fb0669cbc000000000000000000000000000000000000000000000000000000008152fd5b90506020813d82116122e9575b8161228d60209383611437565b810103126103365751907fffffffff0000000000000000000000000000000000000000000000000000000082168203610a9a57507fffffffff00000000000000000000000000000000000000000000000000000000903861221d565b3d9150612280565b6040513d84823e3d90fd5b9060006064926020958295604051947f23b872dd0000000000000000000000000000000000000000000000000000000086526004860152602485015260448401525af13d15601f3d116001600051141617161561235557565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601460248201527f5452414e534645525f46524f4d5f4641494c45440000000000000000000000006044820152fdfea164736f6c6343000811000a";class kc extends Ia{constructor(f){super(Un,Mc,f)}deploy(f){return super.deploy(f||{})}getDeployTransaction(f){return super.getDeployTransaction(f||{})}attach(f){return super.attach(f)}connect(f){return super.connect(f)}static createInterface(){return new G0(Un)}static connect(f,n){return new q0(f,Un,n)}}kc.bytecode=Mc;kc.abi=Un;var ru;(function(r){r[r.NotSupported=0]="NotSupported",r[r.Failed=1]="Failed",r[r.Succeeded=2]="Succeeded",r[r.InsufficientBalance=3]="InsufficientBalance",r[r.NotApproved=4]="NotApproved"})(ru||(ru={}));class iy extends Ar{constructor(f){super(),this.url=f}async getGasPrice(){M.info(`About to get gas prices from gas station ${this.url}`);const f=await of(async()=>xa.get(this.url),{retries:1}),{data:n,status:a}=f;if(a!=200)throw M.error({response:f},`Unabled to get gas price from ${this.url}.`),new Error(`Unable to get gas price from ${this.url}`);M.info({gasPriceResponse:n},'Gas price response from API. About to parse "fast" to big number');const i=ye.from(n.fast).div(ye.from(10)).mul(ye.from(10).pow(9));return M.info(`Gas price in wei: ${i} as of block ${n.blockNum}`),{gasPriceWei:i}}}class oy extends Ar{constructor(f){super(),this.provider=f}async getGasPrice(){const f=await this.provider.getGasPrice();return M.info({gasPriceWei:f},`Got gas price ${f} using eth_gasPrice RPC`),{gasPriceWei:f}}}class uy{}var b0={},cy=dy;function dy(r){return!isNaN(parseFloat(r))&&isFinite(r)}b0.numbers=bt;b0.sum=ei;b0.mean=ti;b0.median=py;b0.mode=hy;b0.variance=fi;b0.sampleVariance=Uc;b0.populationVariance=fi;b0.stdev=Nc;b0.sampleStdev=my;b0.populationStdev=Nc;b0.percentile=by;b0.histogram=yy;var ly=cy;function bt(r){var f=[];if(r==null)return f;for(var n=0;n<r.length;n++)ly(r[n])&&f.push(+r[n]);return f}function Za(r){return r.sort(function(n,a){return n-a})}function ei(r){r=bt(r);for(var f=0,n=0;n<r.length;n++)f+=r[n];return f}function ti(r){return r=bt(r),r.length===0?NaN:ei(r)/r.length}function py(r){if(r=bt(r),r.length===0)return NaN;var f=r.length/2|0;return r=Za(r),r.length%2?r[f]:(r[f-1]+r[f])/2}function hy(r){if(r=bt(r),r.length===0)return NaN;for(var f=NaN,n={},a=0;a<r.length;a++){var i=r[a],c=n[i]||0;c++,n[i]=c}var l=bt(Object.keys(n).sort(function(y,g){return n[g]-n[y]}));if(f=l[0],n[l[1]]==n[f]){if(l.length==r.length)return r;for(var d=new Set([f]),u=n[f],a=1;a<l.length&&n[l[a]]==u;a++)d.add(l[a]);return d}return f}function Fc(r){r=bt(r);for(var f=ti(r),n=[],a=0;a<r.length;a++)n.push(Math.pow(r[a]-f,2));return n}function fi(r){return ti(Fc(r))}function Uc(r){var f=Fc(r);return f.length<=1?NaN:ei(f)/(f.length-1)}function Nc(r){return Math.sqrt(fi(r))}function my(r){return Math.sqrt(Uc(r))}function by(r,f){if(r=bt(r),r.length===0||f==null||f<0)return NaN;f>1&&(f=1),r=Za(r);var n=r.length*f-.5;if((n|0)===n)return r[n];var a=n|0,i=n-a;return(1-i)*r[a]+i*r[Math.min(a+1,r.length-1)]}function yy(r,f){if(r==null||(r=Za(bt(r)),r.length===0))return null;f==null&&(f=Math.sqrt(r.length)),f=Math.round(f),f<1&&(f=1);var n=r[0],a=r[r.length-1];n===a&&(n=n-.5,a=a+.5);var i=a-n,c=(i+i*.05)/f,l=(n+a)/2,d=l-c*Math.floor(f/2);if(f%2!==0)var d=l-c/2-c*Math.floor(f/2);for(var u={values:Array(f).fill(0),bins:f,binWidth:c,binLimits:[d,d+c*f]},m=0,y=0;y<r.length;y++){for(;r[y]>(m+1)*c+d;)m++;u.values[m]++}return u}const Nn=[{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct UniswapInterfaceMulticall.Call[]",name:"calls",type:"tuple[]"}],name:"multicall",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"uint256",name:"gasUsed",type:"uint256"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct UniswapInterfaceMulticall.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"}],Lc="0x608060405234801561001057600080fd5b50610567806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80630f28c97d146100465780631749e1e3146100645780634d2301cc14610085575b600080fd5b61004e610098565b60405161005b919061041f565b60405180910390f35b6100776100723660046102a7565b61009c565b60405161005b929190610428565b61004e610093366004610286565b610220565b4290565b8051439060609067ffffffffffffffff811180156100b957600080fd5b506040519080825280602002602001820160405280156100f357816020015b6100e061023a565b8152602001906001900390816100d85790505b50905060005b835181101561021a57600080600086848151811061011357fe5b60200260200101516000015187858151811061012b57fe5b60200260200101516020015188868151811061014357fe5b60200260200101516040015192509250925060005a90506000808573ffffffffffffffffffffffffffffffffffffffff1685856040516101839190610403565b60006040518083038160008787f1925050503d80600081146101c1576040519150601f19603f3d011682016040523d82523d6000602084013e6101c6565b606091505b509150915060005a8403905060405180606001604052808415158152602001828152602001838152508989815181106101fb57fe5b60200260200101819052505050505050505080806001019150506100f9565b50915091565b73ffffffffffffffffffffffffffffffffffffffff163190565b604051806060016040528060001515815260200160008152602001606081525090565b803573ffffffffffffffffffffffffffffffffffffffff8116811461028157600080fd5b919050565b600060208284031215610297578081fd5b6102a08261025d565b9392505050565b600060208083850312156102b9578182fd5b823567ffffffffffffffff808211156102d0578384fd5b818501915085601f8301126102e3578384fd5b8135818111156102ef57fe5b6102fc8485830201610506565b81815284810190848601875b848110156103f457813587017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0606081838f03011215610346578a8bfd5b60408051606081018181108b8211171561035c57fe5b8252610369848d0161025d565b8152818401358c82015260608401358a811115610384578d8efd5b8085019450508e603f850112610398578c8dfd5b8b8401358a8111156103a657fe5b6103b68d85601f84011601610506565b93508084528f838287010111156103cb578d8efd5b808386018e86013783018c018d9052908101919091528552509287019290870190600101610308565b50909998505050505050505050565b6000825161041581846020870161052a565b9190910192915050565b90815260200190565b600060408083018584526020828186015281865180845260609350838701915083838202880101838901875b838110156104f6578983037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa001855281518051151584528681015187850152880151888401889052805188850181905260806104b582828801858c0161052a565b96880196601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01694909401909301925090850190600101610454565b50909a9950505050505050505050565b60405181810167ffffffffffffffff8111828210171561052257fe5b604052919050565b60005b8381101561054557818101518382015260200161052d565b83811115610554576000848401525b5050505056fea164736f6c6343000706000a";class ni extends Ia{constructor(f){super(Nn,Lc,f)}deploy(f){return super.deploy(f||{})}getDeployTransaction(f){return super.getDeployTransaction(f||{})}attach(f){return super.attach(f)}connect(f){return super.connect(f)}static createInterface(){return new G0(Nn)}static connect(f,n){return new q0(f,Nn,n)}}ni.bytecode=Lc;ni.abi=Nn;class Gc extends uy{constructor(f,n,a=1e6){super(),this.chainId=f,this.provider=n,this.gasLimitPerCall=a;const i=Fb[this.chainId];if(!i)throw new Error(`No address for Uniswap Multicall Contract on chain id: ${f}`);this.multicallContract=ni.connect(i,this.provider)}async callSameFunctionOnMultipleContracts(f){var n;const{addresses:a,contractInterface:i,functionName:c,functionParams:l,providerConfig:d}=f,u=(n=d==null?void 0:d.blockNumber)!==null&&n!==void 0?n:void 0,m=i.getFunction(c),y=i.encodeFunctionData(m,l),g=_.map(a,w=>({target:w,callData:y,gasLimit:this.gasLimitPerCall}));M.debug({calls:g},`About to multicall for ${c} across ${a.length} addresses`);const{blockNumber:T,returnData:A}=await this.multicallContract.callStatic.multicall(g,{blockTag:u}),S=[];for(let w=0;w<A.length;w++){const{success:O,returnData:k}=A[w];if(!O||k.length<=2){M.debug({result:A[w]},`Invalid result calling ${c} on address ${a[w]}`),S.push({success:!1,returnData:k});continue}S.push({success:!0,result:i.decodeFunctionResult(m,k)})}return M.debug({results:S},`Results for multicall on ${c} across ${a.length} addresses as of block ${T}`),{blockNumber:T,results:S}}async callSameFunctionOnContractWithMultipleParams(f){var n,a;const{address:i,contractInterface:c,functionName:l,functionParams:d,additionalConfig:u,providerConfig:m}=f,y=c.getFunction(l),g=(n=u==null?void 0:u.gasLimitPerCallOverride)!==null&&n!==void 0?n:this.gasLimitPerCall,T=(a=m==null?void 0:m.blockNumber)!==null&&a!==void 0?a:void 0,A=_.map(d,Q=>{const $=c.encodeFunctionData(y,Q);return{target:i,callData:$,gasLimit:g}});M.debug({calls:A},`About to multicall for ${l} at address ${i} with ${d.length} different sets of params`);const{blockNumber:S,returnData:w}=await this.multicallContract.callStatic.multicall(A,{blockTag:T}),O=[],k=[];for(let Q=0;Q<w.length;Q++){const{success:$,returnData:j,gasUsed:F}=w[Q];if(!$||j.length<=2){M.debug({result:w[Q]},`Invalid result calling ${l} with params ${d[Q]}`),O.push({success:!1,returnData:j});continue}k.push(F.toNumber()),O.push({success:!0,result:c.decodeFunctionResult(y,j)})}return M.debug({results:O,functionName:l,address:i},`Results for multicall for ${l} at address ${i} with ${d.length} different sets of params. Results as of block ${S}`),{blockNumber:S,results:O,approxGasUsedPerSuccessCall:b0.percentile(k,99)}}async callMultipleFunctionsOnSameContract(f){var n,a;const{address:i,contractInterface:c,functionNames:l,functionParams:d,additionalConfig:u,providerConfig:m}=f,y=(n=u==null?void 0:u.gasLimitPerCallOverride)!==null&&n!==void 0?n:this.gasLimitPerCall,g=(a=m==null?void 0:m.blockNumber)!==null&&a!==void 0?a:void 0,T=_.map(l,(k,Q)=>{const $=c.getFunction(k),j=d?d[Q]:[],F=c.encodeFunctionData($,j);return{target:i,callData:F,gasLimit:y}});M.debug({calls:T},`About to multicall for ${l.length} functions at address ${i} with ${d==null?void 0:d.length} different sets of params`);const{blockNumber:A,returnData:S}=await this.multicallContract.callStatic.multicall(T,{blockTag:g}),w=[],O=[];for(let k=0;k<S.length;k++){const Q=c.getFunction(l[k]),{success:$,returnData:j,gasUsed:F}=S[k];if(!$||j.length<=2){M.debug({result:S[k]},`Invalid result calling ${l[k]} with ${d?d[k]:"0"} params`),w.push({success:!1,returnData:j});continue}O.push(F.toNumber()),w.push({success:!0,result:c.decodeFunctionResult(Q,j)})}return M.debug({results:w,functionNames:l,address:i},`Results for multicall for ${l.length} functions at address ${i} with ${d?d.length:" 0"} different sets of params. Results as of block ${A}`),{blockNumber:A,results:w,approxGasUsedPerSuccessCall:b0.percentile(O,99)}}}const gy=[p.MAINNET,p.RINKEBY,p.ROPSTEN,p.G\u00D6RLI,p.POLYGON_MUMBAI];class vy extends Ar{constructor(f,n,a,i=gy){super(),this.chainId=f,this.eip1559GasPriceProvider=n,this.legacyGasPriceProvider=a,this.eipChains=i}async getGasPrice(){return this.eipChains.includes(this.chainId)?this.eip1559GasPriceProvider.getGasPrice():this.legacyGasPriceProvider.getGasPrice()}}const ya=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"v3SqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"v3InitializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"v3SwapGasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV2Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV2",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV3Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV3",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];class qc{static createInterface(){return new G0(ya)}static connect(f,n){return new q0(f,ya,n)}}qc.abi=ya;const ga=[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactInputSingleParams",name:"params",type:"tuple"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactOutputSingleParams",name:"params",type:"tuple"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];class $c{static createInterface(){return new G0(ga)}static connect(f,n){return new q0(f,ga,n)}}$c.abi=ga;class su extends Error{constructor(){super(...arguments),this.name="BlockConflictError"}}class au extends Error{constructor(){super(...arguments),this.name="SuccessRateError"}}class iu extends Error{constructor(){super(...arguments),this.name="ProviderBlockHeaderError"}}class ou extends Error{constructor(){super(...arguments),this.name="ProviderTimeoutError"}}class Zs extends Error{constructor(){super(...arguments),this.name="ProviderGasError"}}const uu=2;class _f{constructor(f,n,a,i={retries:uu,minTimeout:25,maxTimeout:250},c={multicallChunk:150,gasLimitPerCall:1e6,quoteMinSuccessRate:.2},l={gasLimitOverride:15e5,multicallChunk:100},d={gasLimitOverride:13e5,multicallChunk:110},u={baseBlockOffset:0,rollback:{enabled:!1}},m){this.chainId=f,this.provider=n,this.multicall2Provider=a,this.retryOptions=i,this.batchParams=c,this.gasErrorFailureOverride=l,this.successRateFailureOverrides=d,this.blockNumberConfig=u,this.quoterAddressOverride=m}getQuoterAddress(f){if(this.quoterAddressOverride)return this.quoterAddressOverride;const n=f?kb[this.chainId]:Mb[this.chainId];if(!n)throw new Error(`No address for the quoter contract on chain id: ${this.chainId}`);return n}async getQuotesManyExactIn(f,n,a){return this.getQuotesManyData(f,n,"quoteExactInput",a)}async getQuotesManyExactOut(f,n,a){return this.getQuotesManyData(f,n,"quoteExactOutput",a)}async getQuotesManyData(f,n,a,i){var c;const l=n.some(ee=>ee.protocol===ge.exports.Protocol.V2)||n.some(ee=>ee.protocol===ge.exports.Protocol.MIXED);this.validateRoutes(n,a,l);let d=this.batchParams.multicallChunk,u=this.batchParams.gasLimitPerCall;const{baseBlockOffset:m,rollback:y}=this.blockNumberConfig,g=await this.provider.getBlockNumber(),T={...i,blockNumber:(c=i==null?void 0:i.blockNumber)!==null&&c!==void 0?c:g+m},A=_(n).flatMap(ee=>{const se=ee.protocol===ge.exports.Protocol.V3?$h(ee,a=="quoteExactOutput"):ge.exports.encodeMixedRouteToPath(ee instanceof lc?new ge.exports.MixedRouteSDK(ee.pairs,ee.input,ee.output):ee);return f.map(de=>[se,`0x${de.quotient.toString(16)}`])}).value(),S=Math.ceil(A.length/Math.ceil(A.length/d)),w=_.chunk(A,S);let O=_.map(w,ee=>({status:"pending",inputs:ee}));M.info(`About to get ${A.length} quotes in chunks of ${S} [${_.map(w,ee=>ee.length).join(",")}] ${u?`with a gas limit override of ${u}`:""} and block number: ${await T.blockNumber} [Original before offset: ${g}].`);let k=!1,Q=!1,$=0,j=!1,F=!1,J=!1,K=!1,te=!1,ce=!1,le=1;const Me=O.length;let P=0;const{results:N,blockNumber:L,approxGasUsedPerSuccessCall:B}=await of(async(ee,se)=>{j=!1,le=se;const[Z,de,Te]=this.partitionQuotes(O);M.info(`Starting attempt: ${se}.
          Currently ${Z.length} success, ${de.length} failed, ${Te.length} pending.
          Gas limit override: ${u} Block number override: ${T.blockNumber}.`),O=await Promise.all(_.map(O,async(ne,Ie)=>{if(ne.status=="success")return ne;const{inputs:Ke}=ne;try{P=P+1;const Fe=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:this.getQuoterAddress(l),contractInterface:l?qc.createInterface():$c.createInterface(),functionName:a,functionParams:Ke,providerConfig:T,additionalConfig:{gasLimitPerCallOverride:u}}),X=this.validateSuccessRate(Fe.results,k);return X?{status:"failed",inputs:Ke,reason:X,results:Fe}:{status:"success",inputs:Ke,results:Fe}}catch(Fe){return Fe.message.includes("header not found")?{status:"failed",inputs:Ke,reason:new iu(Fe.message.slice(0,500))}:Fe.message.includes("timeout")?{status:"failed",inputs:Ke,reason:new ou(`Req ${Ie}/${O.length}. Request had ${Ke.length} inputs. ${Fe.message.slice(0,500)}`)}:Fe.message.includes("out of gas")?{status:"failed",inputs:Ke,reason:new Zs(Fe.message.slice(0,500))}:{status:"failed",inputs:Ke,reason:new Error(`Unknown error from provider: ${Fe.message.slice(0,500)}`)}}}));const[Ce,Ae,Ye]=this.partitionQuotes(O);if(Ye.length>0)throw new Error("Pending quote after waiting for all promises.");let Ne=!1;this.validateBlockNumbers(Ce,w.length,u)&&(Ne=!0);const We=_.map(Ae,ne=>ne.reason.name).join(", ");if(Ae.length>0){M.info(`On attempt ${se}: ${Ae.length}/${O.length} quotes failed. Reasons: ${We}`);for(const ne of Ae){const{reason:Ie}=ne;if(M.info({error:Ie},`[QuoteFetchError] Attempt ${se}. ${Ie.message}`),Ie instanceof su)J||(ie.putMetric("QuoteBlockConflictErrorRetry",1,oe.Count),J=!0),Ne=!0;else if(Ie instanceof iu){if(Q||(ie.putMetric("QuoteBlockHeaderNotFoundRetry",1,oe.Count),Q=!0),j||($=$+1,j=!0),y.enabled){const{rollbackBlockOffset:Ke,attemptsBeforeRollback:Fe}=y;$>=Fe&&!F&&(M.info(`Attempt ${se}. Have failed due to block header ${$-1} times. Rolling back block number by ${Ke} for next retry`),T.blockNumber=T.blockNumber?await T.blockNumber+Ke:await this.provider.getBlockNumber()+Ke,Ne=!0,F=!0)}}else Ie instanceof ou?te||(ie.putMetric("QuoteTimeoutRetry",1,oe.Count),te=!0):Ie instanceof Zs?(K||(ie.putMetric("QuoteOutOfGasExceptionRetry",1,oe.Count),K=!0),u=this.gasErrorFailureOverride.gasLimitOverride,d=this.gasErrorFailureOverride.multicallChunk,Ne=!0):Ie instanceof au?k||(ie.putMetric("QuoteSuccessRateRetry",1,oe.Count),k=!0,u=this.successRateFailureOverrides.gasLimitOverride,d=this.successRateFailureOverrides.multicallChunk,Ne=!0):ce||(ie.putMetric("QuoteUnknownReasonRetry",1,oe.Count),ce=!0)}}if(Ne){M.info(`Attempt ${se}. Resetting all requests to pending for next attempt.`);const ne=Math.ceil(A.length/Math.ceil(A.length/d)),Ie=_.chunk(A,ne);O=_.map(Ie,Ke=>({status:"pending",inputs:Ke}))}if(Ae.length>0){if((this.chainId==p.ARBITRUM_ONE||this.chainId==p.ARBITRUM_RINKEBY||this.chainId==p.ARBITRUM_GOERLI)&&_.every(Ae,ne=>ne.reason instanceof Zs)&&se==this.retryOptions.retries)return M.error("Failed to get quotes on Arbitrum due to provider gas error issue. Overriding error to return 0 quotes."),{results:[],blockNumber:ye.from(0),approxGasUsedPerSuccessCall:0};throw new Error(`Failed to get ${Ae.length} quotes. Reasons: ${We}`)}const z=_.map(Ce,ne=>ne.results);return{results:_.flatMap(z,ne=>ne.results),blockNumber:ye.from(z[0].blockNumber),approxGasUsedPerSuccessCall:b0.percentile(_.map(z,ne=>ne.approxGasUsedPerSuccessCall),100)}},{retries:uu,...this.retryOptions}),H=this.processQuoteResults(N,n,f);ie.putMetric("QuoteApproxGasUsedPerSuccessfulCall",B,oe.Count),ie.putMetric("QuoteNumRetryLoops",le-1,oe.Count),ie.putMetric("QuoteTotalCallsToProvider",P,oe.Count),ie.putMetric("QuoteExpectedCallsToProvider",Me,oe.Count),ie.putMetric("QuoteNumRetriedCalls",P-Me,oe.Count);const[x,V]=_(H).flatMap(ee=>ee[1]).partition(ee=>ee.quote!=null).value();return M.info(`Got ${x.length} successful quotes, ${V.length} failed quotes. Took ${le-1} attempt loops. Total calls made to provider: ${P}. Have retried for timeout: ${te}`),{routesWithQuotes:H,blockNumber:L}}partitionQuotes(f){const n=_.filter(f,c=>c.status=="success"),a=_.filter(f,c=>c.status=="failed"),i=_.filter(f,c=>c.status=="pending");return[n,a,i]}processQuoteResults(f,n,a){const i=[],c=_.chunk(f,a.length),l=[];for(let u=0;u<c.length;u++){const m=n[u],y=c[u],g=_.map(y,(T,A)=>{const S=a[A];if(!T.success){const w=100/a.length*(A+1),O=S.toFixed(Math.min(S.currency.decimals,2)),k=z0(m);return l.push({route:k,percent:w,amount:O}),{amount:S,quote:null,sqrtPriceX96AfterList:null,gasEstimate:null,initializedTicksCrossedList:null}}return{amount:S,quote:T.result[0],sqrtPriceX96AfterList:T.result[1],initializedTicksCrossedList:T.result[2],gasEstimate:T.result[3]}});i.push([m,g])}const d=80;return _.forEach(_.chunk(l,d),(u,m)=>{const y=_.groupBy(u,T=>T.route),g=_.mapValues(y,T=>_(T).map(A=>`${A.percent}%[${A.amount}]`).join(","));M.info({failedQuotes:_.map(g,(T,A)=>`${A} : ${T}`)},`Failed on chain quotes for routes Part ${m}/${Math.ceil(l.length/d)}`)}),i}validateBlockNumbers(f,n,a){if(f.length<=1)return null;const i=_.map(f,d=>d.results),c=_.map(i,d=>d.blockNumber),l=_(c).map(d=>d.toNumber()).uniq().value();return l.length==1?null:new su(`Quotes returned from different blocks. ${l}. ${n} calls were made with gas limit ${a}`)}validateSuccessRate(f,n){const a=f.length,i=f.filter(d=>d.success).length,c=1*i/a,{quoteMinSuccessRate:l}=this.batchParams;if(c<l){if(n){M.info(`Quote success rate still below threshold despite retry. Continuing. ${l}: ${c}`);return}return new au(`Quote success rate below threshold of ${l}: ${c}`)}}validateRoutes(f,n,a){if(f.some(i=>i.protocol===ge.exports.Protocol.V3)&&a)throw new Error("Cannot use mixed route quoter with V3 routes");if(n==="quoteExactOutput"&&a)throw new Error("Cannot call quoteExactOutput with V2 or Mixed routes")}}const Ln=[{inputs:[{internalType:"address",name:"_factoryV2",type:"address"},{internalType:"address",name:"factoryV3",type:"address"},{internalType:"address",name:"_positionManager",type:"address"},{internalType:"address",name:"_WETH9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"callPositionManager",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"paths",type:"bytes[]"},{internalType:"uint128[]",name:"amounts",type:"uint128[]"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactInputParams",name:"params",type:"tuple"}],name:"exactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactInputSingleParams",name:"params",type:"tuple"}],name:"exactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactOutputParams",name:"params",type:"tuple"}],name:"exactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactOutputSingleParams",name:"params",type:"tuple"}],name:"exactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factoryV2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getApprovalType",outputs:[{internalType:"enum IApproveAndCall.ApprovalType",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"}],internalType:"struct IApproveAndCall.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],internalType:"struct IApproveAndCall.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"previousBlockhash",type:"bytes32"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"positionManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"pull",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowed",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowedIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"int256",name:"amount0Delta",type:"int256"},{internalType:"int256",name:"amount1Delta",type:"int256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"uniswapV3SwapCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"wrapETH",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],Wc="0x6101006040526000196000553480156200001857600080fd5b5060405162006135380380620061358339810160408190526200003b9162000087565b6001600160601b0319606094851b811660805291841b821660a05291831b811660c052911b1660e052620000e3565b80516001600160a01b03811681146200008257600080fd5b919050565b600080600080608085870312156200009d578384fd5b620000a8856200006a565b9350620000b8602086016200006a565b9250620000c8604086016200006a565b9150620000d8606086016200006a565b905092959194509250565b60805160601c60a05160601c60c05160601c60e05160601c615fb162000184600039806102c15280610b3c52806112ad52806113d7528061147e52806116af52806117d95280612d8f5280612def5280612e70525080611e4c52806124df5280613cdb52508061166f5280611b1a5280611e9c52806132a6525080610c625280610d365280610fe2528061164b5280612fc252806131855250615fb16000f3fe6080604052600436106102a45760003560e01c80639b2c0a371161016e578063dee00f35116100cb578063f100b2051161007f578063f2d5d56b11610064578063f2d5d56b1461066e578063f3995c6714610681578063fa461e33146106945761034f565b8063f100b2051461063b578063f25801a71461064e5761034f565b8063e0e189a0116100b0578063e0e189a0146105f5578063e90a182f14610608578063efdeed8e1461061b5761034f565b8063dee00f35146105b5578063df2ab5bb146105e25761034f565b8063b858183f11610122578063c45a015511610107578063c45a01551461057a578063cab372ce1461058f578063d4ef38de146105a25761034f565b8063b858183f14610554578063c2e3140a146105675761034f565b8063ab3fdd5011610153578063ab3fdd501461051b578063ac9650d81461052e578063b3a2af13146105415761034f565b80639b2c0a37146104f5578063a4a78f0c146105085761034f565b8063472b43f31161021c578063571ac8b0116101d0578063639d71a9116101b5578063639d71a9146104b857806368e0d4e1146104cb578063791b98bc146104e05761034f565b8063571ac8b0146104925780635ae401dc146104a55761034f565b80634961699711610201578063496169971461044a5780634aa4a4fc1461045d5780635023b4df1461047f5761034f565b8063472b43f31461042457806349404b7c146104375761034f565b80631c58db4f116102735780633068c554116102585780633068c554146103eb57806342712a67146103fe5780634659a494146104115761034f565b80631c58db4f146103b85780631f0464d1146103cb5761034f565b806304e45aaf1461035457806309b813461461037d57806311ed56c91461039057806312210e8a146103b05761034f565b3661034f573373ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000161461034d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600960248201527f4e6f742057455448390000000000000000000000000000000000000000000000604482015290519081900360640190fd5b005b600080fd5b610367610362366004615543565b6106b4565b6040516103749190615dfd565b60405180910390f35b61036761038b3660046155de565b61083c565b6103a361039e366004615638565b61091c565b6040516103749190615b7a565b61034d610b28565b61034d6103c63660046157bb565b610b3a565b6103de6103d93660046152a7565b610bbe565b6040516103749190615afc565b61034d6103f93660046150d8565b610c48565b61036761040c366004615885565b610c5b565b61034d61041f366004615121565b610e35565b610367610432366004615885565b610ef5565b61034d6104453660046157eb565b6112a9565b61034d6104583660046157bb565b61146f565b34801561046957600080fd5b5061047261147c565b6040516103749190615a3c565b61036761048d366004615616565b6114a0565b61034d6104a0366004614feb565b611589565b6103de6104b33660046152a7565b6115bc565b61034d6104c6366004614feb565b611635565b3480156104d757600080fd5b50610472611649565b3480156104ec57600080fd5b5061047261166d565b61034d61050336600461581a565b611691565b61034d610516366004615121565b6118a7565b61034d610529366004614feb565b61197c565b6103de61053c36600461517c565b6119ba565b6103a361054f3660046152f1565b611b14565b61036761056236600461549d565b611bd2565b61034d610575366004615121565b611d95565b34801561058657600080fd5b50610472611e4a565b61034d61059d366004614feb565b611990565b61034d6105b0366004615858565b611e6e565b3480156105c157600080fd5b506105d56105d036600461500e565b611e7a565b6040516103749190615b8d565b61034d6105f0366004615039565b612027565b61034d61060336600461507a565b61213e565b61034d61061636600461500e565b6122a4565b34801561062757600080fd5b5061034d6106363660046151bc565b6122b3565b6103a3610649366004615627565b612305565b34801561065a57600080fd5b5061034d610669366004615324565b6123a5565b61034d61067c36600461500e565b6123f6565b61034d61068f366004615121565b612402565b3480156106a057600080fd5b5061034d6106af3660046153b8565b61249a565b600080600083608001511415610771575081516040517f70a0823100000000000000000000000000000000000000000000000000000000815260019173ffffffffffffffffffffffffffffffffffffffff16906370a082319061071b903090600401615a3c565b60206040518083038186803b15801561073357600080fd5b505afa158015610747573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061076b91906157d3565b60808401525b6107ed836080015184606001518560c001516040518060400160405280886000015189604001518a602001516040516020016107af939291906159aa565b6040516020818303038152906040528152602001866107ce57336107d0565b305b73ffffffffffffffffffffffffffffffffffffffff1690526125de565b91508260a00151821015610836576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b60405180910390fd5b50919050565b60006108b0604083018035906108559060208601614feb565b604080518082019091526000908061086d8880615e41565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252503360209091015261278f565b505060005460608201358111156108f3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600055919050565b604080516101608101909152606090610b20907f8831645600000000000000000000000000000000000000000000000000000000908061095f6020870187614feb565b73ffffffffffffffffffffffffffffffffffffffff16815260200185602001602081019061098d9190614feb565b73ffffffffffffffffffffffffffffffffffffffff1681526020016109b860608701604088016157a1565b62ffffff1681526020016109d26080870160608801615379565b60020b81526020016109ea60a0870160808801615379565b60020b8152602090810190610a0a90610a0590880188614feb565b612976565b8152602001610a25866020016020810190610a059190614feb565b815260a0860135602082015260c08601356040820152606001610a4f610100870160e08801614feb565b73ffffffffffffffffffffffffffffffffffffffff1681526020017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff815250604051602401610a9e9190615cf8565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff0000000000000000000000000000000000000000000000000000000090931692909217909152611b14565b90505b919050565b4715610b3857610b383347612a1b565b565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0826040518263ffffffff1660e01b81526004016000604051808303818588803b158015610ba257600080fd5b505af1158015610bb6573d6000803e3d6000fd5b505050505050565b60608380600143034014610c3357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600960248201527f426c6f636b686173680000000000000000000000000000000000000000000000604482015290519081900360640190fd5b610c3d84846119ba565b91505b509392505050565b610c55848433858561213e565b50505050565b6000610cbb7f000000000000000000000000000000000000000000000000000000000000000087868680806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250612b6992505050565b600081518110610cc757fe5b6020026020010151905084811115610d0b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b610da484846000818110610d1b57fe5b9050602002016020810190610d309190614feb565b33610d9e7f000000000000000000000000000000000000000000000000000000000000000088886000818110610d6257fe5b9050602002016020810190610d779190614feb565b89896001818110610d8457fe5b9050602002016020810190610d999190614feb565b612ca2565b84612d8d565b73ffffffffffffffffffffffffffffffffffffffff821660011415610dcb57339150610dee565b73ffffffffffffffffffffffffffffffffffffffff821660021415610dee573091505b610e2c848480806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250869250612f6b915050565b95945050505050565b604080517f8fcbaf0c00000000000000000000000000000000000000000000000000000000815233600482015230602482015260448101879052606481018690526001608482015260ff851660a482015260c4810184905260e48101839052905173ffffffffffffffffffffffffffffffffffffffff881691638fcbaf0c9161010480830192600092919082900301818387803b158015610ed557600080fd5b505af1158015610ee9573d6000803e3d6000fd5b50505050505050505050565b60008086610fab575060018484600081610f0b57fe5b9050602002016020810190610f209190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401610f589190615a3c565b60206040518083038186803b158015610f7057600080fd5b505afa158015610f84573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fa891906157d3565b96505b61103685856000818110610fbb57fe5b9050602002016020810190610fd09190614feb565b82610fdb5733610fdd565b305b6110307f00000000000000000000000000000000000000000000000000000000000000008989600081811061100e57fe5b90506020020160208101906110239190614feb565b8a8a6001818110610d8457fe5b8a612d8d565b73ffffffffffffffffffffffffffffffffffffffff83166001141561105d57339250611080565b73ffffffffffffffffffffffffffffffffffffffff831660021415611080573092505b600085857fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81018181106110b057fe5b90506020020160208101906110c59190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231856040518263ffffffff1660e01b81526004016110fd9190615a3c565b60206040518083038186803b15801561111557600080fd5b505afa158015611129573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061114d91906157d3565b905061118d868680806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250889250612f6b915050565b6112628187877fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81018181106111bf57fe5b90506020020160208101906111d49190614feb565b73ffffffffffffffffffffffffffffffffffffffff166370a08231876040518263ffffffff1660e01b815260040161120c9190615a3c565b60206040518083038186803b15801561122457600080fd5b505afa158015611238573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125c91906157d3565b90613270565b92508683101561129e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b505095945050505050565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561133257600080fd5b505afa158015611346573d6000803e3d6000fd5b505050506040513d602081101561135c57600080fd5b50519050828110156113cf57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e742057455448390000000000000000000000000000604482015290519081900360640190fd5b801561146a577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d826040518263ffffffff1660e01b815260040180828152602001915050600060405180830381600087803b15801561144857600080fd5b505af115801561145c573d6000803e3d6000fd5b5050505061146a8282612a1b565b505050565b61147981336112a9565b50565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000611549608083018035906114b99060608601614feb565b6114c960e0860160c08701614feb565b60405180604001604052808760200160208101906114e79190614feb565b6114f760608a0160408b016157a1565b61150460208b018b614feb565b604051602001611516939291906159aa565b60405160208183030381529060405281526020013373ffffffffffffffffffffffffffffffffffffffff1681525061278f565b90508160a001358111156108f3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c0f565b6115b3817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b61147957600080fd5b606083806115c86133cc565b1115610c3357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601360248201527f5472616e73616374696f6e20746f6f206f6c6400000000000000000000000000604482015290519081900360640190fd5b611640816000613280565b61158957600080fd5b7f000000000000000000000000000000000000000000000000000000000000000081565b7f000000000000000000000000000000000000000000000000000000000000000081565b6000821180156116a2575060648211155b6116ab57600080fd5b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561173457600080fd5b505afa158015611748573d6000803e3d6000fd5b505050506040513d602081101561175e57600080fd5b50519050848110156117d157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e742057455448390000000000000000000000000000604482015290519081900360640190fd5b80156118a0577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16632e1a7d4d826040518263ffffffff1660e01b815260040180828152602001915050600060405180830381600087803b15801561184a57600080fd5b505af115801561185e573d6000803e3d6000fd5b50505050600061271061187a85846133d090919063ffffffff16565b8161188157fe5b0490508015611894576118948382612a1b565b610bb685828403612a1b565b5050505050565b604080517fdd62ed3e00000000000000000000000000000000000000000000000000000000815233600482015230602482015290517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9173ffffffffffffffffffffffffffffffffffffffff89169163dd62ed3e91604480820192602092909190829003018186803b15801561193c57600080fd5b505afa158015611950573d6000803e3d6000fd5b505050506040513d602081101561196657600080fd5b50511015610bb657610bb6868686868686610e35565b611987816000613280565b61199057600080fd5b6115b3817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b60608167ffffffffffffffff811180156119d357600080fd5b50604051908082528060200260200182016040528015611a0757816020015b60608152602001906001900390816119f25790505b50905060005b82811015611b0d5760008030868685818110611a2557fe5b9050602002810190611a379190615e41565b604051611a45929190615a10565b600060405180830381855af49150503d8060008114611a80576040519150601f19603f3d011682016040523d82523d6000602084013e611a85565b606091505b509150915081611aeb57604481511015611a9e57600080fd5b60048101905080806020019051810190611ab89190615433565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d9190615b7a565b80848481518110611af857fe5b60209081029190910101525050600101611a0d565b5092915050565b606060007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1683604051611b5d9190615a20565b6000604051808303816000865af19150503d8060008114611b9a576040519150601f19603f3d011682016040523d82523d6000602084013e611b9f565b606091505b50925090508061083657604482511015611bb857600080fd5b60048201915081806020019051810190611ab89190615433565b600080600083604001511415611ca357600190506000611bf584600001516133f4565b50506040517f70a0823100000000000000000000000000000000000000000000000000000000815290915073ffffffffffffffffffffffffffffffffffffffff8216906370a0823190611c4c903090600401615a3c565b60206040518083038186803b158015611c6457600080fd5b505afa158015611c78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9c91906157d3565b6040850152505b600081611cb05733611cb2565b305b90505b6000611cc48560000151613425565b9050611d1d856040015182611cdd578660200151611cdf565b305b60006040518060400160405280611cf98b6000015161342d565b81526020018773ffffffffffffffffffffffffffffffffffffffff168152506125de565b60408601528015611d3d578451309250611d369061343c565b8552611d4a565b8460400151935050611d50565b50611cb5565b8360600151831015611d8e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c7d565b5050919050565b604080517fdd62ed3e0000000000000000000000000000000000000000000000000000000081523360048201523060248201529051869173ffffffffffffffffffffffffffffffffffffffff89169163dd62ed3e91604480820192602092909190829003018186803b158015611e0a57600080fd5b505afa158015611e1e573d6000803e3d6000fd5b505050506040513d6020811015611e3457600080fd5b50511015610bb657610bb6868686868686612402565b7f000000000000000000000000000000000000000000000000000000000000000081565b61146a83338484611691565b6000818373ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e307f00000000000000000000000000000000000000000000000000000000000000006040518363ffffffff1660e01b8152600401611ed8929190615a5d565b60206040518083038186803b158015611ef057600080fd5b505afa158015611f04573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f2891906157d3565b10611f3557506000612021565b611f5f837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b15611f6c57506001612021565b611f96837ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b15611fa357506002612021565b611fae836000613280565b611fb757600080fd5b611fe1837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff613280565b15611fee57506003612021565b612018837ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe613280565b1561034f575060045b92915050565b60008373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b15801561209057600080fd5b505afa1580156120a4573d6000803e3d6000fd5b505050506040513d60208110156120ba57600080fd5b505190508281101561212d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e7420746f6b656e0000000000000000000000000000604482015290519081900360640190fd5b8015610c5557610c55848383613471565b60008211801561214f575060648211155b61215857600080fd5b60008573ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b1580156121c157600080fd5b505afa1580156121d5573d6000803e3d6000fd5b505050506040513d60208110156121eb57600080fd5b505190508481101561225e57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f496e73756666696369656e7420746f6b656e0000000000000000000000000000604482015290519081900360640190fd5b8015610bb657600061271061227383866133d0565b8161227a57fe5b049050801561228e5761228e878483613471565b61229b8786838503613471565b50505050505050565b6122af828233612027565b5050565b6000806122c1868685613646565b915091508362ffffff1681830312610bb6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c46565b6060610b2063219f5d1760e01b6040518060c001604052808560400135815260200161233d866000016020810190610a059190614feb565b8152602001612358866020016020810190610a059190614feb565b815260200185606001358152602001856080013581526020017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff815250604051602401610a9e9190615cb4565b6000806123b28584613859565b915091508362ffffff16818303126118a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615c46565b6122af82333084613ae1565b604080517fd505accf000000000000000000000000000000000000000000000000000000008152336004820152306024820152604481018790526064810186905260ff8516608482015260a4810184905260c48101839052905173ffffffffffffffffffffffffffffffffffffffff88169163d505accf9160e480830192600092919082900301818387803b158015610ed557600080fd5b60008413806124a95750600083135b6124b257600080fd5b60006124c08284018461564a565b905060008060006124d484600001516133f4565b9250925092506125067f0000000000000000000000000000000000000000000000000000000000000000848484613cbe565b5060008060008a13612547578473ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161089612578565b8373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16108a5b915091508115612597576125928587602001513384612d8d565b610ee9565b85516125a290613425565b156125c75785516125b29061343c565b86526125c1813360008961278f565b50610ee9565b80600081905550610ee98487602001513384612d8d565b600073ffffffffffffffffffffffffffffffffffffffff8416600114156126075733935061262a565b73ffffffffffffffffffffffffffffffffffffffff84166002141561262a573093505b600080600061263c85600001516133f4565b9194509250905073ffffffffffffffffffffffffffffffffffffffff8083169084161060008061266d868686613cd4565b73ffffffffffffffffffffffffffffffffffffffff1663128acb088b856126938f613d12565b73ffffffffffffffffffffffffffffffffffffffff8e16156126b5578d6126db565b876126d45773fffd8963efd1fc6a506488495d951d5263988d256126db565b6401000276a45b8d6040516020016126ec9190615da6565b6040516020818303038152906040526040518663ffffffff1660e01b815260040161271b959493929190615a84565b6040805180830381600087803b15801561273457600080fd5b505af1158015612748573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061276c9190615395565b915091508261277b578161277d565b805b6000039b9a5050505050505050505050565b600073ffffffffffffffffffffffffffffffffffffffff8416600114156127b8573393506127db565b73ffffffffffffffffffffffffffffffffffffffff8416600214156127db573093505b60008060006127ed85600001516133f4565b9194509250905073ffffffffffffffffffffffffffffffffffffffff8084169083161060008061281e858786613cd4565b73ffffffffffffffffffffffffffffffffffffffff1663128acb088b856128448f613d12565b60000373ffffffffffffffffffffffffffffffffffffffff8e1615612869578d61288f565b876128885773fffd8963efd1fc6a506488495d951d5263988d2561288f565b6401000276a45b8d6040516020016128a09190615da6565b6040516020818303038152906040526040518663ffffffff1660e01b81526004016128cf959493929190615a84565b6040805180830381600087803b1580156128e857600080fd5b505af11580156128fc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129209190615395565b9150915060008361293557818360000361293b565b82826000035b909850905073ffffffffffffffffffffffffffffffffffffffff8a16612967578b811461296757600080fd5b50505050505050949350505050565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815260009073ffffffffffffffffffffffffffffffffffffffff8316906370a08231906129cb903090600401615a3c565b60206040518083038186803b1580156129e357600080fd5b505afa1580156129f7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b2091906157d3565b6040805160008082526020820190925273ffffffffffffffffffffffffffffffffffffffff84169083906040518082805190602001908083835b60208310612a9257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101612a55565b6001836020036101000a03801982511681845116808217855250505050505090500191505060006040518083038185875af1925050503d8060008114612af4576040519150601f19603f3d011682016040523d82523d6000602084013e612af9565b606091505b505090508061146a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600360248201527f5354450000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6060600282511015612b7a57600080fd5b815167ffffffffffffffff81118015612b9257600080fd5b50604051908082528060200260200182016040528015612bbc578160200160208202803683370190505b5090508281600183510381518110612bd057fe5b602090810291909101015281517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff015b8015610c4057600080612c3d87866001860381518110612c1c57fe5b6020026020010151878681518110612c3057fe5b6020026020010151613d44565b91509150612c5f848481518110612c5057fe5b60200260200101518383613e2c565b846001850381518110612c6e57fe5b602090810291909101015250507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01612c00565b6000806000612cb18585613f02565b604080517fffffffffffffffffffffffffffffffffffffffff000000000000000000000000606094851b811660208084019190915293851b81166034830152825160288184030181526048830184528051908501207fff0000000000000000000000000000000000000000000000000000000000000060688401529a90941b9093166069840152607d8301989098527f96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f609d808401919091528851808403909101815260bd909201909752805196019590952095945050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16148015612de85750804710155b15612f31577f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663d0e30db0826040518263ffffffff1660e01b81526004016000604051808303818588803b158015612e5557600080fd5b505af1158015612e69573d6000803e3d6000fd5b50505050507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb83836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b158015612eff57600080fd5b505af1158015612f13573d6000803e3d6000fd5b505050506040513d6020811015612f2957600080fd5b50610c559050565b73ffffffffffffffffffffffffffffffffffffffff8316301415612f5f57612f5a848383613471565b610c55565b610c5584848484613ae1565b60005b600183510381101561146a57600080848381518110612f8957fe5b6020026020010151858460010181518110612fa057fe5b6020026020010151915091506000612fb88383613f02565b5090506000612fe87f00000000000000000000000000000000000000000000000000000000000000008585612ca2565b90506000806000808473ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b815260040160606040518083038186803b15801561303657600080fd5b505afa15801561304a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061306e91906156da565b506dffffffffffffffffffffffffffff1691506dffffffffffffffffffffffffffff1691506000808773ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff16146130d05782846130d3565b83835b91509150613114828b73ffffffffffffffffffffffffffffffffffffffff166370a082318a6040518263ffffffff1660e01b815260040161120c9190615a3c565b9550613121868383613fa7565b9450505050506000808573ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff161461316557826000613169565b6000835b91509150600060028c51038a10613180578a6131c1565b6131c17f0000000000000000000000000000000000000000000000000000000000000000898e8d600201815181106131b457fe5b6020026020010151612ca2565b604080516000815260208101918290527f022c0d9f0000000000000000000000000000000000000000000000000000000090915290915073ffffffffffffffffffffffffffffffffffffffff87169063022c0d9f906132299086908690869060248101615e06565b600060405180830381600087803b15801561324357600080fd5b505af1158015613257573d6000803e3d6000fd5b50506001909b019a50612f6e9950505050505050505050565b8082038281111561202157600080fd5b60008060008473ffffffffffffffffffffffffffffffffffffffff1663095ea7b360e01b7f0000000000000000000000000000000000000000000000000000000000000000866040516024016132d7929190615ad6565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931790925290516133609190615a20565b6000604051808303816000865af19150503d806000811461339d576040519150601f19603f3d011682016040523d82523d6000602084013e6133a2565b606091505b5091509150818015610e2c575080511580610e2c575080806020019051810190610e2c919061528d565b4290565b60008215806133eb575050818102818382816133e857fe5b04145b61202157600080fd5b60008080613402848261407d565b925061340f84601461417d565b905061341c84601761407d565b91509193909250565b516042111590565b6060610b20826000602b61426d565b8051606090610b209083906017907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe90161426d565b6040805173ffffffffffffffffffffffffffffffffffffffff8481166024830152604480830185905283518084039091018152606490920183526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fa9059cbb000000000000000000000000000000000000000000000000000000001781529251825160009485949389169392918291908083835b6020831061354657805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101613509565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d80600081146135a8576040519150601f19603f3d011682016040523d82523d6000602084013e6135ad565b606091505b50915091508180156135db5750805115806135db57508080602001905160208110156135d857600080fd5b50515b6118a057604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f5354000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600080835185511461365757600080fd5b6000855167ffffffffffffffff8111801561367157600080fd5b506040519080825280602002602001820160405280156136ab57816020015b613698614e34565b8152602001906001900390816136905790505b5090506000865167ffffffffffffffff811180156136c857600080fd5b5060405190808252806020026020018201604052801561370257816020015b6136ef614e34565b8152602001906001900390816136e75790505b50905060005b8751811015613832576000806137318a848151811061372357fe5b602002602001015189613859565b9150915061373e82614454565b85848151811061374a57fe5b60200260200101516000019060020b908160020b8152505061376b81614454565b84848151811061377757fe5b60200260200101516000019060020b908160020b8152505088838151811061379b57fe5b60200260200101518584815181106137af57fe5b6020026020010151602001906fffffffffffffffffffffffffffffffff1690816fffffffffffffffffffffffffffffffff16815250508883815181106137f157fe5b602002602001015184848151811061380557fe5b6020908102919091018101516fffffffffffffffffffffffffffffffff9092169101525050600101613708565b5061383c82614465565b60020b935061384a81614465565b60020b92505050935093915050565b6000806000806138688661454d565b90506000805b82811015613a865760008060006138848b6133f4565b9250925092506000613897848484613cd4565b905060008063ffffffff8d166138c0576138b083614578565b600291820b9350900b9050613962565b6138ca838e614810565b8160020b915050809250508273ffffffffffffffffffffffffffffffffffffffff16633850c7bd6040518163ffffffff1660e01b815260040160e06040518083038186803b15801561391b57600080fd5b505afa15801561392f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906139539190615715565b50505060029290920b93505050505b600189038714156139a3578473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff161099506139b2565b6139ac8e61343c565b9d508597505b6000871580613a5357508673ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff1610613a23578673ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff1610613a53565b8573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff16105b90508015613a68579b82019b9a81019a613a73565b828d039c50818c039b505b50506001909501945061386e9350505050565b5082613ad7577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff850294507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff840293505b5050509250929050565b6040805173ffffffffffffffffffffffffffffffffffffffff85811660248301528481166044830152606480830185905283518084039091018152608490920183526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f23b872dd00000000000000000000000000000000000000000000000000000000178152925182516000948594938a169392918291908083835b60208310613bbe57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101613b81565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114613c20576040519150601f19603f3d011682016040523d82523d6000602084013e613c25565b606091505b5091509150818015613c53575080511580613c535750808060200190516020811015613c5057600080fd5b50515b610bb657604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600360248201527f5354460000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6000610e2c85613ccf868686614c41565b614cbe565b6000613d0a7f0000000000000000000000000000000000000000000000000000000000000000613d05868686614c41565b614cee565b949350505050565b60007f80000000000000000000000000000000000000000000000000000000000000008210613d4057600080fd5b5090565b6000806000613d538585613f02565b509050600080613d64888888612ca2565b73ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b815260040160606040518083038186803b158015613da957600080fd5b505afa158015613dbd573d6000803e3d6000fd5b505050506040513d6060811015613dd357600080fd5b5080516020909101516dffffffffffffffffffffffffffff918216935016905073ffffffffffffffffffffffffffffffffffffffff87811690841614613e1a578082613e1d565b81815b90999098509650505050505050565b6000808411613e9c57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601a60248201527f494e53554646494349454e545f4f55545055545f414d4f554e54000000000000604482015290519081900360640190fd5b600083118015613eac5750600082115b613eb557600080fd5b6000613ecd6103e8613ec786886133d0565b906133d0565b90506000613ee16103e5613ec78689613270565b9050613ef86001828481613ef157fe5b0490614e24565b9695505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415613f3e57600080fd5b8273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1610613f78578284613f7b565b83835b909250905073ffffffffffffffffffffffffffffffffffffffff8216613fa057600080fd5b9250929050565b600080841161401757604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f494e53554646494349454e545f494e5055545f414d4f554e5400000000000000604482015290519081900360640190fd5b6000831180156140275750600082115b61403057600080fd5b600061403e856103e56133d0565b9050600061404c82856133d0565b9050600061406683614060886103e86133d0565b90614e24565b905080828161407157fe5b04979650505050505050565b6000818260140110156140f157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601260248201527f746f416464726573735f6f766572666c6f770000000000000000000000000000604482015290519081900360640190fd5b816014018351101561416457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601560248201527f746f416464726573735f6f75744f66426f756e64730000000000000000000000604482015290519081900360640190fd5b5001602001516c01000000000000000000000000900490565b6000818260030110156141f157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f746f55696e7432345f6f766572666c6f77000000000000000000000000000000604482015290519081900360640190fd5b816003018351101561426457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601460248201527f746f55696e7432345f6f75744f66426f756e6473000000000000000000000000604482015290519081900360640190fd5b50016003015190565b60608182601f0110156142e157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f736c6963655f6f766572666c6f77000000000000000000000000000000000000604482015290519081900360640190fd5b82828401101561435257604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600e60248201527f736c6963655f6f766572666c6f77000000000000000000000000000000000000604482015290519081900360640190fd5b818301845110156143c457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f736c6963655f6f75744f66426f756e6473000000000000000000000000000000604482015290519081900360640190fd5b6060821580156143e3576040519150600082526020820160405261444b565b6040519150601f8416801560200281840101858101878315602002848b0101015b8183101561441c578051835260209283019201614404565b5050858452601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016604052505b50949350505050565b80600281900b8114610b2357600080fd5b6000806000805b84518110156144fa5784818151811061448157fe5b6020026020010151602001516fffffffffffffffffffffffffffffffff168582815181106144ab57fe5b60200260200101516000015160020b02830192508481815181106144cb57fe5b6020026020010151602001516fffffffffffffffffffffffffffffffff1682019150808060010191505061446c565b5080828161450457fe5b05925060008212801561451f575080828161451b57fe5b0715155b15611d8e5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01919050565b5160177fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec9091010490565b6000806000808473ffffffffffffffffffffffffffffffffffffffff16633850c7bd6040518163ffffffff1660e01b815260040160e06040518083038186803b1580156145c457600080fd5b505afa1580156145d8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906145fc9190615715565b50939750919550935050600161ffff84161191506146489050576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615bd8565b6000808673ffffffffffffffffffffffffffffffffffffffff1663252c09d7856040518263ffffffff1660e01b81526004016146849190615dee565b60806040518083038186803b15801561469c57600080fd5b505afa1580156146b0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906146d491906158e0565b5050915091506146e26133cc565b63ffffffff168263ffffffff16146146fc57849550614807565b60008361ffff1660018561ffff168761ffff1601038161471857fe5b06905060008060008a73ffffffffffffffffffffffffffffffffffffffff1663252c09d7856040518263ffffffff1660e01b81526004016147599190615dfd565b60806040518083038186803b15801561477157600080fd5b505afa158015614785573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906147a991906158e0565b93505092509250806147e7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082d90615ba1565b82860363ffffffff811683870360060b816147fe57fe5b059a5050505050505b50505050915091565b60008063ffffffff831661488557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f4250000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b60408051600280825260608201835260009260208301908036833701905050905083816000815181106148b457fe5b602002602001019063ffffffff16908163ffffffff16815250506000816001815181106148dd57fe5b63ffffffff9092166020928302919091018201526040517f883bdbfd00000000000000000000000000000000000000000000000000000000815260048101828152835160248301528351600093849373ffffffffffffffffffffffffffffffffffffffff8b169363883bdbfd9388939192839260449091019185820191028083838b5b83811015614978578181015183820152602001614960565b505050509050019250505060006040518083038186803b15801561499b57600080fd5b505afa1580156149af573d6000803e3d6000fd5b505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820160409081528110156149f657600080fd5b8101908080516040519392919084640100000000821115614a1657600080fd5b908301906020820185811115614a2b57600080fd5b8251866020820283011164010000000082111715614a4857600080fd5b82525081516020918201928201910280838360005b83811015614a75578181015183820152602001614a5d565b5050505090500160405260200180516040519392919084640100000000821115614a9e57600080fd5b908301906020820185811115614ab357600080fd5b8251866020820283011164010000000082111715614ad057600080fd5b82525081516020918201928201910280838360005b83811015614afd578181015183820152602001614ae5565b5050505090500160405250505091509150600082600081518110614b1d57fe5b602002602001015183600181518110614b3257fe5b6020026020010151039050600082600081518110614b4c57fe5b602002602001015183600181518110614b6157fe5b60200260200101510390508763ffffffff168260060b81614b7e57fe5b05965060008260060b128015614ba857508763ffffffff168260060b81614ba157fe5b0760060b15155b15614bd3577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff909601955b63ffffffff881673ffffffffffffffffffffffffffffffffffffffff0277ffffffffffffffffffffffffffffffffffffffff00000000602083901b1677ffffffffffffffffffffffffffffffffffffffffffffffff821681614c3157fe5b0496505050505050509250929050565b614c49614e4b565b8273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161115614c81579192915b506040805160608101825273ffffffffffffffffffffffffffffffffffffffff948516815292909316602083015262ffffff169181019190915290565b6000614cca8383614cee565b90503373ffffffffffffffffffffffffffffffffffffffff82161461202157600080fd5b6000816020015173ffffffffffffffffffffffffffffffffffffffff16826000015173ffffffffffffffffffffffffffffffffffffffff1610614d3057600080fd5b508051602080830151604093840151845173ffffffffffffffffffffffffffffffffffffffff94851681850152939091168385015262ffffff166060808401919091528351808403820181526080840185528051908301207fff0000000000000000000000000000000000000000000000000000000000000060a085015294901b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660a183015260b58201939093527fe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b5460d5808301919091528251808303909101815260f5909101909152805191012090565b8082018281101561202157600080fd5b604080518082019091526000808252602082015290565b604080516060810182526000808252602082018190529181019190915290565b8035610b2381615f52565b60008083601f840112614e87578182fd5b50813567ffffffffffffffff811115614e9e578182fd5b6020830191508360208083028501011115613fa057600080fd5b600082601f830112614ec8578081fd5b81356020614edd614ed883615ec8565b615ea4565b8281528181019085830183850287018401881015614ef9578586fd5b855b85811015614f345781356fffffffffffffffffffffffffffffffff81168114614f22578788fd5b84529284019290840190600101614efb565b5090979650505050505050565b80518015158114610b2357600080fd5b600082601f830112614f61578081fd5b8135614f6f614ed882615ee6565b818152846020838601011115614f83578283fd5b816020850160208301379081016020019190915292915050565b80516dffffffffffffffffffffffffffff81168114610b2357600080fd5b805161ffff81168114610b2357600080fd5b803562ffffff81168114610b2357600080fd5b8035610b2381615f83565b600060208284031215614ffc578081fd5b813561500781615f52565b9392505050565b60008060408385031215615020578081fd5b823561502b81615f52565b946020939093013593505050565b60008060006060848603121561504d578081fd5b833561505881615f52565b925060208401359150604084013561506f81615f52565b809150509250925092565b600080600080600060a08688031215615091578283fd5b853561509c81615f52565b94506020860135935060408601356150b381615f52565b92506060860135915060808601356150ca81615f52565b809150509295509295909350565b600080600080608085870312156150ed578182fd5b84356150f881615f52565b93506020850135925060408501359150606085013561511681615f52565b939692955090935050565b60008060008060008060c08789031215615139578384fd5b863561514481615f52565b95506020870135945060408701359350606087013561516281615f95565b9598949750929560808101359460a0909101359350915050565b6000806020838503121561518e578182fd5b823567ffffffffffffffff8111156151a4578283fd5b6151b085828601614e76565b90969095509350505050565b600080600080608085870312156151d1578182fd5b843567ffffffffffffffff808211156151e8578384fd5b818701915087601f8301126151fb578384fd5b8135602061520b614ed883615ec8565b82815281810190858301885b858110156152405761522e8e8684358b0101614f51565b84529284019290840190600101615217565b50909950505088013592505080821115615258578384fd5b5061526587828801614eb8565b93505061527460408601614fcd565b915061528260608601614fe0565b905092959194509250565b60006020828403121561529e578081fd5b61500782614f41565b6000806000604084860312156152bb578081fd5b83359250602084013567ffffffffffffffff8111156152d8578182fd5b6152e486828701614e76565b9497909650939450505050565b600060208284031215615302578081fd5b813567ffffffffffffffff811115615318578182fd5b613d0a84828501614f51565b600080600060608486031215615338578081fd5b833567ffffffffffffffff81111561534e578182fd5b61535a86828701614f51565b93505061536960208501614fcd565b9150604084013561506f81615f83565b60006020828403121561538a578081fd5b813561500781615f74565b600080604083850312156153a7578182fd5b505080516020909101519092909150565b600080600080606085870312156153cd578182fd5b8435935060208501359250604085013567ffffffffffffffff808211156153f2578384fd5b818701915087601f830112615405578384fd5b813581811115615413578485fd5b886020828501011115615424578485fd5b95989497505060200194505050565b600060208284031215615444578081fd5b815167ffffffffffffffff81111561545a578182fd5b8201601f8101841361546a578182fd5b8051615478614ed882615ee6565b81815285602083850101111561548c578384fd5b610e2c826020830160208601615f26565b6000602082840312156154ae578081fd5b813567ffffffffffffffff808211156154c5578283fd5b90830190608082860312156154d8578283fd5b6040516080810181811083821117156154ed57fe5b6040528235828111156154fe578485fd5b61550a87828601614f51565b8252506020830135915061551d82615f52565b816020820152604083013560408201526060830135606082015280935050505092915050565b600060e08284031215615554578081fd5b60405160e0810181811067ffffffffffffffff8211171561557157fe5b60405261557d83614e6b565b815261558b60208401614e6b565b602082015261559c60408401614fcd565b60408201526155ad60608401614e6b565b60608201526080830135608082015260a083013560a08201526155d260c08401614e6b565b60c08201529392505050565b6000602082840312156155ef578081fd5b813567ffffffffffffffff811115615605578182fd5b820160808185031215615007578182fd5b600060e08284031215610836578081fd5b600060a08284031215610836578081fd5b60006101008284031215610836578081fd5b60006020828403121561565b578081fd5b813567ffffffffffffffff80821115615672578283fd5b9083019060408286031215615685578283fd5b60405160408101818110838211171561569a57fe5b6040528235828111156156ab578485fd5b6156b787828601614f51565b825250602083013592506156ca83615f52565b6020810192909252509392505050565b6000806000606084860312156156ee578081fd5b6156f784614f9d565b925061570560208501614f9d565b9150604084015161506f81615f83565b600080600080600080600060e0888a03121561572f578485fd5b875161573a81615f52565b602089015190975061574b81615f74565b955061575960408901614fbb565b945061576760608901614fbb565b935061577560808901614fbb565b925060a088015161578581615f95565b915061579360c08901614f41565b905092959891949750929550565b6000602082840312156157b2578081fd5b61500782614fcd565b6000602082840312156157cc578081fd5b5035919050565b6000602082840312156157e4578081fd5b5051919050565b600080604083850312156157fd578182fd5b82359150602083013561580f81615f52565b809150509250929050565b6000806000806080858703121561582f578182fd5b84359350602085013561584181615f52565b925060408501359150606085013561511681615f52565b60008060006060848603121561586c578081fd5b8335925060208401359150604084013561506f81615f52565b60008060008060006080868803121561589c578283fd5b8535945060208601359350604086013567ffffffffffffffff8111156158c0578384fd5b6158cc88828901614e76565b90945092505060608601356150ca81615f52565b600080600080608085870312156158f5578182fd5b845161590081615f83565b8094505060208501518060060b8114615917578283fd5b604086015190935061592881615f52565b915061528260608601614f41565b73ffffffffffffffffffffffffffffffffffffffff169052565b60008151808452615968816020860160208601615f26565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b60020b9052565b62ffffff169052565b606093841b7fffffffffffffffffffffffffffffffffffffffff000000000000000000000000908116825260e89390931b7fffffff0000000000000000000000000000000000000000000000000000000000166014820152921b166017820152602b0190565b6000828483379101908152919050565b60008251615a32818460208701615f26565b9190910192915050565b73ffffffffffffffffffffffffffffffffffffffff91909116815260200190565b73ffffffffffffffffffffffffffffffffffffffff92831681529116602082015260400190565b600073ffffffffffffffffffffffffffffffffffffffff8088168352861515602084015285604084015280851660608401525060a06080830152615acb60a0830184615950565b979650505050505050565b73ffffffffffffffffffffffffffffffffffffffff929092168252602082015260400190565b6000602080830181845280855180835260408601915060408482028701019250838701855b82811015615b6d577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0888603018452615b5b858351615950565b94509285019290850190600101615b21565b5092979650505050505050565b6000602082526150076020830184615950565b6020810160058310615b9b57fe5b91905290565b60208082526003908201527f4f4e490000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526003908201527f4e454f0000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526012908201527f546f6f206d756368207265717565737465640000000000000000000000000000604082015260600190565b60208082526002908201527f5444000000000000000000000000000000000000000000000000000000000000604082015260600190565b60208082526013908201527f546f6f206c6974746c6520726563656976656400000000000000000000000000604082015260600190565b600060c082019050825182526020830151602083015260408301516040830152606083015160608301526080830151608083015260a083015160a083015292915050565b600061016082019050615d0c828451615936565b6020830151615d1e6020840182615936565b506040830151615d3160408401826159a1565b506060830151615d44606084018261599a565b506080830151615d57608084018261599a565b5060a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151615d9582850182615936565b505061014092830151919092015290565b600060208252825160406020840152615dc26060840182615950565b905073ffffffffffffffffffffffffffffffffffffffff60208501511660408401528091505092915050565b61ffff91909116815260200190565b90815260200190565b600085825284602083015273ffffffffffffffffffffffffffffffffffffffff8416604083015260806060830152613ef86080830184615950565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112615e75578283fd5b83018035915067ffffffffffffffff821115615e8f578283fd5b602001915036819003821315613fa057600080fd5b60405181810167ffffffffffffffff81118282101715615ec057fe5b604052919050565b600067ffffffffffffffff821115615edc57fe5b5060209081020190565b600067ffffffffffffffff821115615efa57fe5b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01660200190565b60005b83811015615f41578181015183820152602001615f29565b83811115610c555750506000910152565b73ffffffffffffffffffffffffffffffffffffffff8116811461147957600080fd5b8060020b811461147957600080fd5b63ffffffff8116811461147957600080fd5b60ff8116811461147957600080fdfea164736f6c6343000706000a";class ri extends Ia{constructor(f){super(Ln,Wc,f)}deploy(f,n,a,i,c){return super.deploy(f,n,a,i,c||{})}getDeployTransaction(f,n,a,i,c){return super.getDeployTransaction(f,n,a,i,c||{})}attach(f){return super.attach(f)}connect(f){return super.connect(f)}static createInterface(){return new G0(Ln)}static connect(f,n){return new q0(f,Ln,n)}}ri.bytecode=Wc;ri.abi=Ln;class Ty{constructor(f,n){this.multicall2Provider=f,this.chainId=n}async getApprovalType(f,n){var a,i;const c=[[f.currency.wrapped.address,f.quotient.toString()],[n.currency.wrapped.address,n.quotient.toString()]],l=await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({address:Pa(this.chainId),contractInterface:ri.createInterface(),functionName:"getApprovalType",functionParams:c});if(!(!((a=l.results[0])===null||a===void 0)&&a.success)||!(!((i=l.results[1])===null||i===void 0)&&i.success))throw M.info({results:l.results},"Failed to get approval type from swap router for token in or token out"),new Error("Failed to get approval type from swap router for token in or token out");const{result:d}=l.results[0],{result:u}=l.results[1];return{approvalTokenIn:d[0],approvalTokenOut:u[0]}}}var si={};si.promiseFinally=(r,f)=>{const n=i=>(f(),i),a=i=>(f(),Promise.reject(i));return Promise.resolve(r).then(n,a)};si.toError=r=>(r=typeof r=="function"?r():r,typeof r=="string"?new Error(r):r);const{promiseFinally:Ay,toError:Ey}=si;var Iy=class va{static set(f,n){return new va().set(f,n)}static wrap(f,n,a){return new va().wrap(f,n,a)}constructor(){this._id=null,this._delay=null}get id(){return this._id}get delay(){return this._delay}set(f,n=""){return new Promise((a,i)=>{this.clear();const c=n?()=>i(Ey(n)):a;this._id=setTimeout(c,f),this._delay=f})}wrap(f,n,a=""){const i=Ay(f,()=>this.clear()),c=this.set(n,a);return Promise.race([i,c])}clear(){this._id&&clearTimeout(this._id)}};class cu{constructor(f,n,a=6e3,i=2){this.chainId=f,this.uri=n,this.timeout=a,this.retries=i}async getPools(){M.info({uri:this.uri},`About to get subgraph pools from URI ${this.uri}`);let f=[];return await of(async()=>{const n=new Iy,a=n.set(this.timeout).then(()=>{throw new Error(`Timed out getting pools from subgraph: ${this.timeout}`)});let i;try{i=await Promise.race([xa.get(this.uri),a])}catch(u){throw u}finally{n.clear()}const{data:c,status:l}=i;if(l!=200)throw M.error({response:i},`Unabled to get pools from ${this.uri}.`),new Error(`Unable to get pools from ${this.uri}`);const d=c;M.info({uri:this.uri,chain:this.chainId},`Got subgraph pools from uri. Num: ${d.length}`),f=d},{retries:this.retries,onRetry:(n,a)=>{M.info({err:n},`Failed to get pools from uri ${this.uri}. Retry attempt: ${a}`)}}),f}}class Sy{constructor({route:f,percent:n}){this.route=f,this.percent=n}get protocol(){return this.route.protocol}get tokenIn(){return this.route.input}get tokenOut(){return this.route.output}}class ai{constructor({routes:f,chainId:n,tokenIn:a,tokenOut:i,protocolsCovered:c,blockNumber:l,tradeType:d,originalAmount:u,blocksToLive:m=0}){this.routes=f,this.chainId=n,this.tokenIn=a,this.tokenOut=i,this.protocolsCovered=c,this.blockNumber=l,this.tradeType=d,this.originalAmount=u,this.blocksToLive=m}static fromRoutesWithValidQuotes(f,n,a,i,c,l,d,u){if(f.length==0)return;const m=_.map(f,y=>new Sy({route:y.route,percent:y.percent}));return new ai({routes:m,chainId:n,tokenIn:a,tokenOut:i,protocolsCovered:c,blockNumber:l,tradeType:d,originalAmount:u})}notExpired(f){return f-this.blockNumber<=this.blocksToLive}}var Rt;(function(r){r.Livemode="livemode",r.Darkmode="darkmode",r.Tapcompare="tapcompare"})(Rt||(Rt={}));class wy{constructor(f,n,a){this.chainId=f,this.poolProvider=n,this.cache=a,this.POOL_KEY=(i,c)=>`pool-${i}-${c}`}async getPools(f,n){const a=new Set,i=[],c=[],l={},d=await(n==null?void 0:n.blockNumber);for(const[u,m]of f){const{poolAddress:y,token0:g,token1:T}=this.getPoolAddress(u,m);if(a.has(y))continue;a.add(y);const A=await this.cache.get(this.POOL_KEY(this.chainId,y));if(A&&(!d||d&&A.block==d)){l[y]=A.pair;continue}i.push([g,T]),c.push(y)}if(M.info({poolsFound:_.map(Object.values(l),u=>u.token0.symbol+" "+u.token1.symbol),poolsToGetTokenPairs:_.map(i,u=>u[0].symbol+" "+u[1].symbol)},`Found ${Object.keys(l).length} V2 pools already in local cache for block ${d}. About to get reserves for ${i.length} pools.`),c.length>0){const u=await this.poolProvider.getPools(i,n);for(const m of c){const y=u.getPoolByAddress(m);y&&(l[m]=y,await this.cache.set(this.POOL_KEY(this.chainId,m),{pair:y,block:d}))}}return{getPool:(u,m)=>{const{poolAddress:y}=this.getPoolAddress(u,m);return l[y]},getPoolByAddress:u=>l[u],getAllPools:()=>Object.values(l)}}getPoolAddress(f,n){return this.poolProvider.getPoolAddress(f,n)}}class Cy{constructor(f,n,a){this.chainId=f,this.subgraphProvider=n,this.cache=a,this.SUBGRAPH_KEY=i=>`subgraph-pools-v2-${i}`}async getPools(){const f=await this.cache.get(this.SUBGRAPH_KEY(this.chainId));if(f)return f;const n=await this.subgraphProvider.getPools();return await this.cache.set(this.SUBGRAPH_KEY(this.chainId),n),n}}class Ry{constructor(){}async getQuotesManyExactIn(f,n){return this.getQuotes(f,n,$e.EXACT_INPUT)}async getQuotesManyExactOut(f,n){return this.getQuotes(f,n,$e.EXACT_OUTPUT)}async getQuotes(f,n,a){const i=[],c=[];for(const l of n){const d=[];let u=0,m=0;for(const y of f)try{if(a==$e.EXACT_INPUT){let g=y.wrapped;for(const T of l.pairs){const[A]=T.getOutputAmount(g);g=A}d.push({amount:y,quote:ye.from(g.quotient.toString())})}else{let g=y.wrapped;for(let T=l.pairs.length-1;T>=0;T--)[g]=l.pairs[T].getInputAmount(g);d.push({amount:y,quote:ye.from(g.quotient.toString())})}}catch(g){if(g instanceof Wh)u=u+1,d.push({amount:y,quote:null});else if(g instanceof Vh)m=m+1,d.push({amount:y,quote:null});else throw g}(u>0||m>0)&&c.push(`${[z0(l)]} Input: ${u} Reserves: ${m} }`),i.push([l,d])}return c.length>0&&M.info({debugStrs:c},"Failed quotes for V2 routes"),{routesWithQuotes:i}}}const Oy={[p.MAINNET]:[he[p.MAINNET],Uf,kf,Ff,jn],[p.ROPSTEN]:[he[p.ROPSTEN]],[p.RINKEBY]:[he[p.RINKEBY],Nf,Lf],[p.G\u00D6RLI]:[he[p.G\u00D6RLI]],[p.KOVAN]:[he[p.KOVAN]],[p.OPTIMISM]:[],[p.ARBITRUM_ONE]:[],[p.ARBITRUM_RINKEBY]:[],[p.ARBITRUM_GOERLI]:[],[p.OPTIMISM_GOERLI]:[],[p.OPTIMISTIC_KOVAN]:[],[p.POLYGON]:[],[p.POLYGON_MUMBAI]:[],[p.CELO]:[],[p.CELO_ALFAJORES]:[],[p.GNOSIS]:[],[p.MOONBEAM]:[],[p.BSC]:[]};class Vc{constructor(f){this.chainId=f}async getPools(f,n){M.info("In static subgraph provider for V2");const a=Oy[this.chainId],i=_.flatMap(a,u=>a.map(m=>[u,m]));f&&n&&i.push([f,n],...a.map(u=>[f,u]),...a.map(u=>[n,u]));const c=_(i).filter(u=>Boolean(u[0]&&u[1])).filter(([u,m])=>u.address!==m.address&&!u.equals(m)).value(),l=new Set;return _(c).map(([u,m])=>{const y=sf.getAddress(u,m);if(l.has(y))return;l.add(y);const[g,T]=u.sortsBefore(m)?[u,m]:[m,u];return{id:y,liquidity:"100",token0:{id:g.address},token1:{id:T.address},supply:100,reserve:100,reserveUSD:100}}).compact().value()}}var _y={},xy=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,Ta=xy;function Gn(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gn=function(n){return typeof n}:Gn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gn(r)}var Dy=10,Hc=2;function Py(r){return Ir(r,[])}function Ir(r,f){switch(Gn(r)){case"string":return JSON.stringify(r);case"function":return r.name?"[function ".concat(r.name,"]"):"[function]";case"object":return r===null?"null":By(r,f);default:return String(r)}}function By(r,f){if(f.indexOf(r)!==-1)return"[Circular]";var n=[].concat(f,[r]),a=Fy(r);if(a!==void 0){var i=a.call(r);if(i!==r)return typeof i=="string"?i:Ir(i,n)}else if(Array.isArray(r))return ky(r,n);return My(r,n)}function My(r,f){var n=Object.keys(r);if(n.length===0)return"{}";if(f.length>Hc)return"["+Uy(r)+"]";var a=n.map(function(i){var c=Ir(r[i],f);return i+": "+c});return"{ "+a.join(", ")+" }"}function ky(r,f){if(r.length===0)return"[]";if(f.length>Hc)return"[Array]";for(var n=Math.min(Dy,r.length),a=r.length-n,i=[],c=0;c<n;++c)i.push(Ir(r[c],f));return a===1?i.push("... 1 more item"):a>1&&i.push("... ".concat(a," more items")),"["+i.join(", ")+"]"}function Fy(r){var f=r[String(Ta)];if(typeof f=="function")return f;if(typeof r.inspect=="function")return r.inspect}function Uy(r){var f=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(f==="Object"&&typeof r.constructor=="function"){var n=r.constructor.name;if(typeof n=="string"&&n!=="")return n}return f}function Ny(r,f){var n=Boolean(r);if(!n)throw new Error(f!=null?f:"Unexpected invariant triggered.")}function Kc(r){var f=r.prototype.toJSON;typeof f=="function"||Ny(0),r.prototype.inspect=f,Ta&&(r.prototype[Ta]=f)}var Ly=function(){function r(n,a,i){this.start=n.start,this.end=a.end,this.startToken=n,this.endToken=a,this.source=i}var f=r.prototype;return f.toJSON=function(){return{start:this.start,end:this.end}},r}();Kc(Ly);var Gy=function(){function r(n,a,i,c,l,d,u){this.kind=n,this.start=a,this.end=i,this.line=c,this.column=l,this.value=u,this.prev=d,this.next=null}var f=r.prototype;return f.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},r}();Kc(Gy);function du(r){return r!=null&&typeof r.kind=="string"}var qy={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},$y=Object.freeze({});function Wy(r,f){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qy,a=void 0,i=Array.isArray(r),c=[r],l=-1,d=[],u=void 0,m=void 0,y=void 0,g=[],T=[],A=r;do{l++;var S=l===c.length,w=S&&d.length!==0;if(S){if(m=T.length===0?void 0:g[g.length-1],u=y,y=T.pop(),w){if(i)u=u.slice();else{for(var O={},k=0,Q=Object.keys(u);k<Q.length;k++){var $=Q[k];O[$]=u[$]}u=O}for(var j=0,F=0;F<d.length;F++){var J=d[F][0],K=d[F][1];i&&(J-=j),i&&K===null?(u.splice(J,1),j++):u[J]=K}}l=a.index,c=a.keys,d=a.edits,i=a.inArray,a=a.prev}else{if(m=y?i?l:c[l]:void 0,u=y?y[m]:A,u==null)continue;y&&g.push(m)}var te=void 0;if(!Array.isArray(u)){if(!du(u))throw new Error("Invalid AST Node: ".concat(Py(u),"."));var ce=Vy(f,u.kind,S);if(ce){if(te=ce.call(f,u,m,y,g,T),te===$y)break;if(te===!1){if(!S){g.pop();continue}}else if(te!==void 0&&(d.push([m,te]),!S))if(du(te))u=te;else{g.pop();continue}}}if(te===void 0&&w&&d.push([m,u]),S)g.pop();else{var le;a={inArray:i,index:l,keys:c,edits:d,prev:a},i=Array.isArray(u),c=i?u:(le=n[u.kind])!==null&&le!==void 0?le:[],l=-1,d=[],y&&T.push(y),y=u}}while(a!==void 0);return d.length!==0&&(A=d[d.length-1][1]),A}function Vy(r,f,n){var a=r[f];if(a){if(!n&&typeof a=="function")return a;var i=n?a.leave:a.enter;if(typeof i=="function")return i}else{var c=n?r.leave:r.enter;if(c){if(typeof c=="function")return c;var l=c[f];if(typeof l=="function")return l}}}function Hy(r){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=r.indexOf(`
`)===-1,i=r[0]===" "||r[0]==="	",c=r[r.length-1]==='"',l=r[r.length-1]==="\\",d=!a||c||l||n,u="";return d&&!(a&&i)&&(u+=`
`+f),u+=f?r.replace(/\n/g,`
`+f):r,d&&(u+=`
`),'"""'+u.replace(/"""/g,'\\"""')+'"""'}function Ky(r){return Wy(r,{leave:Yy})}var Qy=80,Yy={Name:function(f){return f.value},Variable:function(f){return"$"+f.name},Document:function(f){return ae(f.definitions,`

`)+`
`},OperationDefinition:function(f){var n=f.operation,a=f.name,i=Ze("(",ae(f.variableDefinitions,", "),")"),c=ae(f.directives," "),l=f.selectionSet;return!a&&!c&&!i&&n==="query"?l:ae([n,ae([a,i]),c,l]," ")},VariableDefinition:function(f){var n=f.variable,a=f.type,i=f.defaultValue,c=f.directives;return n+": "+a+Ze(" = ",i)+Ze(" ",ae(c," "))},SelectionSet:function(f){var n=f.selections;return Y0(n)},Field:function(f){var n=f.alias,a=f.name,i=f.arguments,c=f.directives,l=f.selectionSet,d=Ze("",n,": ")+a,u=d+Ze("(",ae(i,", "),")");return u.length>Qy&&(u=d+Ze(`(
`,qn(ae(i,`
`)),`
)`)),ae([u,ae(c," "),l]," ")},Argument:function(f){var n=f.name,a=f.value;return n+": "+a},FragmentSpread:function(f){var n=f.name,a=f.directives;return"..."+n+Ze(" ",ae(a," "))},InlineFragment:function(f){var n=f.typeCondition,a=f.directives,i=f.selectionSet;return ae(["...",Ze("on ",n),ae(a," "),i]," ")},FragmentDefinition:function(f){var n=f.name,a=f.typeCondition,i=f.variableDefinitions,c=f.directives,l=f.selectionSet;return"fragment ".concat(n).concat(Ze("(",ae(i,", "),")")," ")+"on ".concat(a," ").concat(Ze("",ae(c," ")," "))+l},IntValue:function(f){var n=f.value;return n},FloatValue:function(f){var n=f.value;return n},StringValue:function(f,n){var a=f.value,i=f.block;return i?Hy(a,n==="description"?"":"  "):JSON.stringify(a)},BooleanValue:function(f){var n=f.value;return n?"true":"false"},NullValue:function(){return"null"},EnumValue:function(f){var n=f.value;return n},ListValue:function(f){var n=f.values;return"["+ae(n,", ")+"]"},ObjectValue:function(f){var n=f.fields;return"{"+ae(n,", ")+"}"},ObjectField:function(f){var n=f.name,a=f.value;return n+": "+a},Directive:function(f){var n=f.name,a=f.arguments;return"@"+n+Ze("(",ae(a,", "),")")},NamedType:function(f){var n=f.name;return n},ListType:function(f){var n=f.type;return"["+n+"]"},NonNullType:function(f){var n=f.type;return n+"!"},SchemaDefinition:Q0(function(r){var f=r.directives,n=r.operationTypes;return ae(["schema",ae(f," "),Y0(n)]," ")}),OperationTypeDefinition:function(f){var n=f.operation,a=f.type;return n+": "+a},ScalarTypeDefinition:Q0(function(r){var f=r.name,n=r.directives;return ae(["scalar",f,ae(n," ")]," ")}),ObjectTypeDefinition:Q0(function(r){var f=r.name,n=r.interfaces,a=r.directives,i=r.fields;return ae(["type",f,Ze("implements ",ae(n," & ")),ae(a," "),Y0(i)]," ")}),FieldDefinition:Q0(function(r){var f=r.name,n=r.arguments,a=r.type,i=r.directives;return f+(lu(n)?Ze(`(
`,qn(ae(n,`
`)),`
)`):Ze("(",ae(n,", "),")"))+": "+a+Ze(" ",ae(i," "))}),InputValueDefinition:Q0(function(r){var f=r.name,n=r.type,a=r.defaultValue,i=r.directives;return ae([f+": "+n,Ze("= ",a),ae(i," ")]," ")}),InterfaceTypeDefinition:Q0(function(r){var f=r.name,n=r.interfaces,a=r.directives,i=r.fields;return ae(["interface",f,Ze("implements ",ae(n," & ")),ae(a," "),Y0(i)]," ")}),UnionTypeDefinition:Q0(function(r){var f=r.name,n=r.directives,a=r.types;return ae(["union",f,ae(n," "),a&&a.length!==0?"= "+ae(a," | "):""]," ")}),EnumTypeDefinition:Q0(function(r){var f=r.name,n=r.directives,a=r.values;return ae(["enum",f,ae(n," "),Y0(a)]," ")}),EnumValueDefinition:Q0(function(r){var f=r.name,n=r.directives;return ae([f,ae(n," ")]," ")}),InputObjectTypeDefinition:Q0(function(r){var f=r.name,n=r.directives,a=r.fields;return ae(["input",f,ae(n," "),Y0(a)]," ")}),DirectiveDefinition:Q0(function(r){var f=r.name,n=r.arguments,a=r.repeatable,i=r.locations;return"directive @"+f+(lu(n)?Ze(`(
`,qn(ae(n,`
`)),`
)`):Ze("(",ae(n,", "),")"))+(a?" repeatable":"")+" on "+ae(i," | ")}),SchemaExtension:function(f){var n=f.directives,a=f.operationTypes;return ae(["extend schema",ae(n," "),Y0(a)]," ")},ScalarTypeExtension:function(f){var n=f.name,a=f.directives;return ae(["extend scalar",n,ae(a," ")]," ")},ObjectTypeExtension:function(f){var n=f.name,a=f.interfaces,i=f.directives,c=f.fields;return ae(["extend type",n,Ze("implements ",ae(a," & ")),ae(i," "),Y0(c)]," ")},InterfaceTypeExtension:function(f){var n=f.name,a=f.interfaces,i=f.directives,c=f.fields;return ae(["extend interface",n,Ze("implements ",ae(a," & ")),ae(i," "),Y0(c)]," ")},UnionTypeExtension:function(f){var n=f.name,a=f.directives,i=f.types;return ae(["extend union",n,ae(a," "),i&&i.length!==0?"= "+ae(i," | "):""]," ")},EnumTypeExtension:function(f){var n=f.name,a=f.directives,i=f.values;return ae(["extend enum",n,ae(a," "),Y0(i)]," ")},InputObjectTypeExtension:function(f){var n=f.name,a=f.directives,i=f.fields;return ae(["extend input",n,ae(a," "),Y0(i)]," ")}};function Q0(r){return function(f){return ae([f.description,r(f)],`
`)}}function ae(r){var f,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(f=r==null?void 0:r.filter(function(a){return a}).join(n))!==null&&f!==void 0?f:""}function Y0(r){return Ze(`{
`,qn(ae(r,`
`)),`
}`)}function Ze(r,f){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return f!=null&&f!==""?r+f+n:""}function qn(r){return Ze("  ",r.replace(/\n/g,`
  `))}function Xy(r){return r.indexOf(`
`)!==-1}function lu(r){return r!=null&&r.some(Xy)}var jy=Object.freeze(Object.defineProperty({__proto__:null,print:Ky},Symbol.toStringTag,{value:"Module"})),zy=Bh(jy),ii={},Sr={},Qc=function(f){var n=f.uri,a=f.name,i=f.type;this.uri=n,this.name=a,this.type=i},Jy=Qc,Yc=function(f){return typeof File!="undefined"&&f instanceof File||typeof Blob!="undefined"&&f instanceof Blob||f instanceof Jy},Zy=Yc,e9=function r(f,n,a){n===void 0&&(n=""),a===void 0&&(a=Zy);var i,c=new Map;function l(y,g){var T=c.get(g);T?T.push.apply(T,y):c.set(g,y)}if(a(f))i=null,l([n],f);else{var d=n?n+".":"";if(typeof FileList!="undefined"&&f instanceof FileList)i=Array.prototype.map.call(f,function(y,g){return l([""+d+g],y),null});else if(Array.isArray(f))i=f.map(function(y,g){var T=r(y,""+d+g,a);return T.files.forEach(l),T.clone});else if(f&&f.constructor===Object){i={};for(var u in f){var m=r(f[u],""+d+u,a);m.files.forEach(l),i[u]=m.clone}}else i=f}return{clone:i,files:c}};Sr.ReactNativeFile=Qc;Sr.extractFiles=e9;Sr.isExtractableFile=Yc;var t9=typeof self=="object"?self.FormData:window.FormData,f9=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var Xc=Sr,n9=f9(t9),r9=function(r){return Xc.isExtractableFile(r)||r!==null&&typeof r=="object"&&typeof r.pipe=="function"};function s9(r,f,n){var a=Xc.extractFiles({query:r,variables:f,operationName:n},"",r9),i=a.clone,c=a.files;if(c.size===0){if(!Array.isArray(r))return JSON.stringify(i);if(typeof f!="undefined"&&!Array.isArray(f))throw new Error("Cannot create request body with given variable type, array expected");var l=r.reduce(function(g,T,A){return g.push({query:T,variables:f?f[A]:void 0}),g},[]);return JSON.stringify(l)}var d=typeof FormData=="undefined"?n9.default:FormData,u=new d;u.append("operations",JSON.stringify(i));var m={},y=0;return c.forEach(function(g){m[++y]=g}),u.append("map",JSON.stringify(m)),y=0,c.forEach(function(g,T){u.append(""+ ++y,T)}),u}ii.default=s9;var wr={},a9=He&&He.__extends||function(){var r=function(f,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[c]=i[c])},r(f,n)};return function(f,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(f,n);function a(){this.constructor=f}f.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(wr,"__esModule",{value:!0});wr.ClientError=void 0;var i9=function(r){a9(f,r);function f(n,a){var i=this,c=f.extractMessage(n)+": "+JSON.stringify({response:n,request:a});return i=r.call(this,c)||this,Object.setPrototypeOf(i,f.prototype),i.response=n,i.request=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(i,f),i}return f.extractMessage=function(n){try{return n.errors[0].message}catch{return"GraphQL Error (Code: "+n.status+")"}},f}(Error);wr.ClientError=i9;(function(r){var f=He&&He.__assign||function(){return f=Object.assign||function(P){for(var N,L=1,B=arguments.length;L<B;L++){N=arguments[L];for(var H in N)Object.prototype.hasOwnProperty.call(N,H)&&(P[H]=N[H])}return P},f.apply(this,arguments)},n=He&&He.__createBinding||(Object.create?function(P,N,L,B){B===void 0&&(B=L),Object.defineProperty(P,B,{enumerable:!0,get:function(){return N[L]}})}:function(P,N,L,B){B===void 0&&(B=L),P[B]=N[L]}),a=He&&He.__setModuleDefault||(Object.create?function(P,N){Object.defineProperty(P,"default",{enumerable:!0,value:N})}:function(P,N){P.default=N}),i=He&&He.__importStar||function(P){if(P&&P.__esModule)return P;var N={};if(P!=null)for(var L in P)L!=="default"&&Object.prototype.hasOwnProperty.call(P,L)&&n(N,P,L);return a(N,P),N},c=He&&He.__awaiter||function(P,N,L,B){function H(x){return x instanceof L?x:new L(function(V){V(x)})}return new(L||(L=Promise))(function(x,V){function ee(de){try{Z(B.next(de))}catch(Te){V(Te)}}function se(de){try{Z(B.throw(de))}catch(Te){V(Te)}}function Z(de){de.done?x(de.value):H(de.value).then(ee,se)}Z((B=B.apply(P,N||[])).next())})},l=He&&He.__generator||function(P,N){var L={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},B,H,x,V;return V={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function ee(Z){return function(de){return se([Z,de])}}function se(Z){if(B)throw new TypeError("Generator is already executing.");for(;L;)try{if(B=1,H&&(x=Z[0]&2?H.return:Z[0]?H.throw||((x=H.return)&&x.call(H),0):H.next)&&!(x=x.call(H,Z[1])).done)return x;switch(H=0,x&&(Z=[Z[0]&2,x.value]),Z[0]){case 0:case 1:x=Z;break;case 4:return L.label++,{value:Z[1],done:!1};case 5:L.label++,H=Z[1],Z=[0];continue;case 7:Z=L.ops.pop(),L.trys.pop();continue;default:if(x=L.trys,!(x=x.length>0&&x[x.length-1])&&(Z[0]===6||Z[0]===2)){L=0;continue}if(Z[0]===3&&(!x||Z[1]>x[0]&&Z[1]<x[3])){L.label=Z[1];break}if(Z[0]===6&&L.label<x[1]){L.label=x[1],x=Z;break}if(x&&L.label<x[2]){L.label=x[2],L.ops.push(Z);break}x[2]&&L.ops.pop(),L.trys.pop();continue}Z=N.call(P,L)}catch(de){Z=[6,de],H=0}finally{B=x=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}},d=He&&He.__rest||function(P,N){var L={};for(var B in P)Object.prototype.hasOwnProperty.call(P,B)&&N.indexOf(B)<0&&(L[B]=P[B]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,B=Object.getOwnPropertySymbols(P);H<B.length;H++)N.indexOf(B[H])<0&&Object.prototype.propertyIsEnumerable.call(P,B[H])&&(L[B[H]]=P[B[H]]);return L},u=He&&He.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.gql=r.batchRequests=r.request=r.rawRequest=r.GraphQLClient=r.ClientError=void 0;var m=i(Mh.exports),y=m,g=zy,T=u(ii),A=wr;Object.defineProperty(r,"ClientError",{enumerable:!0,get:function(){return A.ClientError}});var S=function(P){var N={};return P&&(typeof Headers!="undefined"&&P instanceof Headers||P instanceof y.Headers?N=Me(P):Array.isArray(P)?P.forEach(function(L){var B=L[0],H=L[1];N[B]=H}):N=P),N},w=function(P){return P.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},O=function(P){var N=P.query,L=P.variables,B=P.operationName;if(!Array.isArray(N)){var H=["query="+encodeURIComponent(w(N))];return L&&H.push("variables="+encodeURIComponent(JSON.stringify(L))),B&&H.push("operationName="+encodeURIComponent(B)),H.join("&")}if(typeof L!="undefined"&&!Array.isArray(L))throw new Error("Cannot create query with given variable type, array expected");var x=N.reduce(function(V,ee,se){return V.push({query:w(ee),variables:L?JSON.stringify(L[se]):void 0}),V},[]);return"query="+encodeURIComponent(JSON.stringify(x))},k=function(P){var N=P.url,L=P.query,B=P.variables,H=P.operationName,x=P.headers,V=P.fetch,ee=P.fetchOptions;return c(void 0,void 0,void 0,function(){var se;return l(this,function(Z){switch(Z.label){case 0:return se=T.default(L,B,H),[4,V(N,f({method:"POST",headers:f(f({},typeof se=="string"?{"Content-Type":"application/json"}:{}),x),body:se},ee))];case 1:return[2,Z.sent()]}})})},Q=function(P){var N=P.url,L=P.query,B=P.variables,H=P.operationName,x=P.headers,V=P.fetch,ee=P.fetchOptions;return c(void 0,void 0,void 0,function(){var se;return l(this,function(Z){switch(Z.label){case 0:return se=O({query:L,variables:B,operationName:H}),[4,V(N+"?"+se,f({method:"GET",headers:x},ee))];case 1:return[2,Z.sent()]}})})},$=function(){function P(N,L){this.url=N,this.options=L||{}}return P.prototype.rawRequest=function(N,L,B){var H=this.options,x=H.headers,V=H.fetch,ee=V===void 0?m.default:V,se=H.method,Z=se===void 0?"POST":se,de=d(H,["headers","fetch","method"]),Te=this.url;return j({url:Te,query:N,variables:L,headers:f(f({},S(x)),S(B)),operationName:void 0,fetch:ee,method:Z,fetchOptions:de})},P.prototype.request=function(N,L,B){return c(this,void 0,void 0,function(){var H,x,V,ee,se,Z,de,Te,Ce,Ae,Ye,Ne;return l(this,function(Xe){switch(Xe.label){case 0:return H=this.options,x=H.headers,V=H.fetch,ee=V===void 0?m.default:V,se=H.method,Z=se===void 0?"POST":se,de=d(H,["headers","fetch","method"]),Te=this.url,Ce=ce(N),Ae=Ce.query,Ye=Ce.operationName,[4,j({url:Te,query:Ae,variables:L,headers:f(f({},S(x)),S(B)),operationName:Ye,fetch:ee,method:Z,fetchOptions:de})];case 1:return Ne=Xe.sent().data,[2,Ne]}})})},P.prototype.batchRequests=function(N,L){return c(this,void 0,void 0,function(){var B,H,x,V,ee,se,Z,de,Te,Ce,Ae;return l(this,function(Ye){switch(Ye.label){case 0:return B=this.options,H=B.headers,x=B.fetch,V=x===void 0?m.default:x,ee=B.method,se=ee===void 0?"POST":ee,Z=d(B,["headers","fetch","method"]),de=this.url,Te=N.map(function(Ne){var Xe=Ne.document;return ce(Xe).query}),Ce=N.map(function(Ne){var Xe=Ne.variables;return Xe}),[4,j({url:de,query:Te,variables:Ce,headers:f(f({},S(H)),S(L)),operationName:void 0,fetch:V,method:se,fetchOptions:Z})];case 1:return Ae=Ye.sent().data,[2,Ae]}})})},P.prototype.setHeaders=function(N){return this.options.headers=N,this},P.prototype.setHeader=function(N,L){var B,H=this.options.headers;return H?H[N]=L:this.options.headers=(B={},B[N]=L,B),this},P.prototype.setEndpoint=function(N){return this.url=N,this},P}();r.GraphQLClient=$;function j(P){var N=P.url,L=P.query,B=P.variables,H=P.headers,x=P.operationName,V=P.fetch,ee=P.method,se=ee===void 0?"POST":ee,Z=P.fetchOptions;return c(this,void 0,void 0,function(){var de,Te,Ce,Ae,Ye,Ne,Xe,We;return l(this,function(z){switch(z.label){case 0:return de=se.toUpperCase()==="POST"?k:Q,Te=Array.isArray(L),[4,de({url:N,query:L,variables:B,operationName:x,headers:H,fetch:V,fetchOptions:Z})];case 1:return Ce=z.sent(),[4,te(Ce)];case 2:if(Ae=z.sent(),Ye=Te&&Array.isArray(Ae)?!Ae.some(function(ne){var Ie=ne.data;return!Ie}):!!Ae.data,Ce.ok&&!Ae.errors&&Ye)return Ne=Ce.headers,Xe=Ce.status,[2,f(f({},Te?{data:Ae}:Ae),{headers:Ne,status:Xe})];throw We=typeof Ae=="string"?{error:Ae}:Ae,new A.ClientError(f(f({},We),{status:Ce.status,headers:Ce.headers}),{query:L,variables:B})}})})}function F(P,N,L,B){return c(this,void 0,void 0,function(){var H;return l(this,function(x){return H=new $(P),[2,H.rawRequest(N,L,B)]})})}r.rawRequest=F;function J(P,N,L,B){return c(this,void 0,void 0,function(){var H;return l(this,function(x){return H=new $(P),[2,H.request(N,L,B)]})})}r.request=J;function K(P,N,L){return c(this,void 0,void 0,function(){var B;return l(this,function(H){return B=new $(P),[2,B.batchRequests(N,L)]})})}r.batchRequests=K,r.default=J;function te(P){var N=P.headers.get("Content-Type");return N&&N.startsWith("application/json")?P.json():P.text()}function ce(P){var N;if(typeof P=="string")return{query:P};var L=void 0,B=P.definitions.filter(function(H){return H.kind==="OperationDefinition"});return B.length===1&&(L=(N=B[0].name)===null||N===void 0?void 0:N.value),{query:g.print(P),operationName:L}}function le(P){for(var N=[],L=1;L<arguments.length;L++)N[L-1]=arguments[L];return P.reduce(function(B,H,x){return""+B+H+(x in N?N[x]:"")},"")}r.gql=le;function Me(P){var N={};return P.forEach(function(L,B){N[B]=L}),N}})(_y);p.MAINNET+"",p.RINKEBY+"";class o9{constructor(f){this.fallbacks=f}async getPools(f,n,a){for(let i=0;i<this.fallbacks.length;i++){const c=this.fallbacks[i];try{return await c.getPools(f,n,a)}catch{M.info(`Failed to get subgraph pools for V2 from fallback #${i}`)}}throw new Error("Failed to get subgraph pools from any providers")}}class u9{constructor(f,n,a){this.chainId=f,this.poolProvider=n,this.cache=a,this.POOL_KEY=(i,c)=>`pool-${i}-${c}`}async getPools(f,n){const a=new Set,i=[],c=[],l={};for(const[d,u,m]of f){const{poolAddress:y,token0:g,token1:T}=this.getPoolAddress(d,u,m);if(a.has(y))continue;a.add(y);const A=await this.cache.get(this.POOL_KEY(this.chainId,y));if(A){l[y]=A;continue}i.push([g,T,m]),c.push(y)}if(M.info({poolsFound:_.map(Object.values(l),d=>`${d.token0.symbol} ${d.token1.symbol} ${d.fee}`),poolsToGetTokenPairs:_.map(i,d=>`${d[0].symbol} ${d[1].symbol} ${d[2]}`)},`Found ${Object.keys(l).length} V3 pools already in local cache. About to get liquidity and slot0s for ${i.length} pools.`),c.length>0){const d=await this.poolProvider.getPools(i,n);for(const u of c){const m=d.getPoolByAddress(u);m&&(l[u]=m,await this.cache.set(this.POOL_KEY(this.chainId,u),m))}}return{getPool:(d,u,m)=>{const{poolAddress:y}=this.getPoolAddress(d,u,m);return l[y]},getPoolByAddress:d=>l[d],getAllPools:()=>Object.values(l)}}getPoolAddress(f,n,a){return this.poolProvider.getPoolAddress(f,n,a)}}class c9{constructor(f,n,a){this.chainId=f,this.subgraphProvider=n,this.cache=a,this.SUBGRAPH_KEY=i=>`subgraph-pools-${i}`}async getPools(){const f=await this.cache.get(this.SUBGRAPH_KEY(this.chainId));if(f)return f;const n=await this.subgraphProvider.getPools();return await this.cache.set(this.SUBGRAPH_KEY(this.chainId),n),n}}const d9={[p.MAINNET]:[he[p.MAINNET],Uf,kf,Ff,jn],[p.ROPSTEN]:[he[p.ROPSTEN],Gu,Lu,Nu],[p.RINKEBY]:[he[p.RINKEBY],Nf,Lf,Gb,qb],[p.G\u00D6RLI]:[he[p.G\u00D6RLI],$u,qu,Wu,Vu],[p.KOVAN]:[he[p.KOVAN],Hu,Ku,$b,Qu],[p.OPTIMISM]:[he[p.OPTIMISM],zn,Zn,Jn,Ma,Wb],[p.ARBITRUM_ONE]:[he[p.ARBITRUM_ONE],Ua,or,ar,ir,Vb],[p.ARBITRUM_RINKEBY]:[he[p.ARBITRUM_RINKEBY],ur,Yu,cr],[p.ARBITRUM_GOERLI]:[he[p.ARBITRUM_GOERLI],dr],[p.OPTIMISM_GOERLI]:[he[p.OPTIMISM_GOERLI],er,fr,tr,ka],[p.OPTIMISTIC_KOVAN]:[he[p.OPTIMISTIC_KOVAN],sr,Fa,rr,nr],[p.POLYGON]:[pr,Kb,lr],[p.POLYGON_MUMBAI]:[hr,he[p.POLYGON_MUMBAI],Na],[p.CELO]:[La,gr,Ga,Ju],[p.CELO_ALFAJORES]:[qa,Pf,ec,Zu],[p.GNOSIS]:[he[p.GNOSIS],fc,tc,vr],[p.BSC]:[he[p.BSC],ju,mr,br,yr,Xu,zu],[p.MOONBEAM]:[he[p.MOONBEAM],$a,Tr,Wa]};class l9{constructor(f,n){this.chainId=f,this.poolProvider=n}async getPools(f,n){M.info("In static subgraph provider for V3");const a=d9[this.chainId],i=_.flatMap(a,y=>a.map(g=>[y,g]));f&&n&&i.push([f,n],...a.map(y=>[f,y]),...a.map(y=>[n,y]));const c=_(i).filter(y=>Boolean(y[0]&&y[1])).filter(([y,g])=>y.address!==g.address&&!y.equals(g)).flatMap(([y,g])=>[[y,g,ke.LOWEST],[y,g,ke.LOW],[y,g,ke.MEDIUM],[y,g,ke.HIGH]]).value();M.info(`V3 Static subgraph provider about to get ${c.length} pools on-chain`);const d=(await this.poolProvider.getPools(c)).getAllPools(),u=new Set;return _(d).map(y=>{const{token0:g,token1:T,fee:A,liquidity:S}=y,w=mt.getAddress(y.token0,y.token1,y.fee);if(u.has(w))return;u.add(w);const O=e0.toNumber(S);return{id:w,feeTier:Fu(A),liquidity:S.toString(),token0:{id:g.address},token1:{id:T.address},tvlETH:O,tvlUSD:O}}).compact().value()}}p.MAINNET+"",p.RINKEBY+"",p.OPTIMISM+"",p.ARBITRUM_ONE+"",p.POLYGON+"",p.CELO+"",p.G\u00D6RLI+"",p.BSC+"";class p9{constructor(f){this.fallbacks=f}async getPools(f,n,a){for(let i=0;i<this.fallbacks.length;i++){const c=this.fallbacks[i];try{return await c.getPools(f,n,a)}catch{M.info(`Failed to get subgraph pools for V3 from fallback #${i}`)}}throw new Error("Failed to get subgraph pools from any providers")}}function h9(r,f){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=m9(r))||f&&r&&typeof r.length=="number"){n&&(r=n);var a=0,i=function(){};return{s:i,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(m){throw m},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,l=!1,d;return{s:function(){n=n.call(r)},n:function(){var m=n.next();return c=m.done,m},e:function(m){l=!0,d=m},f:function(){try{!c&&n.return!=null&&n.return()}finally{if(l)throw d}}}}function m9(r,f){if(!!r){if(typeof r=="string")return pu(r,f);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pu(r,f)}}function pu(r,f){(f==null||f>r.length)&&(f=r.length);for(var n=0,a=new Array(f);n<f;n++)a[n]=r[n];return a}function b9(r){var f=r.quote,n=r.quoteGasAdjusted,a=r.route,i=r.routeString,c=r.estimatedGasUsed,l=r.estimatedGasUsedQuoteToken,d=r.estimatedGasUsedUSD,u=r.gasPriceWei,m=r.methodParameters,y=r.blockNumber,g=r.trade,T=g.tradeType,A=g.inputAmount,S=g.outputAmount,w=[],O=h9(a),k;try{for(O.s();!(k=O.n()).done;){var Q=k.value,$=Q.amount,j=Q.quote,F=Q.tokenPath;if(Q.protocol===ge.exports.Protocol.V3){for(var J=Q.route.pools,K=[],te=0;te<J.length;te++){var ce=J[te],le=F[te],Me=F[te+1],P=void 0;te===0&&(P=Nt(T)?$.quotient.toString():j.quotient.toString());var N=void 0;te===J.length-1&&(N=Nt(T)?j.quotient.toString():$.quotient.toString()),K.push({type:"v3-pool",tokenIn:{chainId:le.chainId,decimals:le.decimals,address:le.address,symbol:le.symbol},tokenOut:{chainId:Me.chainId,decimals:Me.decimals,address:Me.address,symbol:Me.symbol},fee:ce.fee.toString(),liquidity:ce.liquidity.toString(),sqrtRatioX96:ce.sqrtRatioX96.toString(),tickCurrent:ce.tickCurrent.toString(),amountIn:P,amountOut:N})}w.push(K)}else if(Q.protocol===ge.exports.Protocol.V2){for(var L=Q.route.pairs,B=[],H=0;H<L.length;H++){var x=L[H],V=F[H],ee=F[H+1],se=void 0;H===0&&(se=Nt(T)?$.quotient.toString():j.quotient.toString());var Z=void 0;H===L.length-1&&(Z=Nt(T)?j.quotient.toString():$.quotient.toString());var de=x.reserve0,Te=x.reserve1;B.push({type:"v2-pool",tokenIn:{chainId:V.chainId,decimals:V.decimals,address:V.address,symbol:V.symbol},tokenOut:{chainId:ee.chainId,decimals:ee.decimals,address:ee.address,symbol:ee.symbol},reserve0:{token:{chainId:de.currency.wrapped.chainId,decimals:de.currency.wrapped.decimals,address:de.currency.wrapped.address,symbol:de.currency.wrapped.symbol},quotient:de.quotient.toString()},reserve1:{token:{chainId:Te.currency.wrapped.chainId,decimals:Te.currency.wrapped.decimals,address:Te.currency.wrapped.address,symbol:Te.currency.wrapped.symbol},quotient:Te.quotient.toString()},amountIn:se,amountOut:Z})}w.push(B)}}}catch(Ae){O.e(Ae)}finally{O.f()}var Ce=Nt(T)?A:S;return{state:fa.SUCCESS,data:{methodParameters:m,blockNumber:y.toString(),amount:Ce.quotient.toString(),amountDecimals:Ce.toExact(),quote:f.quotient.toString(),quoteDecimals:f.toExact(),quoteGasAdjusted:n.quotient.toString(),quoteGasAdjustedDecimals:n.toExact(),gasUseEstimateQuote:l.quotient.toString(),gasUseEstimateQuoteDecimals:l.toExact(),gasUseEstimate:c.toString(),gasUseEstimateUSD:d.toExact(),gasPriceWei:u.toString(),route:w,routeString:i}}}function hu(r,f){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);f&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function mu(r){for(var f=1;f<arguments.length;f++){var n=arguments[f]!=null?arguments[f]:{};f%2?hu(Object(n),!0).forEach(function(a){kh(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}var y9=Object.values(p).filter(function(r){return Number.isInteger(r)});function g9(r){return Boolean(r&&y9.includes(r))}var bu=new WeakMap;function v9(r,f){var n=bu.get(f)||{},a=n[r];if(a)return a;var i;r!==p.MAINNET&&(i=new Vc(r));var c,l;[p.POLYGON,p.POLYGON_MUMBAI].includes(r)&&(l=new Gc(r,f,375e3),c=new _f(r,f,l,{retries:2,minTimeout:100,maxTimeout:1e3},{multicallChunk:10,gasLimitPerCall:5e6,quoteMinSuccessRate:.1},{gasLimitOverride:5e6,multicallChunk:5},{gasLimitOverride:625e4,multicallChunk:4}));var d=new ay({chainId:r,provider:f,v2SubgraphProvider:i,multicall2Provider:l,onChainQuoteProvider:c});return n[r]=d,bu.set(f,n),d}function T9(r,f,n){return Aa.apply(this,arguments)}function Aa(){return Aa=yu($n.mark(function r(f,n,a){var i,c,l,d,u,m,y,g,T,A,S,w;return $n.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return i=f.tradeType,c=f.tokenIn,l=f.tokenOut,d=f.amount,u=Object.values(G1).includes(c.address),m=Object.values(G1).includes(l.address),y=u?q1(c.chainId):new W(c.chainId,c.address,c.decimals,c.symbol),g=m?q1(l.chainId):new W(l.chainId,l.address,l.decimals,l.symbol),T=Nt(i)?y:g,A=Nt(i)?g:y,S=gu.fromRawAmount(T,e0.BigInt(d!=null?d:"1")),k.next=10,n.route(S,A,i,void 0,a);case 10:if(w=k.sent,d){k.next=13;break}return k.abrupt("return",{state:fa.INITIALIZED});case 13:if(w){k.next=15;break}return k.abrupt("return",{state:fa.NOT_FOUND});case 15:return k.abrupt("return",b9(mu(mu({},w),{},{routeString:Uu(w.route)})));case 16:case"end":return k.stop()}},r)})),Aa.apply(this,arguments)}function w9(r,f){return Ea.apply(this,arguments)}function Ea(){return Ea=yu($n.mark(function r(f,n){var a,i,c,l,d,u,m,y,g,T,A,S;return $n.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(a=f.tokenInAddress,i=f.tokenInChainId,c=f.tokenInDecimals,l=f.tokenInSymbol,d=f.tokenOutAddress,u=f.tokenOutChainId,m=f.tokenOutDecimals,y=f.tokenOutSymbol,g=f.amount,T=f.tradeType,A=f.provider,g9(i)){O.next=3;break}throw new Error("Router does not support this token's chain (chainId: ".concat(i,")."));case 3:return S=v9(i,A),O.abrupt("return",T9({tradeType:T,tokenIn:{address:a,chainId:i,decimals:c,symbol:l},tokenOut:{address:d,chainId:u,decimals:m,symbol:y},amount:g},S,n));case 5:case"end":return O.stop()}},r)})),Ea.apply(this,arguments)}export{w9 as getClientSideQuoteResult};
